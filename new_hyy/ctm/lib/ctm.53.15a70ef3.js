webpackJsonpctm([53],{189:function(e,n,t){"use strict";function a(e){t(574)}Object.defineProperty(n,"__esModule",{value:!0});var o=t(375),l=t(576),i=t(3),r=a,d=i(o.a,l.a,!1,r,null,null);n.default=d.exports},375:function(e,n,t){"use strict";n.a={data:function(){return{tableData:[],movieCode:"",movieName:"",pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var n=new Date,t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",[t,n])}},{text:"最近一个月",onClick:function(e){var n=new Date,t=new Date;t.setTime(t.getTime()-2592e6),e.$emit("pick",[t,n])}},{text:"最近三个月",onClick:function(e){var n=new Date,t=new Date;t.setTime(t.getTime()-7776e6),e.$emit("pick",[t,n])}}]},dialogVisible:!1,downLoadMovieTime:"",currentPage:1,total:1,size:10,pages:1,status:"1",value7:""}},created:function(){console.log("this.$store",this.$store),this.getDatas()},methods:{resetHandle:function(){var e=this;e.movieCode="",e.movieName="",e.value7=[],e.status=""},formatDateTime:function(e,n){var t=new Date(e),a=t.getFullYear(),o=t.getMonth()+1;o=o<10?"0"+o:o;var l=t.getDate();l=l<10?"0"+l:l;var i=t.getHours();i=i<10?"0"+i:i;var r=t.getMinutes();r=r<10?"0"+r:r;var d=t.getSeconds();return d=d<10?"0"+d:d,0==n?a+"-"+o+"-"+l+" "+i+":"+r+":"+d:1==n?a+"-"+o+"-"+l:2==n?i+":"+r:a+"-"+o+"-"+l+" "+i+":"+r},getDatas:function(e){var n=this;e&&(n.currentPage=1),console.log(":self.currentPage",n.currentPage);var t={movieCode:n.movieCode,movieName:n.movieName,size:n.size||10,current:n.currentPage||1,status:n.status,dateShowFirst:n.value7?n.value7[0]:"",dateShowOff:n.value7?n.value7[1]:""};n.$ctmList.DownloadmovieList(t).then(function(e){if(console.log("retsssssssssss",e.data),e.data){var t=e.data;n.tableData=t.records,n.currentPage=t.current,n.total=t.total,n.size=t.size,n.pages=t.pages}}).catch(function(){console.log("哪里出错了，检擦一下哥哥")})},handleSizeChange:function(e){var n=this;n.size=e,console.log("每页 "+e+" 条"),n.getDatas()},handleCurrentChange:function(e){var n=this;n.currentPage=e,console.log("当前页: "+e),n.getDatas()},tableRowClassName:function(e){e.row;return e.rowIndex%2==1?"warning-row":"success-row"},handleScan:function(e,n){this.$router.push({path:"scan",query:{movieId:n.movieCode}})},handleEdit:function(e,n){console.log("row数据",n),this.$router.push({path:"edit",query:{movieId:n.movieCode}})},openDownloadMovie:function(){this.dialogVisible=!0},downLoadMovie:function(){var e=this,n={startDate:e.downLoadMovieTime[0],endDate:e.downLoadMovieTime[1],cinemaUid:"",ishead:"0"};e.$ctmList.cinemaList({page:1,pageSize:10}).then(function(t){n.cinemaUid=t.data.list[0].uid,e.$ctmList.schbashmovieLoad(n).then(function(n){var t="success",a="同步影片成功！";200==n.code||200==n.status?(e.getDatas(),e.dialogVisible=!1):(t="error",a=n.msg),e.$message({message:a,type:t,duration:1e3,onClose:function(){}})})})},handleClose:function(e){e()}}}},574:function(e,n,t){var a=t(575);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t(157)("45abf654",a,!0,{})},575:function(e,n,t){n=e.exports=t(156)(!0),n.push([e.i,"\n.download-film-header {\n  min-width: 1024px;\n  width: 100%;\n  padding-top: 25px;\n  padding-bottom: 25px;\n  padding-left: 24px;\n  background: #f5f5f5;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.download-film-header .search-wrap {\n    display: inline-block;\n    height: 32px;\n    margin-right: 30px;\n}\n.download-film-header .search-wrap .el-date-range-picker__content.is-left {\n      border-right: 0px;\n}\n.download-film-header .search-wrap .el-input {\n      width: 264px;\n}\n.download-film-header .search-wrap .el-range-editor .el-range-input {\n      font-size: 12px;\n}\n.download-film-header .search-wrap .el-range-editor.el-input__inner {\n      padding: 0 10px;\n}\n.download-film-header .search-wrap .el-date-editor--daterange.el-input__inner {\n      width: 264px;\n}\n.download-film-header .search-wrap .el-date-editor .el-range-separator {\n      width: 9%;\n}\n.download-film-header .search-wrap span {\n      color: #666666;\n      font-size: 12px;\n}\n.download-film-header .plan-size .el-input {\n    width: 160px;\n}\n.download-film-header .plan-size .el-input--suffix .el-input__inner {\n    font-size: 12px;\n}\n.download-film-header .button-wrap {\n    margin-left: 8px;\n    display: inline-block;\n    margin-top: 15px;\n}\n.download-film-header .button-wrap span {\n      font-size: 12px;\n}\n.download-film-header .button-wrap .button-reset {\n      width: 80px;\n      height: 32px;\n      font-size: 12px;\n}\n.download-film-table .el-dialog__header .el-dialog__title {\n  color: #333333;\n}\n.download-film-table .el-icon-close {\n  font-size: 12px;\n}\n.download-film-table .block {\n  display: inline-block;\n  height: 32px;\n}\n.download-film-table .block .demonstration {\n    color: #666666;\n}\n.download-film-table .block .el-date-range-picker__content.is-left {\n    border-right: 0px;\n}\n.download-film-table .block .el-input {\n    width: 360px;\n}\n.download-film-table .block .el-range-editor .el-range-input {\n    font-size: 12px;\n}\n.download-film-table .block .el-range-editor.el-input__inner {\n    padding: 0 10px;\n}\n.download-film-table .block .el-date-editor--daterange.el-input__inner {\n    width: 256px;\n}\n.download-film-table .block .el-date-editor .el-range-separator {\n    width: 8%;\n}\n.download-film-table .block span {\n    color: #666666;\n    font-size: 12px;\n}\n.download-film-table .dialog-footer {\n  margin-left: 8px;\n  display: inline-block;\n}\n.download-film-table .dialog-footer span {\n    font-size: 12px;\n}\n.download-film-table .dialog-footer .button-reset {\n    width: 80px;\n    height: 32px;\n    font-size: 12px;\n}\n.download-film-table .ticket-price-plan-tableNew {\n  width: 100%;\n  height: 32px;\n}\n.download-film-table .ticket-price-plan-tableNew .creat-tickPrice {\n    margin-top: 11px;\n    float: right;\n    display: inline-block;\n    margin-bottom: 12px;\n}\n.download-film-table .el-table .warning-row {\n  background: #f5f5f5;\n}\n.download-film-table .el-table .success-row {\n  background: #ffffff;\n}\n.download-film-table .el-table tr {\n  background: #f2f4fd;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/ctm/src/views/movieManage/groupMovie/common/List.vue"],names:[],mappings:";AACA;EACE,kBAAkB;EAClB,YAAY;EACZ,kBAAkB;EAClB,qBAAqB;EACrB,mBAAmB;EACnB,oBAAoB;EACpB,+BAA+B;UACvB,uBAAuB;CAChC;AACD;IACI,sBAAsB;IACtB,aAAa;IACb,mBAAmB;CACtB;AACD;MACM,kBAAkB;CACvB;AACD;MACM,aAAa;CAClB;AACD;MACM,gBAAgB;CACrB;AACD;MACM,gBAAgB;CACrB;AACD;MACM,aAAa;CAClB;AACD;MACM,UAAU;CACf;AACD;MACM,eAAe;MACf,gBAAgB;CACrB;AACD;IACI,aAAa;CAChB;AACD;IACI,gBAAgB;CACnB;AACD;IACI,iBAAiB;IACjB,sBAAsB;IACtB,iBAAiB;CACpB;AACD;MACM,gBAAgB;CACrB;AACD;MACM,YAAY;MACZ,aAAa;MACb,gBAAgB;CACrB;AACD;EACE,eAAe;CAChB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,sBAAsB;EACtB,aAAa;CACd;AACD;IACI,eAAe;CAClB;AACD;IACI,kBAAkB;CACrB;AACD;IACI,aAAa;CAChB;AACD;IACI,gBAAgB;CACnB;AACD;IACI,gBAAgB;CACnB;AACD;IACI,aAAa;CAChB;AACD;IACI,UAAU;CACb;AACD;IACI,eAAe;IACf,gBAAgB;CACnB;AACD;EACE,iBAAiB;EACjB,sBAAsB;CACvB;AACD;IACI,gBAAgB;CACnB;AACD;IACI,YAAY;IACZ,aAAa;IACb,gBAAgB;CACnB;AACD;EACE,YAAY;EACZ,aAAa;CACd;AACD;IACI,iBAAiB;IACjB,aAAa;IACb,sBAAsB;IACtB,oBAAoB;CACvB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,oBAAoB;CACrB",file:"List.vue",sourcesContent:["\n.download-film-header {\n  min-width: 1024px;\n  width: 100%;\n  padding-top: 25px;\n  padding-bottom: 25px;\n  padding-left: 24px;\n  background: #f5f5f5;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.download-film-header .search-wrap {\n    display: inline-block;\n    height: 32px;\n    margin-right: 30px;\n}\n.download-film-header .search-wrap .el-date-range-picker__content.is-left {\n      border-right: 0px;\n}\n.download-film-header .search-wrap .el-input {\n      width: 264px;\n}\n.download-film-header .search-wrap .el-range-editor .el-range-input {\n      font-size: 12px;\n}\n.download-film-header .search-wrap .el-range-editor.el-input__inner {\n      padding: 0 10px;\n}\n.download-film-header .search-wrap .el-date-editor--daterange.el-input__inner {\n      width: 264px;\n}\n.download-film-header .search-wrap .el-date-editor .el-range-separator {\n      width: 9%;\n}\n.download-film-header .search-wrap span {\n      color: #666666;\n      font-size: 12px;\n}\n.download-film-header .plan-size .el-input {\n    width: 160px;\n}\n.download-film-header .plan-size .el-input--suffix .el-input__inner {\n    font-size: 12px;\n}\n.download-film-header .button-wrap {\n    margin-left: 8px;\n    display: inline-block;\n    margin-top: 15px;\n}\n.download-film-header .button-wrap span {\n      font-size: 12px;\n}\n.download-film-header .button-wrap .button-reset {\n      width: 80px;\n      height: 32px;\n      font-size: 12px;\n}\n.download-film-table .el-dialog__header .el-dialog__title {\n  color: #333333;\n}\n.download-film-table .el-icon-close {\n  font-size: 12px;\n}\n.download-film-table .block {\n  display: inline-block;\n  height: 32px;\n}\n.download-film-table .block .demonstration {\n    color: #666666;\n}\n.download-film-table .block .el-date-range-picker__content.is-left {\n    border-right: 0px;\n}\n.download-film-table .block .el-input {\n    width: 360px;\n}\n.download-film-table .block .el-range-editor .el-range-input {\n    font-size: 12px;\n}\n.download-film-table .block .el-range-editor.el-input__inner {\n    padding: 0 10px;\n}\n.download-film-table .block .el-date-editor--daterange.el-input__inner {\n    width: 256px;\n}\n.download-film-table .block .el-date-editor .el-range-separator {\n    width: 8%;\n}\n.download-film-table .block span {\n    color: #666666;\n    font-size: 12px;\n}\n.download-film-table .dialog-footer {\n  margin-left: 8px;\n  display: inline-block;\n}\n.download-film-table .dialog-footer span {\n    font-size: 12px;\n}\n.download-film-table .dialog-footer .button-reset {\n    width: 80px;\n    height: 32px;\n    font-size: 12px;\n}\n.download-film-table .ticket-price-plan-tableNew {\n  width: 100%;\n  height: 32px;\n}\n.download-film-table .ticket-price-plan-tableNew .creat-tickPrice {\n    margin-top: 11px;\n    float: right;\n    display: inline-block;\n    margin-bottom: 12px;\n}\n.download-film-table .el-table .warning-row {\n  background: #f5f5f5;\n}\n.download-film-table .el-table .success-row {\n  background: #ffffff;\n}\n.download-film-table .el-table tr {\n  background: #f2f4fd;\n}\n"],sourceRoot:""}])},576:function(e,n,t){"use strict";var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",{staticClass:"download-film-header"},[t("div",{staticClass:"search-wrap",staticStyle:{"margin-left":"0px"}},[t("span",[e._v("影片名称：")]),e._v(" "),t("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.movieName,callback:function(n){e.movieName=n},expression:"movieName"}})],1),e._v(" "),t("div",{staticClass:"search-wrap"},[t("span",[e._v(" 影片编码：")]),e._v(" "),t("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.movieCode,callback:function(n){e.movieCode=n},expression:"movieCode"}})],1),e._v(" "),t("div",{staticClass:"search-wrap"},[t("span",[e._v("公映日期：")]),e._v(" "),t("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.value7,callback:function(n){e.value7=n},expression:"value7"}})],1),e._v(" "),t("div",{staticClass:"search-wrap plan-size"},[t("span",[e._v("影片状态：")]),e._v(" "),t("el-select",{attrs:{placeholder:"请选择影片状态："},model:{value:e.status,callback:function(n){e.status=n},expression:"status"}},[t("el-option",{attrs:{label:"已下映",value:"2"}}),e._v(" "),t("el-option",{attrs:{label:"上映中",value:"3"}}),e._v(" "),t("el-option",{attrs:{label:"待上映",value:"4"}}),e._v(" "),t("el-option",{attrs:{label:"全部",value:"1"}})],1)],1),e._v(" "),t("div",{staticClass:"button-wrap"},[t("el-button",{staticClass:"button-reset",attrs:{type:"primary",size:"small"},on:{click:function(n){return e.getDatas("backPageOne")}}},[e._v("查询")])],1),e._v(" "),t("div",{staticClass:"button-wrap"},[t("el-button",{staticClass:"button-reset",on:{click:e.resetHandle}},[e._v("重置")])],1)]),e._v(" "),t("div",{staticClass:"download-film-table"},[t("div",{staticClass:"ticket-price-plan-tableNew"},[t("div",{staticClass:"creat-tickPrice"},[t("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(n){return e.openDownloadMovie()}}},[e._v("下载影片")])],1)]),e._v(" "),t("el-dialog",{attrs:{title:"下载影片",visible:e.dialogVisible,width:"448px","before-close":e.handleClose},on:{"update:visible":function(n){e.dialogVisible=n}}},[t("div",[t("div",{staticClass:"block"},[t("span",{staticClass:"demonstration",staticStyle:{"margin-bottom":"20px"}},[e._v("影片公映日期范围：")]),e._v(" "),t("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"center","value-format":"yyyy-MM-dd"},model:{value:e.downLoadMovieTime,callback:function(n){e.downLoadMovieTime=n},expression:"downLoadMovieTime"}})],1)]),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"button-reset",attrs:{type:"primary"},on:{click:e.downLoadMovie}},[e._v("确 定")]),e._v(" "),t("el-button",{staticClass:"button-reset",on:{click:function(n){e.dialogVisible=!1}}},[e._v("取 消")])],1)]),e._v(" "),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.tableRowClassName}},[t("el-table-column",{attrs:{prop:"movieCode",label:"影片编码",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{prop:"movieName",label:"影片名称",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{prop:"disVersion",label:"发行版本"}}),e._v(" "),t("el-table-column",{attrs:{prop:"movieClass",label:"影片分类"}}),e._v(" "),t("el-table-column",{attrs:{label:"最低票价（元）",prop:"minPrice",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{prop:"timeLong",label:"时长（分钟）",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"datePublicShow",label:"公映日期",width:"100"},scopedSlots:e._u([{key:"default",fn:function(n){return n.row.datePublicShow?[e._v("\n          "+e._s(n.row.datePublicShow.substr(0,10))+"\n        ")]:void 0}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{prop:"dateShowFirst",label:"首映日期",width:"100"},scopedSlots:e._u([{key:"default",fn:function(n){return n.row.dateShowFirst?[e._v("\n          "+e._s(e.formatDateTime(n.row.dateShowFirst.substr(0,10)+" 23:59:59",1))+"\n        ")]:void 0}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{prop:"dateShowOff",label:"下映日期",width:"100"},scopedSlots:e._u([{key:"default",fn:function(n){return n.row.dateShowOff?[e._v("\n          "+e._s(n.row.dateShowOff.substr(0,10))+"\n        ")]:void 0}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{label:"影片状态"},scopedSlots:e._u([{key:"default",fn:function(n){return[(new Date).getTime()<new Date(n.row.dateShowFirst).getTime()||!n.row.dateShowFirst?t("span",[e._v("待上映")]):new Date(n.row.dateShowFirst).getTime()<(new Date).getTime()&&(new Date).getTime()<new Date(e.formatDateTime(n.row.dateShowOff.substr(0,10)+" 23:59:59",0)).getTime()?t("span",[e._v("上映中")]):t("span",[e._v("已下映")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleScan(n.$index,n.row)}}},[e._v("查看")]),e._v(" "),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleEdit(n.$index,n.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),t("div",{staticClass:"page-wrap"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[15,30,45,60],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},o=[],l={render:a,staticRenderFns:o};n.a=l}});