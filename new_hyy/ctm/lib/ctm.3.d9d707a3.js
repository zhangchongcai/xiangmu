webpackJsonpctm([3],{356:function(t,e,i){"use strict";var r=i(37),a=i.n(r),o=i(38),s=i(72);i.n(s),s.baseInterface.queryDictList,s.baseInterface.saveDict,s.baseInterface.queryDictPropertyList,s.baseInterface.updateDictProperty,s.baseInterface.updateDictPropertyStatus;e.a={name:"dictDetail",data:function(){var t=function(t,e,i){/^[a-zA-Z0-9]*$/.test(e)?e.length>20?i(new Error("请输入20个以内字符")):i():i(new Error("只能输入字母或数字"))},e=function(t,e,i){e&&""!=e&&e.length>200?i(new Error("请输入200个以内字符")):i()},i=function(t,e,i){e&&""!=e&&e.length>20?i(new Error("请输入20个以内字符")):i()};return{isEdit:!1,dictTitle:"字典修改",form:{},list:[],isJustSee:!1,dialogFormVisible:!1,dialogStatus:"create",textMap:{update:"编辑字典项",create:"创建字典项"},modifyIndex:null,detailStatus:"",tableData:[],propertyCodeSet:null,itemform:{id:null,dicCode:"",keyCode:"",keyName:"",keyDesc:"",delFlag:"0"},rules:{keyCode:[{required:!0,message:"请输入属性编码",trigger:"blur"},{validator:t,trigger:"blur"}],keyName:[{required:!0,message:"请输入属性名称",trigger:"blur"},{validator:function(t,e,i){/^[\u4e00-\u9fa50-9a-zA-Z\s\~\`\·\！\!\@\#\￥\%\^\……\&\*\（\）\——\-\+\=\【\】\{\}\|\、\\\：\；\:\;\“\”\‘\’\'\"\[\]\{\}\<\,\>\.\《\》\，\。\？\、\?\/\(\)\_]+$/.test(e)?i():i(new Error("名称不能包含特殊字符"))},trigger:"blur"},{validator:i,trigger:"blur"}],keyDesc:[{validator:e,trigger:"blur"}],status:[{required:!0,message:"请选择状态名称",trigger:"blur"}]},dictForm:{dicCode:"",dicName:"",keyDesc:""}}},created:function(){this.isEdit=!(1!=this.$route.query.isEdit&&"true"!=this.$route.query.isEdit),this.isJustSee=!(1!=this.$route.query.isJustSee&&"true"!=this.$route.query.isJustSee),this.isEdit?(this.dictTitle="修改字典",this.dictForm.dicCode=this.$route.query.dicCode,this.dictForm.dicName=this.$route.query.dicName,this.dictForm.dicDesc=this.$route.query.dicDesc,this.dialogStatus="update",this.getList(),this.isJustSee&&(this.dictTitle="查看字典")):this.dictTitle="新建字典"},methods:{getList:function(){var t=this;this.listLoading=!0;var e={};e.dicCode=this.$route.query.dicCode,Object(o.x)(e).then(function(e){t.list=e.data,t.total=e.totalCount,t.listLoading=!1,t.propertyCodeSet=e.data.map(function(t){return t.keyCode})})},plusItems:function(){this.dialogStatus="create",console.log(this.dialogStatus),this.$refs.itemform&&this.$refs.itemform.clearValidate(),this.resetItemform(),this.dialogFormVisible=!0},resetItemform:function(){this.itemform={dicCode:"",keyCode:"",keyName:"",keyDesc:"",delFlag:"0"}},removePlanData:function(t){this.dictitemsForm.tableData.splice(t,1)},enableBtn:function(t){var e=this,i=t;Object(o.l)({id:i.id,delFlag:0}).then(function(t){t&&200==t.code?(e.getList(),e.success("启用成功")):e.error("启用失败")}).catch(function(){e.error(ret.msg)})},disableBtn:function(t){var e=this,i=JSON.parse(a()(t));i.keyDesc=i.keyDesc?i.keyDesc:"",delete i.updateTime,delete i.operator,this.$confirm("确认禁用后将不可用，是否继续禁用?","提示",{confirmButtonText:"确定",cancelButtonText:"再想想",type:"warning"}).then(function(){i.delFlag=1,Object(o.l)({id:i.id,delFlag:1}).then(function(t){t&&200==t.code?(e.getList(),e.success("禁用成功")):e.error("禁用失败")}).catch(function(){e.error(ret.msg)})})},modifyInlineData:function(t,e){this.$refs.itemform&&this.$refs.itemform.clearValidate(),this.dialogFormVisible=!0,this.itemform=t,this.itemform.isModify=!0,this.modifyIndex=e,this.itemform.delFlag=t.delFlag.toString(),this.dialogStatus="update"},closeDialog:function(t,e){var i=this,r=this.$refs,a=this;r[t].validate(function(t){if(t){for(var e=a.list.map(function(t){return t.keyCode}),r=0,o=0;o<e.length;o++)e[o]==a.itemform.keyCode&&r++;if(r>0&&!a.itemform.isModify)return void i.error("属性编码重复。");for(var s=a.list.map(function(t){return t.keyName}),n=0,l=0;l<s.length;l++)s[l]==a.itemform.keyName&&n++;if(n>0&&!a.itemform.isModify)return void i.error("属性名称重复。");a.itemform;a.itemform.id||"update"==a.dialogStatus||a.list.push(a.itemform),"update"==a.dialogStatus&&(a.list[a.modifyIndex]=a.itemform),a.dialogFormVisible=!1,a.itemform={},console.log(i.dialogStatus)}})},updateItem:function(t,e){},cancel:function(){this.dialogFormVisible=!1},quxiao:function(){this.$store.commit("tagNav/removeTagNav",this.$route),this.$router.push("index")},saveDict:function(t,e){var i=this,r=this.$refs;this.$route.query.isEdit;r[t].validate(function(t){if(!t)return!1;i.dialogFormVisible=!1,i.list.forEach(function(t){i.$set(t,"dicCode",i.$route.query.dicCode),i.$delete(t,"tenantId"),i.$delete(t,"updateTime")}),Object(o.m)(i.list).then(function(t){200==t.code?(i.success("修改成功"),i.$store.commit("tagNav/removeTagNav",i.$route),i.$router.push("index")):i.error(t.msg)})})}},filters:{statusFormat:function(t){return 0==status?"启用":1==status?"禁用":void 0}}}},49:function(t,e,i){"use strict";function r(t){i(510)}Object.defineProperty(e,"__esModule",{value:!0});var a=i(356),o=i(512),s=i(3),n=r,l=s(a.a,o.a,!1,n,"data-v-19a55f2a",null);e.default=l.exports},510:function(t,e,i){var r=i(511);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);i(157)("49eb9983",r,!0,{})},511:function(t,e,i){e=t.exports=i(156)(!0),e.push([t.i,"\n.page-wrapper[data-v-19a55f2a] {\r\n  padding: 0 14px 0 14px;\n}\n.dict-text[data-v-19a55f2a] {\r\n  color: #c0c4cc;\r\n  font-size: 13.33px;\n}\n.list-wrapper[data-v-19a55f2a] {\r\n  /* width: calc(100% - 42px); */\r\n  /* padding:20px; */\r\n  margin-top: 10px;\r\n  margin-bottom: 8px;\r\n  /* border: 1px solid #ccc; */\n}\n.search-box[data-v-19a55f2a] {\r\n  padding: 24px;\r\n  padding-bottom: 6px;\r\n  background: #f5f5f5;\n}\n.bread-crumb[data-v-19a55f2a] {\r\n  margin-top: 8px;\r\n  margin-bottom: 8px;\n}\n.search-box[data-v-19a55f2a] {\r\n  padding: 24px;\r\n  padding-bottom: 6px;\r\n  background: #f5f5f5;\n}\n.bread-crumb[data-v-19a55f2a] {\r\n  margin-top: 8px;\r\n  margin-bottom: 8px;\n}\r\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/ctm/src/views/dict/detail.vue"],names:[],mappings:";AACA;EACE,uBAAuB;CACxB;AACD;EACE,eAAe;EACf,mBAAmB;CACpB;AACD;EACE,+BAA+B;EAC/B,mBAAmB;EACnB,iBAAiB;EACjB,mBAAmB;EACnB,6BAA6B;CAC9B;AACD;EACE,cAAc;EACd,oBAAoB;EACpB,oBAAoB;CACrB;AACD;EACE,gBAAgB;EAChB,mBAAmB;CACpB;AACD;EACE,cAAc;EACd,oBAAoB;EACpB,oBAAoB;CACrB;AACD;EACE,gBAAgB;EAChB,mBAAmB;CACpB",file:"detail.vue",sourcesContent:["\n.page-wrapper[data-v-19a55f2a] {\r\n  padding: 0 14px 0 14px;\n}\n.dict-text[data-v-19a55f2a] {\r\n  color: #c0c4cc;\r\n  font-size: 13.33px;\n}\n.list-wrapper[data-v-19a55f2a] {\r\n  /* width: calc(100% - 42px); */\r\n  /* padding:20px; */\r\n  margin-top: 10px;\r\n  margin-bottom: 8px;\r\n  /* border: 1px solid #ccc; */\n}\n.search-box[data-v-19a55f2a] {\r\n  padding: 24px;\r\n  padding-bottom: 6px;\r\n  background: #f5f5f5;\n}\n.bread-crumb[data-v-19a55f2a] {\r\n  margin-top: 8px;\r\n  margin-bottom: 8px;\n}\n.search-box[data-v-19a55f2a] {\r\n  padding: 24px;\r\n  padding-bottom: 6px;\r\n  background: #f5f5f5;\n}\n.bread-crumb[data-v-19a55f2a] {\r\n  margin-top: 8px;\r\n  margin-bottom: 8px;\n}\r\n"],sourceRoot:""}])},512:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-wrapper"},[i("div",{staticClass:"list-wrapper"},[i("el-form",{ref:"dictForm",staticClass:"search-box",attrs:{inline:!0,model:t.dictForm,rules:t.rules,"label-position":"right","label-width":"84px"}},[i("el-form-item",{attrs:{label:"类型编码：",prop:"dicCode"}},[t.isJustSee||t.isEdit?i("span",{staticClass:"dict-text"},[t._v(t._s(t.dictForm.dicCode))]):i("el-input",{attrs:{placeholder:"数据值:",disabled:t.isJustSee||t.isEdit},model:{value:t.dictForm.dicCode,callback:function(e){t.$set(t.dictForm,"dicCode","string"==typeof e?e.trim():e)},expression:"dictForm.dicCode"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"类型名称：",prop:"dictName"}},[t.isJustSee||t.isEdit?i("span",{staticClass:"dict-text"},[t._v(t._s(t.dictForm.dicName))]):i("el-input",{attrs:{placeholder:"名称:",disabled:t.isJustSee||t.isEdit},model:{value:t.dictForm.dicName,callback:function(e){t.$set(t.dictForm,"dicName","string"==typeof e?e.trim():e)},expression:"dictForm.dicName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"描述：",prop:"keyDesc"}},[t.isJustSee||t.isEdit?i("span",{staticClass:"dict-text"},[t._v(t._s(t.dictForm.keyDesc))]):i("el-input",{staticStyle:{height:"32px",width:"180px"},attrs:{type:"textarea",rows:"1",resize:"none",placeholder:"描述:",disabled:t.isJustSee||t.isEdit},model:{value:t.dictForm.keyDesc,callback:function(e){t.$set(t.dictForm,"keyDesc","string"==typeof e?e.trim():e)},expression:"dictForm.keyDesc"}})],1)],1),t._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("div",{staticStyle:{float:"left"}}),t._v(" "),t.isJustSee?t._e():i("div",{staticStyle:{float:"right","margin-top":"8px"}},[i("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",size:"mini"},on:{click:t.plusItems}},[t._v("增加")])],1)]),t._v(" "),i("div",{staticClass:"customer-list"},[i("el-table",{key:"planTable",ref:"planTable",staticClass:"plan-table",staticStyle:{width:"100%"},attrs:{size:"mini",data:t.list,stripe:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"属性编码",prop:"keyCode",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.keyCode))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"属性名称",prop:"keyName",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.keyName))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"描述",prop:"keyDesc",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.keyDesc))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"状态",prop:"delFlag",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("statusFormat")(e.row.delFlag)))])]}}])}),t._v(" "),t.isJustSee?t._e():i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"table-btn-mini",on:{click:function(i){return t.modifyInlineData(e.row,e.$index)}}},[t._v("修改")]),t._v(" "),1==e.row.delFlag?i("span",{staticClass:"table-btn-mini",on:{click:function(i){return t.enableBtn(e.row)}}},[t._v("启用")]):t._e(),t._v(" "),0==e.row.delFlag?i("span",{staticClass:"table-btn-mini",on:{click:function(i){return t.disableBtn(e.row)}}},[t._v("禁用")]):t._e()]}}],null,!1,1766878163)})],1),t._v(" "),t.isJustSee?i("div",{staticClass:"btn",staticStyle:{margin:"20px auto","text-align":"center"}},[i("el-button",{on:{click:t.quxiao}},[t._v("返回")])],1):i("div",{staticClass:"btn",staticStyle:{margin:"20px auto","text-align":"center"}},["create"==t.dialogStatus?i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveDict("dictForm",1)}}},[t._v("保存")]):i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveDict("dictForm",2)}}},[t._v("修改")]),t._v(" "),i("el-button",{on:{click:t.quxiao}},[t._v("取消")])],1)],1)],1),t._v(" "),i("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"600px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"itemform",attrs:{inline:!1,model:t.itemform,rules:t.rules,"label-position":"right","label-width":"110px"}},[i("el-form-item",{attrs:{label:"属性编码",prop:"keyCode"}},[i("el-input",{attrs:{placeholder:"",disabled:"update"==this.dialogStatus},model:{value:t.itemform.keyCode,callback:function(e){t.$set(t.itemform,"keyCode","string"==typeof e?e.trim():e)},expression:"itemform.keyCode"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"属性名称",prop:"keyName"}},[i("el-input",{attrs:{placeholder:""},model:{value:t.itemform.keyName,callback:function(e){t.$set(t.itemform,"keyName","string"==typeof e?e.trim():e)},expression:"itemform.keyName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"keyDesc"}},[i("el-input",{attrs:{placeholder:""},model:{value:t.itemform.keyDesc,callback:function(e){t.$set(t.itemform,"keyDesc","string"==typeof e?e.trim():e)},expression:"itemform.keyDesc"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"启用状态",prop:"delFlag"}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:""},model:{value:t.itemform.delFlag,callback:function(e){t.$set(t.itemform,"delFlag",e)},expression:"itemform.delFlag"}},[i("el-option",{attrs:{label:"启用",value:"0"}}),t._v(" "),i("el-option",{attrs:{label:"禁用",value:"1"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.closeDialog("itemform")}}},[t._v("确 定")]),t._v(" "),i("el-button",{on:{click:function(e){return t.cancel("itemform")}}},[t._v("取 消")])],1)],1)],1)},a=[],o={render:r,staticRenderFns:a};e.a=o}});