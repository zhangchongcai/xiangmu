webpackJsonpctm([41],{173:function(t,e,o){"use strict";function s(t){o(486)}Object.defineProperty(e,"__esModule",{value:!0});var a=o(349),n=o(488),l=o(3),r=s,i=l(a.a,n.a,!1,r,null,null);e.default=i.exports},349:function(t,e,o){"use strict";e.a={name:"List",data:function(){return{formData:{showMonth:"",movieCode:"",status:-1,current:1,size:20},tableData:[],total:0,loading:!1,movieOptions:[],statusOptions:[{keyCode:0,keyName:"保存未提交"},{keyCode:1,keyName:"待审批"},{keyCode:3,keyName:"审批通过"},{keyCode:4,keyName:"审批驳回"}]}},methods:{toView:function(t,e){this.$router.push({path:"/ticket/scheduleInfo/view",query:{showMonth:t,versionNo:e,mode:"view"}})},toEdit:function(t,e){this.$router.push({path:"/ticket/scheduleInfo/edit",query:{showMonth:t,versionNo:e,mode:"edit"}})},toAdd:function(){this.$router.push({path:"/ticket/scheduleInfo/add"})},toApprove:function(t,e){this.$router.push({path:"/ticket/scheduleInfo/approve",query:{showMonth:t,versionNo:e,mode:"approve"}})},remoteMethod:function(t){var e={movieName:t,current:1,size:20};this.downloadMovieList(e)},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.formData.size=t,this.search()},handleCurrentChange:function(t){console.log("当前页: "+t),this.formData.current=t,this.search()},downloadMovieList:function(t){var e=this;this.loading=!0,this.$ctmList.DownloadmovieList(t).then(function(t){console.log(t),200===t.code?(e.loading=!1,e.movieOptions=t.data.records):e.error(t.msg)}).catch(function(t){console.log(t)})},schGuideInfoDelete:function(t,e){var o=this;this.$ctmList.schGuideInfoDelete({showMonth:t,versionNo:e}).then(function(t){console.log(t),200===t.code?(o.success("删除成功！"),o.search()):o.error(t.msg)})},schGuideInfoRecall:function(t){var e=this;this.$ctmList.schGuideInfoRecall({uid:t}).then(function(t){console.log(t),200===t.code?(e.success("撤回成功！"),e.search()):e.error(t.msg)})},search:function(){var t=this;this.$ctmList.schGuideInfoPage(this.formData).then(function(e){console.log(e),200===e.code?(t.tableData=e.data.list,t.total=e.data.total):t.error(e.msg)})}},mounted:function(){this.search(),this.remoteMethod()}}},486:function(t,e,o){var s=o(487);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);o(157)("409f0559",s,!0,{})},487:function(t,e,o){e=t.exports=o(156)(!0),e.push([t.i,"\n.schedule-info-list .el-row-btns .el-button {\n  width: 80px;\n  height: 32px;\n  border: 1px solid #3b74ff;\n  border-radius: 4px;\n  padding: 8px;\n}\n.schedule-info-list .el-row-btns .el-button span {\n    font-size: 12px;\n    color: #3b74ff;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/ctm/src/views/scheduleInfo/List.vue"],names:[],mappings:";AACA;EACE,YAAY;EACZ,aAAa;EACb,0BAA0B;EAC1B,mBAAmB;EACnB,aAAa;CACd;AACD;IACI,gBAAgB;IAChB,eAAe;CAClB",file:"List.vue",sourcesContent:["\n.schedule-info-list .el-row-btns .el-button {\n  width: 80px;\n  height: 32px;\n  border: 1px solid #3b74ff;\n  border-radius: 4px;\n  padding: 8px;\n}\n.schedule-info-list .el-row-btns .el-button span {\n    font-size: 12px;\n    color: #3b74ff;\n}\n"],sourceRoot:""}])},488:function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"schedule-info-list"},[o("el-form",{staticClass:"demo-form-inline search-form",attrs:{inline:!0,model:t.formData,size:"small"}},[o("el-form-item",{attrs:{label:"公映年月："}},[o("el-date-picker",{attrs:{type:"month","value-format":"yyyyMM",placeholder:"请选择"},model:{value:t.formData.showMonth,callback:function(e){t.$set(t.formData,"showMonth",e)},expression:"formData.showMonth"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"影片名称："}},[o("el-select",{attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"请输入影片名称","remote-method":t.remoteMethod,loading:t.loading},on:{clear:t.remoteMethod},model:{value:t.formData.movieCode,callback:function(e){t.$set(t.formData,"movieCode",e)},expression:"formData.movieCode"}},t._l(t.movieOptions,function(t){return o("el-option",{key:t.movieCode,attrs:{label:t.movieName,value:t.movieCode}})}),1)],1),t._v(" "),o("el-form-item",{attrs:{label:"状态："}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[o("el-option",{attrs:{label:"全部",value:-1}}),t._v(" "),t._l(t.statusOptions,function(t){return o("el-option",{key:t.keyCode,attrs:{label:t.keyName,value:t.keyCode}})})],2)],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1)],1),t._v(" "),o("div",{staticClass:"el-row-btns clearfix"},[o("el-button",{staticStyle:{float:"right"},attrs:{size:"small"},on:{click:t.toAdd}},[t._v("新建")])],1),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[o("el-table-column",{attrs:{prop:"showMonth",label:"公映年月","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"versionNo",label:"版本","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"hallCount",label:"状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?o("span",[t._v("保存未提交")]):t._e(),t._v(" "),1===e.row.status?o("span",{staticStyle:{color:"#739BFF"}},[t._v("待审批")]):t._e(),t._v(" "),3===e.row.status?o("span",{staticStyle:{color:"#2DBC2D"}},[t._v("审批通过")]):t._e(),t._v(" "),4===e.row.status?o("span",{staticStyle:{color:"#F33430"}},[t._v("审批驳回")]):t._e()]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"createUserName",label:"操作人","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"createTime",label:"操作时间",width:"260","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"approveUserName",label:"审核人","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"approveTime",label:"审核时间",width:"260","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{width:"200",fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"small"},on:{click:function(o){return t.toView(e.row.showMonth,e.row.versionNo)}}},[t._v("查看")]),t._v(" "),0===e.row.status||4===e.row.status||3===e.row.status&&e.row.isMaxVersion?o("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"small"},on:{click:function(o){return t.toEdit(e.row.showMonth,e.row.versionNo)}}},[t._v("编辑")]):t._e(),t._v(" "),0===e.row.status||4===e.row.status?o("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"small"},on:{click:function(o){return t.schGuideInfoDelete(e.row.showMonth,e.row.versionNo)}}},[t._v("删除")]):t._e(),t._v(" "),1===e.row.status?o("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"small"},on:{click:function(o){return t.toApprove(e.row.showMonth,e.row.versionNo)}}},[t._v("审批")]):t._e(),t._v(" "),1===e.row.status?o("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"small"},on:{click:function(o){return t.schGuideInfoRecall(e.row.uid)}}},[t._v("撤回")]):t._e()]}}])})],1),t._v(" "),o("div",{staticClass:"page-wrap"},[o("el-pagination",{attrs:{background:"","current-page":t.formData.current,"page-sizes":[20,40,60,80],"page-size":t.formData.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},a=[],n={render:s,staticRenderFns:a};e.a=n}});