webpackJsonpctm([38],{167:function(e,t,n){"use strict";function l(e){n(468)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(343),o=n(470),i=n(3),s=l,r=i(a.a,o.a,!1,s,null,null);t.default=r.exports},301:function(e,t,n){"use strict";t.a={methods:{getDate:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1>=10?t.getMonth()+1:"0"+(t.getMonth()+1))+"-"+(t.getDate()>=10?t.getDate():"0"+t.getDate())},getCurrentWeekDate:function(){var e=new Date,t=Date.parse(e)-24*(e.getDay()?e.getDay()-1:6)*60*60*1e3,n=Date.parse(e)+24*(e.getDay()?7-e.getDay():0)*60*60*1e3;return[this.getDate(t),this.getDate(n)]},getFutureWeekDate:function(){var e=Date.parse(new Date),t=e+5184e5;return[this.getDate(e),this.getDate(t)]}}}},343:function(e,t,n){"use strict";var l=n(301),a=n(72);n.n(a);t.a={name:"OpenCloseSale",mixins:[l.a],components:{singleCinema:a.singleCinema},data:function(){return{singleCinemaVisible:!1,singleCinemaType:2,innerData:{id:""},cinemaName:"",openStopFlag:"",channelNatureOptions:[{keyCode:2,keyName:"网络代售渠道"},{keyCode:1,keyName:"直营线上"},{keyCode:0,keyName:"线下渠道"}],selectedChannel:[],gridData:[],searchForm:{cinemaUid:"",channelNative:-1,name:"",code:""},formLabelWidth:"60px",dialogVisible:!1,multipleSelection:[],tableData:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]},saleStatusOptions:[{keyCode:"SALE",keyName:"开售"},{keyCode:"STOP",keyName:"停售"}],hallUidOptions:[],channelUidOptions:[],date:"",total:0,formData:{channelUid:"",cinemaUid:"",saleStatus:"",hallUid:"",current:1,size:20,movieName:"",startPlanDate:"",endPlanDate:""}}},methods:{callBackSingle:function(e){this.singleCinemaVisible=e.framedialogVisible,e.isCloseWindow||(console.log(e,"-----\x3e data"),this.cinemaName=e.data.name,this.formData.cinemaUid=e.data.id,this.searchForm.cinemaUid=e.data.id,this.innerData.id=e.data.id,this.search(),this.findAllHall(),this.getChannelList())},dialogClose:function(){this.searchForm.channelNative=-1,this.searchForm.name=this.searchForm.code=""},emptyData:function(){this.selectedChannel=[],this.$refs.multipleTable.clearSelection()},deleteCurrent:function(e){var t=this.selectedChannel.find(function(t){return t.code===e});this.$refs.multipleTable.toggleRowSelection(t)},getBaseChannelList:function(e){var t=this;this.$ctmList.getBaseChannelList(this.searchForm).then(function(n){console.log(n),200===n.code?(t.gridData=n.data,e&&e()):t.error(n.msg)})},toDetail:function(e){console.log(e),this.$router.push({path:"/ticket/moviePlan/detail",query:{mode:"view",uid:e,referer:encodeURIComponent(this.$route.fullPath)}})},selectable:function(e){return Date.parse(e.showTimeStart)>(new Date).getTime()},handleChannel:function(e){var t=this;if(this.multipleSelection.find(function(e){return console.log(e.saleStatus),"停售"===e.saleStatus}))return void this.error("所选场次中存在已停售场次，不允许做渠道开停售，请检查后再做渠道开停售");this.openStopFlag=e,this.getBaseChannelList(function(e){t.dialogVisible=!0})},setChannelStatus:function(){var e=this,t=this.selectedChannel.map(function(e){return e.uid}),n=this.multipleSelection.map(function(e){return e.planUid});"open"===this.openStopFlag?this.$ctmList.setChannelOpen({channelList:t,planUids:n}).then(function(t){console.log(t),200===t.code?(e.success("渠道开售成功！"),e.dialogVisible=!1,e.search()):e.error(t.msg)}):"stop"===this.openStopFlag&&this.$ctmList.setChannelStop({channelList:t,planUids:n}).then(function(t){console.log(t),200===t.code?(e.success("渠道停售成功！"),e.dialogVisible=!1,e.search()):e.error(t.msg)})},handleClick:function(e,t){console.log(e,t),this.saleOpenStop([e],t)},multipleHandler:function(e){var t=this.multipleSelection.map(function(e){return e.planUid});this.saleOpenStop(t,e)},saleOpenStop:function(e,t){var n=this;this.$ctmList.saleOpenStop({planUids:e,saleStatus:t,cinemaUid:this.formData.cinemaUid}).then(function(e){console.log(e),200===e.code?(n.success("open"===t?"开售成功！":"停售成功！"),n.search()):n.error(e.msg)})},dateChange:function(e){console.log(e),e?(this.formData.startPlanDate=e[0],this.formData.endPlanDate=e[1]):(this.formData.startPlanDate="",this.formData.endPlanDate="")},selectedChannelChange:function(e){this.selectedChannel=e},handleSelectionChange:function(e){this.multipleSelection=e},search:function(){var e=this;this.$ctmList.getSaleList(this.formData).then(function(t){console.log(t),200===t.code?(e.tableData=t.data.list,e.total=t.data.total):e.error(t.msg)})},resetFields:function(){this.date=this.getFutureWeekDate(),this.dateChange(this.date),this.formData.hallUid="",this.formData.channelUid="",this.formData.saleStatus="",this.formData.movieName=""},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.formData.size=e,this.search()},handleCurrentChange:function(e){console.log("当前页: "+e),this.formData.current=e,this.search()},findAllHall:function(){var e=this;this.$ctmList.findAllHall({cinemaUid:this.formData.cinemaUid}).then(function(t){console.log(t),200===t.code?(e.hallUidOptions=t.data,e.formData.hallUid=""):e.error(t.msg)})},getChannelList:function(){var e=this;this.$ctmList.getChannelList({cinemaUid:this.formData.cinemaUid,type:1}).then(function(t){console.log(t),200===t.code?(e.channelUidOptions=t.data,e.formData.channelUid=""):e.error(t.msg)})}},mounted:function(){var e=this;this.date=this.getFutureWeekDate(),this.dateChange(this.date),this.$ctmList.getUserInfo().then(function(t){console.log(t),200===t.code?(e.formData.cinemaUid=t.data.cinemaUid,e.searchForm.cinemaUid=t.data.cinemaUid,e.innerData.id=Number(t.data.cinemaUid),e.cinemaName=t.data.cinemaName,e.search(),e.findAllHall(),e.getChannelList()):e.error(t.msg)}).catch(function(e){console.log(e)})}}},468:function(e,t,n){var l=n(469);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);n(157)("5b5a13c2",l,!0,{})},469:function(e,t,n){t=e.exports=n(156)(!0),t.push([e.i,"\n.open-close-sale .single-cinema-btn .el-button {\n  padding: 8px 16px;\n  min-width: 80px;\n  height: 32px;\n}\n.open-close-sale .single-cinema-btn .el-button + .el-button {\n  margin-left: 30px;\n}\n.open-close-sale .normal-btn {\n  min-width: 80px;\n  height: 32px;\n  border: 1px solid #3b74ff;\n  border-radius: 4px;\n  padding: 8px 16px;\n  background: #fff;\n}\n.open-close-sale .normal-btn span {\n    font-size: 12px;\n    color: #3b74ff;\n}\n.open-close-sale .el-row-btns .el-button {\n  min-width: 80px;\n  height: 32px;\n  padding: 8px 16px;\n  border-radius: 4px;\n  border: 1px solid #3b74ff;\n  background: #fff;\n  color: #3b74ff;\n}\n.open-close-sale .el-row-btns .el-button.is-disabled {\n    opacity: 0.5;\n}\n.open-close-sale .el-row-btns .el-button:hover {\n    border: 1px solid #0f55ff;\n    color: #0f55ff;\n}\n.open-close-sale .normal-dialog .el-dialog__header {\n  padding: 16px 0 8px;\n  margin: 0 20px;\n  border-bottom: 1px solid #e5e5e5;\n}\n.open-close-sale .normal-dialog .el-dialog__header .el-dialog__title {\n    color: #333;\n    font-weight: normal;\n}\n.open-close-sale .normal-dialog .el-dialog__body {\n  padding: 12px 20px;\n  border-bottom: none;\n}\n.open-close-sale .normal-dialog .el-dialog__body .box-card {\n    width: 30%;\n}\n.open-close-sale .normal-dialog .el-dialog__body .box-card .el-card__header {\n      padding: 8px 20px;\n}\n.open-close-sale .normal-dialog .el-dialog__body .box-card .el-card__body {\n      max-height: 340px;\n      overflow-y: auto;\n}\n.open-close-sale .normal-dialog .el-dialog__body .box-card .text {\n      font-size: 12px;\n}\n.open-close-sale .normal-dialog .el-dialog__body .box-card .item {\n      margin-bottom: 8px;\n}\n.open-close-sale .normal-dialog .el-dialog__body .detail-title {\n    font-weight: bold;\n}\n.open-close-sale .normal-dialog .el-dialog__body .el-form-item {\n    margin-bottom: 12px;\n}\n.open-close-sale .normal-dialog .el-dialog__body .el-form-item .el-form-item__label,\n    .open-close-sale .normal-dialog .el-dialog__body .el-form-item .el-range-input {\n      color: #666;\n      font-size: 12px;\n}\n.open-close-sale .normal-dialog .el-dialog__body .el-form-item .el-icon-date,\n    .open-close-sale .normal-dialog .el-dialog__body .el-form-item .el-range__close-icon {\n      display: none;\n}\n.open-close-sale .normal-dialog .el-dialog__body .el-form-item .el-checkbox-group .el-checkbox {\n      width: 33%;\n      margin-right: 0;\n}\n.open-close-sale .normal-dialog .el-dialog__footer {\n  padding: 0 20px 12px;\n}\n.open-close-sale .normal-dialog .el-dialog__footer .el-button {\n    padding: 8px 16px;\n    min-width: 80px;\n    height: 32px;\n}\n.open-close-sale .normal-dialog .el-dialog__footer .el-button + .el-button {\n    margin-left: 30px;\n}\n.open-close-sale .el-dialog__body .el-form-item .el-button span {\n  color: #fff;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/ctm/src/views/moviePlan/planChannel/OpenCloseSale.vue"],names:[],mappings:";AACA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,aAAa;CACd;AACD;EACE,kBAAkB;CACnB;AACD;EACE,gBAAgB;EAChB,aAAa;EACb,0BAA0B;EAC1B,mBAAmB;EACnB,kBAAkB;EAClB,iBAAiB;CAClB;AACD;IACI,gBAAgB;IAChB,eAAe;CAClB;AACD;EACE,gBAAgB;EAChB,aAAa;EACb,kBAAkB;EAClB,mBAAmB;EACnB,0BAA0B;EAC1B,iBAAiB;EACjB,eAAe;CAChB;AACD;IACI,aAAa;CAChB;AACD;IACI,0BAA0B;IAC1B,eAAe;CAClB;AACD;EACE,oBAAoB;EACpB,eAAe;EACf,iCAAiC;CAClC;AACD;IACI,YAAY;IACZ,oBAAoB;CACvB;AACD;EACE,mBAAmB;EACnB,oBAAoB;CACrB;AACD;IACI,WAAW;CACd;AACD;MACM,kBAAkB;CACvB;AACD;MACM,kBAAkB;MAClB,iBAAiB;CACtB;AACD;MACM,gBAAgB;CACrB;AACD;MACM,mBAAmB;CACxB;AACD;IACI,kBAAkB;CACrB;AACD;IACI,oBAAoB;CACvB;AACD;;MAEM,YAAY;MACZ,gBAAgB;CACrB;AACD;;MAEM,cAAc;CACnB;AACD;MACM,WAAW;MACX,gBAAgB;CACrB;AACD;EACE,qBAAqB;CACtB;AACD;IACI,kBAAkB;IAClB,gBAAgB;IAChB,aAAa;CAChB;AACD;IACI,kBAAkB;CACrB;AACD;EACE,YAAY;CACb",file:"OpenCloseSale.vue",sourcesContent:["\n.open-close-sale .single-cinema-btn .el-button {\n  padding: 8px 16px;\n  min-width: 80px;\n  height: 32px;\n}\n.open-close-sale .single-cinema-btn .el-button + .el-button {\n  margin-left: 30px;\n}\n.open-close-sale .normal-btn {\n  min-width: 80px;\n  height: 32px;\n  border: 1px solid #3b74ff;\n  border-radius: 4px;\n  padding: 8px 16px;\n  background: #fff;\n}\n.open-close-sale .normal-btn span {\n    font-size: 12px;\n    color: #3b74ff;\n}\n.open-close-sale .el-row-btns .el-button {\n  min-width: 80px;\n  height: 32px;\n  padding: 8px 16px;\n  border-radius: 4px;\n  border: 1px solid #3b74ff;\n  background: #fff;\n  color: #3b74ff;\n}\n.open-close-sale .el-row-btns .el-button.is-disabled {\n    opacity: 0.5;\n}\n.open-close-sale .el-row-btns .el-button:hover {\n    border: 1px solid #0f55ff;\n    color: #0f55ff;\n}\n.open-close-sale .normal-dialog .el-dialog__header {\n  padding: 16px 0 8px;\n  margin: 0 20px;\n  border-bottom: 1px solid #e5e5e5;\n}\n.open-close-sale .normal-dialog .el-dialog__header .el-dialog__title {\n    color: #333;\n    font-weight: normal;\n}\n.open-close-sale .normal-dialog .el-dialog__body {\n  padding: 12px 20px;\n  border-bottom: none;\n}\n.open-close-sale .normal-dialog .el-dialog__body .box-card {\n    width: 30%;\n}\n.open-close-sale .normal-dialog .el-dialog__body .box-card .el-card__header {\n      padding: 8px 20px;\n}\n.open-close-sale .normal-dialog .el-dialog__body .box-card .el-card__body {\n      max-height: 340px;\n      overflow-y: auto;\n}\n.open-close-sale .normal-dialog .el-dialog__body .box-card .text {\n      font-size: 12px;\n}\n.open-close-sale .normal-dialog .el-dialog__body .box-card .item {\n      margin-bottom: 8px;\n}\n.open-close-sale .normal-dialog .el-dialog__body .detail-title {\n    font-weight: bold;\n}\n.open-close-sale .normal-dialog .el-dialog__body .el-form-item {\n    margin-bottom: 12px;\n}\n.open-close-sale .normal-dialog .el-dialog__body .el-form-item .el-form-item__label,\n    .open-close-sale .normal-dialog .el-dialog__body .el-form-item .el-range-input {\n      color: #666;\n      font-size: 12px;\n}\n.open-close-sale .normal-dialog .el-dialog__body .el-form-item .el-icon-date,\n    .open-close-sale .normal-dialog .el-dialog__body .el-form-item .el-range__close-icon {\n      display: none;\n}\n.open-close-sale .normal-dialog .el-dialog__body .el-form-item .el-checkbox-group .el-checkbox {\n      width: 33%;\n      margin-right: 0;\n}\n.open-close-sale .normal-dialog .el-dialog__footer {\n  padding: 0 20px 12px;\n}\n.open-close-sale .normal-dialog .el-dialog__footer .el-button {\n    padding: 8px 16px;\n    min-width: 80px;\n    height: 32px;\n}\n.open-close-sale .normal-dialog .el-dialog__footer .el-button + .el-button {\n    margin-left: 30px;\n}\n.open-close-sale .el-dialog__body .el-form-item .el-button span {\n  color: #fff;\n}\n"],sourceRoot:""}])},470:function(e,t,n){"use strict";var l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"open-close-sale"},[n("singleCinema",{ref:"frameSingleCinema",attrs:{framedialogVisible:e.singleCinemaVisible,type:e.singleCinemaType,innerData:e.innerData},on:{"update:framedialogVisible":function(t){e.singleCinemaVisible=t},"update:framedialog-visible":function(t){e.singleCinemaVisible=t},callBackSingle:e.callBackSingle}},[n("div",{staticClass:"single-cinema-btn",attrs:{slot:"footerId"},slot:"footerId"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$refs.frameSingleCinema.confirmData(),e.singleCinemaVisible=!1}}},[e._v("确 定")]),e._v(" "),n("el-button",{on:{click:function(t){e.singleCinemaVisible=!1}}},[e._v("取 消")])],1)]),e._v(" "),n("el-dialog",{staticClass:"normal-dialog",attrs:{title:"选择渠道",visible:e.dialogVisible,width:"892px"},on:{close:e.dialogClose,"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{attrs:{inline:!0,model:e.searchForm,"label-width":e.formLabelWidth,size:"small"}},[n("el-form-item",{attrs:{label:"渠道类型"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.channelNative,callback:function(t){e.$set(e.searchForm,"channelNative",t)},expression:"searchForm.channelNative"}},[n("el-option",{attrs:{label:"全部",value:-1}}),e._v(" "),e._l(e.channelNatureOptions,function(e){return n("el-option",{key:e.keyCode,attrs:{label:e.keyName,value:e.keyCode}})})],2)],1),e._v(" "),n("el-form-item",{attrs:{label:"渠道编码"}},[n("el-input",{attrs:{placeholder:"请输入渠道编码"},model:{value:e.searchForm.code,callback:function(t){e.$set(e.searchForm,"code",t)},expression:"searchForm.code"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"渠道名称"}},[n("el-input",{attrs:{placeholder:"请输入渠道名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),n("el-form-item",{staticStyle:{float:"right","margin-right":"0"}},[n("el-button",{staticStyle:{width:"80px",height:"32px"},attrs:{type:"primary"},on:{click:e.getBaseChannelList}},[e._v("查询")])],1)],1),e._v(" "),n("div",{staticStyle:{display:"flex"}},[n("el-table",{ref:"multipleTable",staticStyle:{width:"70%"},attrs:{data:e.gridData,height:"420"},on:{"selection-change":e.selectedChannelChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{property:"code",label:"渠道编码",width:"150"}}),e._v(" "),n("el-table-column",{attrs:{property:"name",label:"渠道名称"}}),e._v(" "),n("el-table-column",{attrs:{label:"渠道类型","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.type?n("span",[e._v("线下渠道")]):1===t.row.type?n("span",[e._v("直营线上")]):2===t.row.type?n("span",[e._v("网络代售渠道")]):e._e()]}}])})],1),e._v(" "),n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("已选内容：")]),e._v(" "),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.emptyData}},[e._v("清空")])],1),e._v(" "),e._l(e.selectedChannel,function(t){return n("div",{key:t.code,staticClass:"text item"},[n("span",[e._v(e._s(t.name))]),e._v(" "),n("i",{staticClass:"el-icon-close",staticStyle:{float:"right",padding:"3px 0",cursor:"pointer"},on:{click:function(n){return e.deleteCurrent(t.code)}}})])})],2)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.setChannelStatus}},[e._v("保 存")]),e._v(" "),n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),n("el-form",{staticClass:"demo-form-inline search-form",attrs:{inline:!0,model:e.formData,size:"small"}},[n("el-form-item",{attrs:{label:"影院名称："}},[n("el-input",{staticStyle:{width:"192px","margin-right":"8px"},attrs:{readonly:""},model:{value:e.cinemaName,callback:function(t){e.cinemaName=t},expression:"cinemaName"}}),e._v(" "),n("el-button",{staticClass:"normal-btn",on:{click:function(t){e.$refs.frameSingleCinema.listAuthCommCinemas(),e.singleCinemaVisible=!0}}},[e._v("选择")])],1),e._v(" "),n("el-form-item",{attrs:{label:"时间范围："}},[n("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd",clearable:!1,editable:!1,"unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.dateChange},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"开售状态："}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.saleStatus,callback:function(t){e.$set(e.formData,"saleStatus",t)},expression:"formData.saleStatus"}},[n("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.saleStatusOptions,function(e){return n("el-option",{key:e.keyCode,attrs:{label:e.keyName,value:e.keyCode}})})],2)],1),e._v(" "),n("el-form-item",{attrs:{label:"影厅："}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.hallUid,callback:function(t){e.$set(e.formData,"hallUid",t)},expression:"formData.hallUid"}},[n("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.hallUidOptions,function(t){return t.status?n("el-option",{key:t.uid,attrs:{label:t.name,value:t.uid}}):e._e()})],2)],1),e._v(" "),n("el-form-item",{attrs:{label:"销售渠道："}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.channelUid,callback:function(t){e.$set(e.formData,"channelUid",t)},expression:"formData.channelUid"}},[n("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.channelUidOptions,function(e){return n("el-option",{key:e.uid,attrs:{label:e.name,value:e.uid}})})],2)],1),e._v(" "),n("el-form-item",{attrs:{label:"影片名称："}},[n("el-input",{attrs:{placeholder:"请输入影片名称",clearable:""},model:{value:e.formData.movieName,callback:function(t){e.$set(e.formData,"movieName",t)},expression:"formData.movieName"}})],1),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{height:"32px",width:"80px"},attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),n("el-button",{staticClass:"normal-btn",on:{click:e.resetFields}},[e._v("重置条件")])],1)],1),e._v(" "),n("el-row",{staticClass:"row-bg el-row-btns",attrs:{type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{disabled:!e.multipleSelection.length,size:"small"},on:{click:function(t){return e.multipleHandler("open")}}},[e._v("场次开售")]),e._v(" "),n("el-button",{attrs:{disabled:!e.multipleSelection.length,size:"small"},on:{click:function(t){return e.multipleHandler("stop")}}},[e._v("场次停售")]),e._v(" "),n("el-button",{attrs:{disabled:!e.multipleSelection.length,size:"small"},on:{click:function(t){return e.handleChannel("open")}}},[e._v("渠道开售")]),e._v(" "),n("el-button",{attrs:{disabled:!e.multipleSelection.length,size:"small"},on:{click:function(t){return e.handleChannel("stop")}}},[e._v("渠道停售")]),e._v(" "),n("span",[e._v("已选 "+e._s(e.multipleSelection.length)+" 项")])],1)],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",selectable:e.selectable}}),e._v(" "),n("el-table-column",{attrs:{prop:"movieName",label:"影片名称",width:"200","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s((t.row.joinFlag?t.row.joinMovieName:t.row.movieName)+"（"+(t.row.disVersion||"--")+"/"+(t.row.movieDescLanguage||"--")+"）")+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"showTimeStart",label:"日期",width:"120","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.showTimeStart.split(" ")[0])+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"showTimeStart",label:"时间",width:"120","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.showTimeStart.split(" ")[1].substring(0,5)+"-"+t.row.showTimeEnd.split(" ")[1].substring(0,5))+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"hallName",label:"影厅",width:"180","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{prop:"publisherRate",label:"院方分账比例",width:"120","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.joinFlag?n("span",[e._v("--")]):n("span",[e._v(e._s(t.row.publisherRate)+"%")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"priceProgramName",label:"价格方案","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.joinFlag?n("span",[e._v("--")]):n("span",[e._v(e._s(t.row.priceProgramName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"minPrice",label:"最低票价","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.joinFlag?n("span",[e._v("--")]):n("span",[e._v(e._s(t.row.minPrice))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"票类价格","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.baseTicketList&&t.row.baseTicketList.length>0?n("el-popover",{attrs:{trigger:"hover",placement:"bottom"}},[e._l(t.row.baseTicketList,function(t,l){return n("div",{key:l,staticStyle:{padding:"10px"}},[n("span",{staticStyle:{display:"inline-block","min-width":"70px"}},[e._v(e._s(t.ticketName))]),e._v(" "),n("span",[e._v("￥"+e._s(t.price))])])}),e._v(" "),n("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("查看")])],2):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"网售价格","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.favTicketList&&t.row.favTicketList.length>0?n("el-popover",{attrs:{trigger:"hover",placement:"bottom"}},[e._l(t.row.favTicketList,function(t,l){return"SALE"===t.saleStatus?n("div",{key:l,staticStyle:{padding:"10px"}},[n("span",{staticStyle:{display:"inline-block","min-width":"70px"}},[e._v(e._s(t.channelName))]),e._v(" "),n("span",[e._v("￥"+e._s(t.price))])]):e._e()}),e._v(" "),n("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("查看")])],2):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"120",prop:"priceProgramName",label:"增值服务费","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.baseTicketList&&t.row.baseTicketList.length>0||t.row.favTicketList&&t.row.favTicketList.length>0?n("el-popover",{attrs:{trigger:"hover",placement:"bottom"}},[e._l(t.row.baseTicketList,function(t,l){return n("div",{key:t.ticketName,staticStyle:{padding:"10px"}},[n("span",{staticStyle:{display:"inline-block","min-width":"70px"}},[e._v(e._s(t.ticketName))]),e._v(" "),n("span",[e._v("￥"+e._s(t.addFee))])])}),e._v(" "),e._l(t.row.favTicketList,function(t,l){return"SALE"===t.saleStatus?n("div",{key:t.channelName,staticStyle:{padding:"10px"}},[n("span",{staticStyle:{display:"inline-block","min-width":"70px"}},[e._v(e._s(t.channelName))]),e._v(" "),n("span",[e._v("￥"+e._s(t.addFee))])]):e._e()}),e._v(" "),n("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("查看")])],2):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"销售渠道","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.saleChannel&&t.row.saleChannel.length>0?n("el-popover",{attrs:{trigger:"hover",placement:"bottom"}},[e._l(t.row.saleChannel,function(t,l){return n("div",{key:l,staticStyle:{padding:"10px"}},[n("span",{staticStyle:{display:"inline-block","min-width":"70px"}},[e._v(e._s(t))])])}),e._v(" "),n("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("查看")])],2):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"saleStatus",label:"场次状态","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{width:"120",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["停售"===t.row.saleStatus?n("el-button",{attrs:{disabled:!e.selectable(t.row),type:"text",size:"small"},on:{click:function(n){return e.handleClick(t.row.planUid,"open")}}},[e._v("开售")]):n("el-button",{attrs:{disabled:!e.selectable(t.row),type:"text",size:"small"},on:{click:function(n){return e.handleClick(t.row.planUid,"stop")}}},[e._v("停售")]),e._v(" "),n("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"small"},on:{click:function(n){return e.toDetail(t.row.planUid)}}},[e._v("查看详情")])]}}])})],1),e._v(" "),n("div",{staticClass:"page-wrap"},[n("el-pagination",{attrs:{background:"","current-page":e.formData.currentPage,"page-sizes":[20,40,60,80],"page-size":e.formData.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},a=[],o={render:l,staticRenderFns:a};t.a=o}});