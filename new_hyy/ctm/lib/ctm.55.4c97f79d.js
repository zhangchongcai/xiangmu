webpackJsonpctm([55],{184:function(e,n,t){"use strict";function a(e){t(559)}Object.defineProperty(n,"__esModule",{value:!0});var i=t(370),o=t(561),l=t(3),s=a,r=l(i.a,o.a,!1,s,null,null);n.default=r.exports},370:function(e,n,t){"use strict";var a=t(72);t.n(a);n.a={data:function(){return{firstCinema:{},innerDataSingle:{id:"",fullName:""},singleCinemaVisible:!1,whereUse:null,cinematype:2,innerData:[],movieCode:"",movieName:"",cinemaUid:"1e09f42b-fa4f-425d-bf10-f290225b0dd3",tableData:[],channelList:[],channelsList_1:[],channelsList_2:[],downLoadMovieTime2:"",dialogVisible:!1,currentPage:1,total:1,size:10,pages:1,status:"1",pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var n=new Date,t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",[t,n])}},{text:"最近一个月",onClick:function(e){var n=new Date,t=new Date;t.setTime(t.getTime()-2592e6),e.$emit("pick",[t,n])}},{text:"最近三个月",onClick:function(e){var n=new Date,t=new Date;t.setTime(t.getTime()-7776e6),e.$emit("pick",[t,n])}}]},value7:""}},methods:{formatDateTime:function(e,n){var t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1;i=i<10?"0"+i:i;var o=t.getDate();o=o<10?"0"+o:o;var l=t.getHours();l=l<10?"0"+l:l;var s=t.getMinutes();s=s<10?"0"+s:s;var r=t.getSeconds();return r=r<10?"0"+r:r,0==n?a+"-"+i+"-"+o+" "+l+":"+s+":"+r:1==n?a+"-"+i+"-"+o:2==n?l+":"+s:a+"-"+i+"-"+o+" "+l+":"+s},isOrNotChangeCinenams:function(){console.log("this.$store.state.changeCinemaData:",this.$store.state.changeCinemaData),this.$store.state.changeCinemaData?(this.innerDataSingle.id=this.$store.state.changeCinemaData.id,this.innerDataSingle.fullName=this.$store.state.changeCinemaData.fullName,this.getDatas()):this.listAuthCommCinemas()},listAuthCommCinemas:function(){var e=this;this.$ctmList.getUserInfo().then(function(n){200===n.code&&(e.innerDataSingle.id=n.data.cinemaUid,e.innerDataSingle.fullName=n.data.cinemaName,e.getDatas())}).catch(function(e){console.log(e)})},chosenCinemaFun:function(){this.singleCinemaVisible=!0,this.$refs.frameSingleCinema.listAuthCommCinemas()},confirmCinemaSingleDialog:function(){this.$refs.frameSingleCinema.confirmData()},handleSingleCallBack:function(e){this.innerDataSingle=e.data,this.singleCinemaVisible=e.framedialogVisible,this.$store.commit("changeCinemaData",e.data)},resetHandle:function(){var e=this;e.movieCode="",e.movieName="",e.value7=[],e.status=""},getDatas:function(e){var n=this;e&&(n.currentPage=1);var t={cinemaUid:n.innerDataSingle.id,movieCode:n.movieCode,movieName:n.movieName,dateShowFirst:n.value7?n.value7[0]:"",dateShowOff:n.value7?n.value7[1]:"",size:n.size||10,current:n.currentPage||1,status:n.status};n.$ctmList.cinemaStockList(t).then(function(e){if(e.data){var t=e.data;n.tableData=t.records,n.currentPage=t.current,n.total=t.total,n.size=t.size,n.pages=t.pages}}).catch(function(){console.log("哪里出错了，检擦一下哥哥")})},handleSizeChange:function(e){var n=this;n.size=e,console.log("每页 "+e+" 条"),n.getDatas()},handleCurrentChange:function(e){var n=this;n.currentPage=e,console.log("当前页: "+e),n.getDatas()},tableRowClassName:function(e){e.row;return e.rowIndex%2==1?"warning-row":"success-row"},handleScan:function(e,n){this.$router.push({path:"scan",query:{movieCode:n.movieCode,uid_cinema:n.uidCinema}})},handleEdit:function(e,n){this.$router.push({path:"edit",query:{movieCode:n.movieCode,uid_cinema:n.uidCinema}})},openDownloadMovie:function(){this.dialogVisible=!0},handleClose:function(e){e()},downLoadMovie:function(){var e=this,n=this,t={startDate:this.downLoadMovieTime2[0],endDate:this.downLoadMovieTime2[1],cinemaUid:"",ishead:"1"};t.cinemaUid=n.innerDataSingle.id,this.$ctmList.schbashmovieLoad(t).then(function(t){var a="success",i="同步影片成功！";200==t.code||200==t.status?(n.getDatas(),e.dialogVisible=!1):(a="error",i=t.msg),e.$message({message:i,type:a,duration:1e3,onClose:function(){}})})}},components:{frameSinglecinema:a.singleCinema},created:function(){this.isOrNotChangeCinenams()}}},559:function(e,n,t){var a=t(560);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t(157)("15011d61",a,!0,{})},560:function(e,n,t){n=e.exports=t(156)(!0),n.push([e.i,"\n.cinema-stock-wrap .chose-cinema-button .el-button {\n  width: 80px;\n  height: 32px;\n  margin-left: 0px;\n}\n.cinema-stock-wrap .chose-cinema-button .el-button--primary {\n  margin-right: 30px;\n}\n.ciniema-stock-header {\n  min-width: 1260px;\n  width: 100%;\n  padding-top: 25px;\n  padding-bottom: 25px;\n  padding-left: 24px;\n  background: #f5f5f5;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.ciniema-stock-header .search-wrap {\n    display: inline-block;\n    height: 32px;\n    margin-right: 30px;\n}\n.ciniema-stock-header .search-wrap .el-date-range-picker__content.is-left {\n      border-right: 0px;\n}\n.ciniema-stock-header .search-wrap .el-input {\n      width: 264px;\n}\n.ciniema-stock-header .search-wrap .el-range-editor .el-range-input {\n      font-size: 12px;\n}\n.ciniema-stock-header .search-wrap .el-range-editor.el-input__inner {\n      padding: 0 10px;\n}\n.ciniema-stock-header .search-wrap .el-date-editor--daterange.el-input__inner {\n      width: 264px;\n}\n.ciniema-stock-header .search-wrap .el-date-editor .el-range-separator {\n      width: 9%;\n}\n.ciniema-stock-header .search-wrap span {\n      color: #666666;\n      font-size: 12px;\n}\n.ciniema-stock-header .search-wrap .companySpan {\n      width: 62px;\n      height: 32px;\n      border-radius: 4px;\n      line-height: 32px;\n      text-align: center;\n      display: inline-block;\n      background-color: #fff;\n      color: #3b74ff;\n      vertical-align: middle;\n      border: 1px solid #3b74ff;\n      font-size: 12px;\n}\n.ciniema-stock-header .plan-size .el-input {\n    width: 160px;\n}\n.ciniema-stock-header .plan-size .el-input--suffix .el-input__inner {\n    font-size: 12px;\n}\n.ciniema-stock-header .button-wrap {\n    margin-left: 8px;\n    display: inline-block;\n    margin-top: 15px;\n}\n.ciniema-stock-header .button-wrap span {\n      font-size: 12px;\n}\n.ciniema-stock-header .button-wrap .button-reset {\n      width: 80px !important;\n      height: 32px;\n      font-size: 12px;\n}\n.el-icon-close {\n  font-size: 12px;\n}\n.block {\n  display: inline-block;\n  height: 32px;\n}\n.block .demonstration {\n    color: #666666;\n}\n.block .el-date-range-picker__content.is-left {\n    border-right: 0px;\n}\n.block .el-input {\n    width: 360px;\n}\n.block .el-range-editor .el-range-input {\n    font-size: 12px;\n}\n.block .el-range-editor.el-input__inner {\n    padding: 0 10px;\n}\n.block .el-date-editor--daterange.el-input__inner {\n    width: 256px;\n}\n.block .el-date-editor .el-range-separator {\n    width: 8%;\n    font-size: 12px;\n    color: #666666;\n}\n.block span {\n    color: #666666;\n    font-size: 12px;\n}\n.cinema-stock-table .el-table .warning-row {\n  background: #f5f5f5;\n}\n.cinema-stock-table .el-table .success-row {\n  background: #ffffff;\n}\n.cinema-stock-table .el-table tr {\n  background: #f2f4fd;\n}\n.cinema-stock-table .dialog-footer {\n  margin-left: 8px;\n  display: inline-block;\n}\n.cinema-stock-table .dialog-footer span {\n    font-size: 12px;\n}\n.cinema-stock-table .dialog-footer .button-reset {\n    width: 80px;\n    height: 32px;\n    font-size: 12px;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/ctm/src/views/movieManage/cinemaMovie/common/List.vue"],names:[],mappings:";AACA;EACE,YAAY;EACZ,aAAa;EACb,iBAAiB;CAClB;AACD;EACE,mBAAmB;CACpB;AACD;EACE,kBAAkB;EAClB,YAAY;EACZ,kBAAkB;EAClB,qBAAqB;EACrB,mBAAmB;EACnB,oBAAoB;EACpB,+BAA+B;UACvB,uBAAuB;CAChC;AACD;IACI,sBAAsB;IACtB,aAAa;IACb,mBAAmB;CACtB;AACD;MACM,kBAAkB;CACvB;AACD;MACM,aAAa;CAClB;AACD;MACM,gBAAgB;CACrB;AACD;MACM,gBAAgB;CACrB;AACD;MACM,aAAa;CAClB;AACD;MACM,UAAU;CACf;AACD;MACM,eAAe;MACf,gBAAgB;CACrB;AACD;MACM,YAAY;MACZ,aAAa;MACb,mBAAmB;MACnB,kBAAkB;MAClB,mBAAmB;MACnB,sBAAsB;MACtB,uBAAuB;MACvB,eAAe;MACf,uBAAuB;MACvB,0BAA0B;MAC1B,gBAAgB;CACrB;AACD;IACI,aAAa;CAChB;AACD;IACI,gBAAgB;CACnB;AACD;IACI,iBAAiB;IACjB,sBAAsB;IACtB,iBAAiB;CACpB;AACD;MACM,gBAAgB;CACrB;AACD;MACM,uBAAuB;MACvB,aAAa;MACb,gBAAgB;CACrB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,sBAAsB;EACtB,aAAa;CACd;AACD;IACI,eAAe;CAClB;AACD;IACI,kBAAkB;CACrB;AACD;IACI,aAAa;CAChB;AACD;IACI,gBAAgB;CACnB;AACD;IACI,gBAAgB;CACnB;AACD;IACI,aAAa;CAChB;AACD;IACI,UAAU;IACV,gBAAgB;IAChB,eAAe;CAClB;AACD;IACI,eAAe;IACf,gBAAgB;CACnB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,iBAAiB;EACjB,sBAAsB;CACvB;AACD;IACI,gBAAgB;CACnB;AACD;IACI,YAAY;IACZ,aAAa;IACb,gBAAgB;CACnB",file:"List.vue",sourcesContent:["\n.cinema-stock-wrap .chose-cinema-button .el-button {\n  width: 80px;\n  height: 32px;\n  margin-left: 0px;\n}\n.cinema-stock-wrap .chose-cinema-button .el-button--primary {\n  margin-right: 30px;\n}\n.ciniema-stock-header {\n  min-width: 1260px;\n  width: 100%;\n  padding-top: 25px;\n  padding-bottom: 25px;\n  padding-left: 24px;\n  background: #f5f5f5;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.ciniema-stock-header .search-wrap {\n    display: inline-block;\n    height: 32px;\n    margin-right: 30px;\n}\n.ciniema-stock-header .search-wrap .el-date-range-picker__content.is-left {\n      border-right: 0px;\n}\n.ciniema-stock-header .search-wrap .el-input {\n      width: 264px;\n}\n.ciniema-stock-header .search-wrap .el-range-editor .el-range-input {\n      font-size: 12px;\n}\n.ciniema-stock-header .search-wrap .el-range-editor.el-input__inner {\n      padding: 0 10px;\n}\n.ciniema-stock-header .search-wrap .el-date-editor--daterange.el-input__inner {\n      width: 264px;\n}\n.ciniema-stock-header .search-wrap .el-date-editor .el-range-separator {\n      width: 9%;\n}\n.ciniema-stock-header .search-wrap span {\n      color: #666666;\n      font-size: 12px;\n}\n.ciniema-stock-header .search-wrap .companySpan {\n      width: 62px;\n      height: 32px;\n      border-radius: 4px;\n      line-height: 32px;\n      text-align: center;\n      display: inline-block;\n      background-color: #fff;\n      color: #3b74ff;\n      vertical-align: middle;\n      border: 1px solid #3b74ff;\n      font-size: 12px;\n}\n.ciniema-stock-header .plan-size .el-input {\n    width: 160px;\n}\n.ciniema-stock-header .plan-size .el-input--suffix .el-input__inner {\n    font-size: 12px;\n}\n.ciniema-stock-header .button-wrap {\n    margin-left: 8px;\n    display: inline-block;\n    margin-top: 15px;\n}\n.ciniema-stock-header .button-wrap span {\n      font-size: 12px;\n}\n.ciniema-stock-header .button-wrap .button-reset {\n      width: 80px !important;\n      height: 32px;\n      font-size: 12px;\n}\n.el-icon-close {\n  font-size: 12px;\n}\n.block {\n  display: inline-block;\n  height: 32px;\n}\n.block .demonstration {\n    color: #666666;\n}\n.block .el-date-range-picker__content.is-left {\n    border-right: 0px;\n}\n.block .el-input {\n    width: 360px;\n}\n.block .el-range-editor .el-range-input {\n    font-size: 12px;\n}\n.block .el-range-editor.el-input__inner {\n    padding: 0 10px;\n}\n.block .el-date-editor--daterange.el-input__inner {\n    width: 256px;\n}\n.block .el-date-editor .el-range-separator {\n    width: 8%;\n    font-size: 12px;\n    color: #666666;\n}\n.block span {\n    color: #666666;\n    font-size: 12px;\n}\n.cinema-stock-table .el-table .warning-row {\n  background: #f5f5f5;\n}\n.cinema-stock-table .el-table .success-row {\n  background: #ffffff;\n}\n.cinema-stock-table .el-table tr {\n  background: #f2f4fd;\n}\n.cinema-stock-table .dialog-footer {\n  margin-left: 8px;\n  display: inline-block;\n}\n.cinema-stock-table .dialog-footer span {\n    font-size: 12px;\n}\n.cinema-stock-table .dialog-footer .button-reset {\n    width: 80px;\n    height: 32px;\n    font-size: 12px;\n}\n"],sourceRoot:""}])},561:function(e,n,t){"use strict";var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"cinema-stock-wrap"},[t("div",{staticClass:"ciniema-stock-header"},[t("div",{staticClass:"search-wrap"},[t("span",[e._v("影院名称：")]),e._v(" "),t("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.innerDataSingle.fullName,callback:function(n){e.$set(e.innerDataSingle,"fullName",n)},expression:"innerDataSingle.fullName"}}),e._v(" "),t("div",{staticClass:"companySpan",on:{click:e.chosenCinemaFun}},[e._v("\n        选择\n      ")])],1),e._v(" "),t("div",{staticClass:"search-wrap",staticStyle:{"margin-left":"0px"}},[t("span",[e._v(" 影片名称：")]),e._v(" "),t("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.movieName,callback:function(n){e.movieName=n},expression:"movieName"}})],1),e._v(" "),t("div",{staticClass:"search-wrap"},[t("span",[e._v("影片编码：")]),e._v(" "),t("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.movieCode,callback:function(n){e.movieCode=n},expression:"movieCode"}})],1),e._v(" "),t("div",{staticClass:"search-wrap"},[t("span",[e._v("公映日期：")]),e._v(" "),t("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.value7,callback:function(n){e.value7=n},expression:"value7"}})],1),e._v(" "),t("div",{staticClass:"search-wrap plan-size"},[t("span",[e._v("影片状态：")]),e._v(" "),t("el-select",{attrs:{placeholder:"请选择影片状态："},model:{value:e.status,callback:function(n){e.status=n},expression:"status"}},[t("el-option",{attrs:{label:"已下映",value:"2"}}),e._v(" "),t("el-option",{attrs:{label:"上映中",value:"3"}}),e._v(" "),t("el-option",{attrs:{label:"待上映",value:"4"}}),e._v(" "),t("el-option",{attrs:{label:"全部",value:"1"}})],1)],1),e._v(" "),t("div",{staticClass:"button-wrap"},[t("el-button",{staticClass:"button-reset",attrs:{type:"primary",size:"small"},on:{click:function(n){return e.getDatas("backPageOne")}}},[e._v("查询")])],1),e._v(" "),t("div",{staticClass:"button-wrap"},[t("el-button",{staticClass:"button-reset",attrs:{plain:""},on:{click:e.resetHandle}},[e._v("重置")])],1)]),e._v(" "),t("div",{staticClass:"ticket-price-plan-tableNew"},[t("div",{staticClass:"creat-tickPrice",staticStyle:{display:"inline-block",float:"right","margin-bottom":"12px","margin-top":"11px"}},[t("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(n){return e.openDownloadMovie()}}},[e._v("下载影片")])],1)]),e._v(" "),t("el-dialog",{attrs:{title:"下载影片",visible:e.dialogVisible,width:"448px","before-close":e.handleClose},on:{"update:visible":function(n){e.dialogVisible=n}}},[t("div",[t("div",{staticClass:"block"},[t("span",{staticClass:"demonstration",staticStyle:{"margin-bottom":"20px"}},[e._v("影片公映日期范围：")]),e._v(" "),t("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"center","value-format":"yyyy-MM-dd"},model:{value:e.downLoadMovieTime2,callback:function(n){e.downLoadMovieTime2=n},expression:"downLoadMovieTime2"}})],1)]),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.downLoadMovie}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:function(n){e.dialogVisible=!1}}},[e._v("取 消")])],1)]),e._v(" "),t("div",{staticClass:"cinema-stock-table"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.tableRowClassName}},[t("el-table-column",{attrs:{prop:"movieCode",label:"影片编码",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{prop:"movieName",label:"影片名称",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{prop:"disVersion",label:"发行版本"}}),e._v(" "),t("el-table-column",{attrs:{prop:"movieClass",label:"影片分类"}}),e._v(" "),t("el-table-column",{attrs:{label:"最低票价（元）",prop:"minPrice",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{prop:"timeLong",label:"时长（分钟）",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"datePublicShow",label:"公映日期:",width:"100"},scopedSlots:e._u([{key:"default",fn:function(n){return n.row.datePublicShow?[e._v("\n          "+e._s(n.row.datePublicShow.substr(0,10))+"\n        ")]:void 0}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{prop:"dateShowFirst",label:"首映日期",width:"100"},scopedSlots:e._u([{key:"default",fn:function(n){return n.row.dateShowFirst?[e._v("\n          "+e._s(n.row.dateShowFirst.substr(0,10))+"\n        ")]:void 0}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{prop:"dateShowOff",label:"下映日期",width:"100"},scopedSlots:e._u([{key:"default",fn:function(n){return n.row.dateShowOff?[e._v("\n          "+e._s(n.row.dateShowOff.substr(0,10))+"\n        ")]:void 0}}],null,!0)}),e._v(" "),t("el-table-column",{attrs:{label:"影片状态"},scopedSlots:e._u([{key:"default",fn:function(n){return[(new Date).getTime()<new Date(n.row.dateShowFirst).getTime()||!n.row.dateShowFirst?t("span",[e._v("待上映")]):new Date(n.row.dateShowFirst).getTime()<(new Date).getTime()&&(new Date).getTime()<new Date(e.formatDateTime(n.row.dateShowOff.substr(0,10)+" 23:59:59",0)).getTime()?t("span",[e._v("上映中")]):t("span",[e._v("已下映")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleScan(n.$index,n.row)}}},[e._v("查看")]),e._v(" "),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleEdit(n.$index,n.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),t("div",{staticClass:"page-wrap"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[15,30,45,60],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),t("frameSinglecinema",{ref:"frameSingleCinema",attrs:{framedialogVisible:e.singleCinemaVisible,whereUse:e.whereUse,type:e.cinematype,innerData:e.innerDataSingle},on:{callBackSingle:e.handleSingleCallBack}},[t("div",{staticClass:"chose-cinema-button",attrs:{slot:"footerId"},slot:"footerId"},[t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.confirmCinemaSingleDialog(),e.singleCinemaVisible=!1}}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:function(n){e.singleCinemaVisible=!1}}},[e._v("取 消")])],1)])],1)},i=[],o={render:a,staticRenderFns:i};n.a=o}});