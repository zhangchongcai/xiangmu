webpackJsonpcsm([14],{119:function(t,e,n){"use strict";var a=n(120);a.a.install=function(t){t.directive("print",a.a)},e.a=a.a},120:function(t,e,n){"use strict";var a=n(121),o=!0,s={endCallback:function(){o=!0}},i=function(t,e){return console.error('[Print warn]: Invalid prop: type check failed for prop "print".Expected '+t.join(", ")+", got "+e+"."),!1},r=function(t,e,n){var a=Object.prototype.toString.call(e.value).slice(8,-1);switch(e.rawName){case"v-print:onStart":if("Function"!==a)return i(["Function"],a);s.startCallback=e.value;break;case"v-print:onEnd":if("Function"!==a)return i(["Function"],a);s.endCallback=function(){o=!0,e.value.endCallback()};break;default:if("String"!==a)return i(["String"],a);s.el=e.value}};e.a={directiveName:"print",bind:function(t,e,n){var i=n.context;r(0,e);"v-print"===e.rawName&&t.addEventListener("click",function(t){s.el?l():window.print()});var l=function(){i.$nextTick(function(){if(o){o=!1;new a.a(s)}})}},update:function(t,e,n){r(0,e),o=!0},unbind:function(t){}}},121:function(t,e,n){"use strict";var a=n(86),o=n.n(a),s=n(122),i=n.n(s),r=n(123),l=n.n(r),c=function(){function t(e){i()(this,t),this.standards={strict:"strict",loose:"loose",html5:"html5"},this.ele=null,this.counter=0,this.settings={standard:this.standards.html5,extraHead:"",extraCss:"",popTitle:"",startCallback:function(){},endCallback:null,el:""},o()(this.settings,e),this.init()}return l()(t,[{key:"init",value:function(){this.counter++,this.settings.id="printArea_"+this.counter;var t=document.getElementById(this.settings.id);t&&t.parentNode.removeChild(t);var e=this.getPrintWindow(),n=this.getFormData(document.querySelector(this.settings.el));this.ele=n,this.settings.startCallback(this.ele),this.write(e.doc),this.print(e),this.settings.endCallback()}},{key:"print",value:function(t){var e=t.win;e.onload=function(){e.focus(),e.print()}}},{key:"write",value:function(t,e){t.open(),t.write("<html>"+this.getHead()+this.getBody()+"</html>"),t.close()}},{key:"docType",value:function(){return this.settings.standard===this.standards.html5?"<!DOCTYPE html>":'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01'+(this.settings.standard===this.standards.loose?" Transitional":"")+'//EN" "http://www.w3.org/TR/html4/'+(this.settings.standard===this.standards.loose?"loose":"strict")+'.dtd">'}},{key:"getHead",value:function(){var t="",e="",n="";this.settings.extraHead&&this.settings.extraHead.replace(/([^,]+)/g,function(e){t+=e}),document.querySelectorAll("link").forEach(function(t,n){t.href.indexOf(".css")>=0&&(e+='<link type="text/css" rel="stylesheet" href="'+t.href+'" >')});for(var a=0;a<document.getElementsByTagName("style").length;a++)try{n+=document.getElementsByTagName("style")[a].outerHTML||""}catch(t){}return this.settings.extraCss&&this.settings.extraCss.replace(/([^,\s]+)/g,function(t){e+='<link type="text/css" rel="stylesheet" href="'+t+'">'}),"<head><title>"+this.settings.popTitle+"</title>"+t+e+n+"</head>"}},{key:"getBody",value:function(){return"<body>"+this.ele.outerHTML+"</body>"}},{key:"getFormData",value:function(t){var e=t.cloneNode(!0),n=e.querySelectorAll("input,select,textarea");return n.forEach(function(t,e){var a=t.getAttribute("type"),o=n[e];void 0===a&&(a="SELECT"===t.tagName?"select":"TEXTAREA"===t.tagName?"textarea":""),"radio"===a||"checkbox"===a?o.setAttribute("checked",t.checked):"text"===a||""===a?(o.value=t.value,o.setAttribute("value",t.value)):"select"===a?o.querySelectorAll("option").forEach(function(t,e){t.selected&&t.setAttribute("selected",!0)}):"textarea"===a&&(o.value=t.value,o.setAttribute("value",t.value),o.innerHTML=t.value)}),e}},{key:"getPrintWindow",value:function(){var t=this.Iframe();return{win:t.contentWindow||t,doc:t.doc}}},{key:"Iframe",value:function(){var t=this.settings.id,e=void 0;try{e=document.createElement("iframe"),document.body.appendChild(e),e.style.border="0px",e.style.position="absolute",e.style.width="0px",e.style.height="0px",e.style.right="0px",e.style.top="0px",e.setAttribute("id",t),e.setAttribute("src",(new Date).getTime()),e.doc=null,e.doc=e.contentDocument?e.contentDocument:e.contentWindow?e.contentWindow.document:e.document}catch(t){throw new Error(t+". iframes may not be supported in this browser.")}if(null==e.doc)throw new Error("Cannot find document.");return e}}]),t}();e.a=c},122:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},123:function(t,e,n){"use strict";e.__esModule=!0;var a=n(97),o=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,o.default)(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}()},181:function(t,e,n){"use strict";var a=n(86),o=n.n(a),s=n(119),i=n(53);n.n(i);Vue.use(s.a),e.a={data:function(){return{totalData:{saleBillPayFlowVo:{}},getThings:[],ticketCycles:[],ticketSales:[],baseURL:this.$store.state.default.apiConfig.baseURL}},methods:{cancelFun:function(){console.log(111)},clearDetail:function(){var t=this,e={workTimeUid:this.$route.query.uid};this.$csmList.clearDetail(o()({},e)).then(function(e){e&&200===e.code&&(t.totalData=e.data,console.log(t.totalData.saleBillPayFlowVo),t.totalData.saleBillPayFlowVo?t.isCanSee=!0:t.totalData.saleBillPayFlowVo={},t.getThings=e.data.timeGetThings,t.getThings.forEach(function(t){if(null===t.retThingCount)return void(t.sellCount=null);t.sellCount=Number(t.thingCount)-Number(t.retThingCount)}))})},exportThis:function(){var t=this,e={uid:this.$route.query.uid},n=this.baseURL+"/trade/workTime/exportExcel";console.log(this.baseURL);var a={"Cpm-User-Token":sessionStorage.getItem("token")};this.axios(n,{headers:a,method:"post",responseType:"blob",data:e}).then(function(e){console.log(e);var n=e.headers,a=e.msg?e.msg:"班次收银导出失败！";if(n){"success",a="班次收银导出成功！";var o=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"}),s=t.totalData.timeCode,i=document.createElement("a");i.download=s,i.style.display="none",i.href=URL.createObjectURL(o),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}t.$message({message:a})})}},created:function(){this.clearDetail()}}},260:function(t,e,n){var a=n(261);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(52)("71b4923e",a,!0,{})},261:function(t,e,n){e=t.exports=n(51)(!0),e.push([t.i,"\n.printContent .pText[data-v-4f7aca5c] {\n  width: 100%;\n  border-bottom: 1px solid #e5e5e5;\n  margin-bottom: 16px;\n}\n.printContent .bigText[data-v-4f7aca5c] {\n  font-size: 24px;\n  line-height: 48px;\n}\n.printContent .middleText[data-v-4f7aca5c] {\n  font-size: 16px;\n  line-height: 32px;\n  margin-top: 16px;\n}\n.printContent span[data-v-4f7aca5c] {\n  font-size: 12px;\n  color: #666;\n  line-height: 24px;\n}\n.printContent .nameSpan[data-v-4f7aca5c] {\n  margin-top: 80px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.printContent .nameSpan strong[data-v-4f7aca5c] {\n    margin: 0 1em;\n}\n.printContent .nameSpan .line[data-v-4f7aca5c] {\n    margin-top: 16px;\n    display: block;\n    width: 100px;\n    height: 1px;\n    border-bottom: 1px solid #333;\n}\n.btn-area[data-v-4f7aca5c] {\n  margin: 36px 0 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.btn-area .el-button[data-v-4f7aca5c] {\n    padding: 9px 27px;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/csm/src/views/finance/workTime/clearAccount/export.vue"],names:[],mappings:";AACA;EACE,YAAY;EACZ,iCAAiC;EACjC,oBAAoB;CACrB;AACD;EACE,gBAAgB;EAChB,kBAAkB;CACnB;AACD;EACE,gBAAgB;EAChB,kBAAkB;EAClB,iBAAiB;CAClB;AACD;EACE,gBAAgB;EAChB,YAAY;EACZ,kBAAkB;CACnB;AACD;EACE,iBAAiB;EACjB,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,yBAAyB;MACrB,sBAAsB;UAClB,wBAAwB;CACjC;AACD;IACI,cAAc;CACjB;AACD;IACI,iBAAiB;IACjB,eAAe;IACf,aAAa;IACb,YAAY;IACZ,8BAA8B;CACjC;AACD;EACE,iBAAiB;EACjB,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,yBAAyB;MACrB,sBAAsB;UAClB,wBAAwB;CACjC;AACD;IACI,kBAAkB;CACrB",file:"export.vue",sourcesContent:["\n.printContent .pText[data-v-4f7aca5c] {\n  width: 100%;\n  border-bottom: 1px solid #e5e5e5;\n  margin-bottom: 16px;\n}\n.printContent .bigText[data-v-4f7aca5c] {\n  font-size: 24px;\n  line-height: 48px;\n}\n.printContent .middleText[data-v-4f7aca5c] {\n  font-size: 16px;\n  line-height: 32px;\n  margin-top: 16px;\n}\n.printContent span[data-v-4f7aca5c] {\n  font-size: 12px;\n  color: #666;\n  line-height: 24px;\n}\n.printContent .nameSpan[data-v-4f7aca5c] {\n  margin-top: 80px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.printContent .nameSpan strong[data-v-4f7aca5c] {\n    margin: 0 1em;\n}\n.printContent .nameSpan .line[data-v-4f7aca5c] {\n    margin-top: 16px;\n    display: block;\n    width: 100px;\n    height: 1px;\n    border-bottom: 1px solid #333;\n}\n.btn-area[data-v-4f7aca5c] {\n  margin: 36px 0 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.btn-area .el-button[data-v-4f7aca5c] {\n    padding: 9px 27px;\n}\n"],sourceRoot:""}])},262:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"print",staticClass:"printContent",attrs:{id:"wrap"}},[n("div",[n("p",{staticClass:"bigText pText"},[t._v("清机登记表")]),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("div",{},[n("span",[t._v("班次起始及结束时间")]),t._v(" "),n("span",[t._v(t._s(t.totalData.workStartTime)+" - "+t._s(t.totalData.workEndTime))])])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("div",{},[n("span",[t._v("统计时间：")]),t._v(" "),n("span",[t._v(t._s(t.totalData.workStartTime)+" - "+t._s(t.totalData.workEndTime))])])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("div",{},[n("span",[t._v("收银员：")]),t._v(" "),n("span",[t._v(" "+t._s(t.totalData.workerName)+" ")])])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("div",{},[n("span",[t._v("备用金：")]),t._v(" "),n("span",[t._v(" "+t._s(Number(t.totalData.preAmount).toFixed(2))+"元")])])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("div",{},[n("span",[t._v("制单人：")]),t._v(" "),n("span",[t._v(" "+t._s(t.totalData.createUserName))])])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("div",{},[n("span",[t._v(" 清机人：")]),t._v(" "),n("span",[t._v(" "+t._s(t.totalData.updateUserName))])])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("div",{},[n("span",[t._v(" 单据编号：")]),t._v(" "),n("span",[t._v(" "+t._s(t.totalData.timeCode))])])])],1)],1),t._v(" "),n("div",[n("p",{staticClass:"middleText pText"},[t._v("班次收银统计")]),t._v(" "),n("strong",[t._v("实收金额：")]),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:5}},[n("div",{},[n("span",[t._v("现金：")]),t._v(" "),n("span",[t._v(t._s(Number(t.totalData.realXrmbAmount).toFixed(2))+"元")])])]),t._v(" "),n("el-col",{attrs:{span:5}},[n("div",{},[n("span",[t._v("银行卡：")]),t._v(" "),n("span",[t._v(" "+t._s(Number(t.totalData.bandCardTotal).toFixed(2))+"元 ")])])]),t._v(" "),n("el-col",{attrs:{span:4}},[n("div",{},[n("span",[t._v("其他支付：")]),t._v(" "),n("span",[t._v(t._s(Number(t.totalData.amountWithoutXrmbAndBandCard).toFixed(2))+"元")])])]),t._v(" "),n("el-col",{attrs:{span:5}},[n("div",{},[n("span",[t._v("资金收入调整：")]),t._v(" "),n("span",[t._v(t._s(Number(t.totalData.fundChangeAmount).toFixed(2))+"元")])])]),t._v(" "),n("el-col",{attrs:{span:5}},[n("div",{},[n("span",[t._v(" 合计：")]),t._v(" "),n("span",[t._v(" "+t._s(Number(t.totalData.realAmount).toFixed(2))+"元")])])])],1),t._v(" "),n("strong",[t._v("应收金额：")]),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:5}},[n("div",{},[n("span",[t._v("现金：")]),t._v(" "),n("span",[t._v(t._s(Number(t.totalData.saleBillPayFlowVo.xrmbAmount).toFixed(2))+"元")])])]),t._v(" "),n("el-col",{attrs:{span:5}},[n("div",{},[n("span",[t._v("银行卡：")]),t._v(" "),n("span",[t._v(" "+t._s(Number(t.totalData.saleBillPayFlowVo.xunpAmount).toFixed(2))+"元 ")])])]),t._v(" "),n("el-col",{attrs:{span:4}},[n("div",{},[n("span",[t._v("其他支付：")]),t._v(" "),n("span",[t._v(t._s(Number(t.totalData.amountWithoutXrmbAndBandCard).toFixed(2))+"元")])])]),t._v(" "),n("el-col",{attrs:{span:5,offset:5}},[n("div",{},[n("span",[t._v("合计：")]),t._v(" "),n("span",[t._v(t._s(Number(t.totalData.shouldAmount).toFixed(2))+" 元")])])])],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:5,offset:19}},[n("div",{},[n("span",{staticStyle:{color:"red"}},[t._v(" 差额：")]),t._v(" "),n("span",{staticStyle:{color:"red"}},[t._v(t._s(Number(t.totalData.realAmount-Number(t.totalData.shouldAmount)).toFixed(2))+"\n              元")])])])],1),t._v(" "),n("strong",[t._v("其中：")]),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:8}},[n("div",{},[n("span",[t._v("票房收入合计金额：")]),t._v(" "),n("span",[t._v(t._s(Number(t.totalData.movieTicketAmount).toFixed(2))+"元")])])]),t._v(" "),n("el-col",{attrs:{span:8}},[n("div",{},[n("span",[t._v("合计数量：")]),t._v(" "),n("span",[t._v(" "+t._s(Number(t.totalData.movieTicketNum))+"张")])])]),t._v(" "),n("el-col",{attrs:{span:8}},[n("div",{},[n("span",[t._v("卖品收入合计金额：")]),t._v(" "),n("span",[t._v(t._s(Number(t.totalData.merAmount).toFixed(2))+"元")])])]),t._v(" "),n("el-col",{attrs:{span:8}},[n("div",{},[n("span",[t._v("会员开卡卡费金额合计：")]),t._v(" "),n("span",[t._v(" "+t._s(Number(t.totalData.memberRegAmount).toFixed(2))+"元 ")])])]),t._v(" "),n("el-col",{attrs:{span:8}},[n("div",{},[n("span",[t._v("会员充值金额合计：")]),t._v(" "),n("span",[t._v(t._s(Number(t.totalData.memberAllRechangeAmount).toFixed(2))+"元")])])])],1)],1),t._v(" "),n("div",[n("p",{staticClass:"middleText pText"},[t._v("领用记录")]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},style:{height:t.getThings.length?"auto":"100px"},attrs:{data:t.getThings}},[n("el-table-column",{attrs:{prop:"thingName",label:"领用物品",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"thingCount",label:"领用数量",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"retThingCount",label:"退还数量"}}),t._v(" "),n("el-table-column",{attrs:{prop:"sellCount",label:"售出数量"}}),t._v(" "),n("el-table-column",{attrs:{prop:"remark",label:"备注"}})],1)],1),t._v(" "),n("div",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("div",{},[n("p",{staticClass:"middleText pText"},[t._v("票券回收明细")]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},style:{height:t.ticketCycles.length?"auto":"100px"},attrs:{data:t.ticketCycles}},[n("el-table-column",{attrs:{prop:"getGoodsName",label:"票券名称",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"getTotalNum",label:"回收数量",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"getTotalAmount",label:"抵用金额（元）"}})],1)],1)]),t._v(" "),n("el-col",{attrs:{span:12}},[n("div",{},[n("p",{staticClass:"middleText pText"},[t._v("票券销售明细")]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},style:{height:t.ticketSales.length?"auto":"100px"},attrs:{data:t.ticketSales}},[n("el-table-column",{attrs:{prop:"getGoodsName",label:"票券名称",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"getTotalNum",label:"销售数量",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"getTotalAmount",label:"销售金额（元）"}})],1)],1)])],1)],1),t._v(" "),t._m(0)]),t._v(" "),n("div",{staticClass:"bottom-handler-tool"},[n("div",{staticClass:"btn-area"},[n("el-button",{attrs:{type:"primary"},on:{click:t.exportThis}},[t._v("导出")]),t._v(" "),n("el-button",{on:{click:function(e){return t.$router.push("list")}}},[t._v("取消")])],1)])])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nameSpan"},[n("strong",[t._v("收银员:")]),t._v(" "),n("div",{staticClass:"line"}),t._v(" "),n("strong",[t._v("制单人:")]),t._v(" "),n("div",{staticClass:"line"})])}],s={render:a,staticRenderFns:o};e.a=s},62:function(t,e,n){"use strict";function a(t){n(260)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(181),s=n(262),i=n(4),r=a,l=i(o.a,s.a,!1,r,"data-v-4f7aca5c",null);e.default=l.exports},85:function(t,e,n){var a=n(13);t.exports=function(t){return Object(a(t))}},86:function(t,e,n){t.exports={default:n(89),__esModule:!0}},88:function(t,e){e.f={}.propertyIsEnumerable},89:function(t,e,n){n(90),t.exports=n(1).Object.assign},90:function(t,e,n){var a=n(12);a(a.S+a.F,"Object",{assign:n(91)})},91:function(t,e,n){"use strict";var a=n(0),o=n(14),s=n(92),i=n(88),r=n(85),l=n(15),c=Object.assign;t.exports=!c||n(5)(function(){var t={},e={},n=Symbol(),a="abcdefghijklmnopqrst";return t[n]=7,a.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=a})?function(t,e){for(var n=r(t),c=arguments.length,u=1,d=s.f,p=i.f;c>u;)for(var v,m=l(arguments[u++]),f=d?o(m).concat(d(m)):o(m),h=f.length,_=0;h>_;)v=f[_++],a&&!p.call(m,v)||(n[v]=m[v]);return n}:c},92:function(t,e){e.f=Object.getOwnPropertySymbols},97:function(t,e,n){t.exports={default:n(98),__esModule:!0}},98:function(t,e,n){n(99);var a=n(1).Object;t.exports=function(t,e,n){return a.defineProperty(t,e,n)}},99:function(t,e,n){var a=n(12);a(a.S+a.F*!n(0),"Object",{defineProperty:n(6).f})}});