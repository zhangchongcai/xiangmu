webpackJsonpcsm([27],{198:function(e,n,a){"use strict";var i=requireModule("base"),t=i.singleCinema;n.a={name:"CinemaView",components:{singleCinema:t},data:function(){return{singleCinemaVisible:!1,singleCinemaType:2,innerData:{id:""},cinemaName:"",defFg:"",payMode:"",isDetail:!1,rules:{payTypeName:[{required:!0,message:"请输入支付方式名称",trigger:"blur"}],status:[{required:!0,message:"请选择使用状态",trigger:"change"}]},addForm:{payTypeCode:"",payTypeName:"",status:1},formLabelWidth:"120px",dialogVisible:!1,tableData:[],statusOptions:[{keyCode:1,keyName:"启用"},{keyCode:0,keyName:"停用"}],total:0,formData:{cinemaUids:"",code:"",name:"",status:"",pageSize:20,current:1}}},methods:{callBackSingle:function(e){this.singleCinemaVisible=e.framedialogVisible,e.isCloseWindow||(console.log(e,"-----\x3e data"),this.formData.cinemaUids=e.data.id,this.cinemaName=e.data.name,this.cinemaName=this.cinemaName.length>10?this.cinemaName.substring(0,9)+"...":this.cinemaName,this.innerData.id=e.data.id,this.search())},getCinemaPayType:function(e){var n=this;this.$csmList.getCinemaPayType({code:e,cinemaUid:this.formData.cinemaUids}).then(function(e){console.log(e),200===e.code?(n.addForm.payTypeCode=e.data.payTypeCode,n.addForm.payTypeName=e.data.payTypeName,n.addForm.status=e.data.status,n.defFg=e.data.defFg,n.payMode=e.data.payMode,n.isDetail=!0,n.dialogVisible=!0):n.error(e.msg)})},updatePayTypeShowFlag:function(e,n){var a=this;this.$csmList.updatePayTypeShowFlag({showFlag:e,code:n,cinemaUid:this.formData.cinemaUids}).then(function(e){console.log(e),200===e.code?(a.success(e.msg),a.search()):a.error(e.msg)})},updatePayTypeStatus:function(e,n){var a=this;this.$csmList.updatePayTypeStatus({code:n,status:e,cinemaUid:this.formData.cinemaUids}).then(function(e){console.log(e),200===e.code?(a.success(e.msg),a.search()):a.error(e.msg)})},deletePayType:function(e){var n=this;this.$confirm("此操作将永久删除该支付方式, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.$csmList.deletePayType({uid:e}).then(function(e){console.log(e),200===e.code?(n.success("删除成功！"),n.search()):n.error(e.msg)})}).catch(function(){})},savePayType:function(e){var n=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;n.$csmList.savePayType(n.addForm).then(function(a){console.log(a),200===a.code?(n.dialogVisible=!1,n.success("保存成功！"),n.$refs[e].resetFields(),n.search()):n.error(a.msg)})})},pullPayTypeToCinema:function(){var e=this;this.$csmList.pullPayTypeToCinema({cinemaUid:this.formData.cinemaUids}).then(function(n){console.log(n),200===n.code?(e.success("同步成功！"),e.search()):e.error(n.msg)})},search:function(){var e=this;this.$csmList.findPayTypeCinema(this.formData).then(function(n){console.log(n),200===n.code?(e.tableData=n.data.list,e.total=n.data.total):e.error(n.msg)})},getUserInfo:function(){var e=this;this.$csmList.getCtmUserInfo().then(function(n){console.log(n),200===n.code?(e.cinemaName=n.data.cinemaName,e.formData.cinemaUids=n.data.cinemaUid,e.innerData.id=Number(n.data.cinemaUid),e.search()):e.error(n.msg)})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.formData.size=e,this.search()},handleCurrentChange:function(e){console.log("当前页: "+e),this.formData.current=e,this.search()}},mounted:function(){this.getUserInfo()}}},314:function(e,n,a){var i=a(315);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(52)("7df955fe",i,!0,{})},315:function(e,n,a){n=e.exports=a(51)(!0),n.push([e.i,"\n.cinemaView .single-cinema-btn .el-button {\n  padding: 8px 16px;\n  min-width: 80px;\n  height: 32px;\n}\n.cinemaView .single-cinema-btn .el-button + .el-button {\n  margin-left: 30px;\n}\n.cinemaView .normal-btn {\n  min-width: 80px;\n  height: 32px;\n  border: 1px solid #3b74ff;\n  border-radius: 4px;\n  padding: 8px 16px;\n  background: #fff;\n}\n.cinemaView .normal-btn span {\n    font-size: 12px;\n    color: #3b74ff;\n}\n.cinemaView .normal-dialog .el-dialog__header {\n  padding: 20px 0;\n  margin: 0 20px;\n  border-bottom: 1px solid #e5e5e5;\n}\n.cinemaView .normal-dialog .el-dialog__header .el-dialog__title {\n    color: #333;\n}\n.cinemaView .normal-dialog .el-dialog__body {\n  border-bottom: 1px solid #e5e5e5;\n}\n.cinemaView .normal-dialog .el-dialog__body .el-form-item {\n    margin-bottom: 16px;\n}\n.cinemaView .normal-dialog .el-dialog__body .el-form-item .el-form-item__label,\n    .cinemaView .normal-dialog .el-dialog__body .el-form-item .el-range-input,\n    .cinemaView .normal-dialog .el-dialog__body .el-form-item span {\n      color: #666;\n      font-size: 12px;\n}\n.cinemaView .normal-dialog .el-dialog__body .el-form-item .el-icon-date,\n    .cinemaView .normal-dialog .el-dialog__body .el-form-item .el-range__close-icon {\n      display: none;\n}\n.cinemaView .normal-dialog .el-dialog__body .el-form-item .el-checkbox-group .el-checkbox {\n      width: 33%;\n      margin-right: 0;\n}\n.cinemaView .el-dialog__footer {\n  /*padding: 0 20px 12px;*/\n}\n.cinemaView .el-dialog__footer .el-button {\n    padding: 8px 16px;\n    min-width: 80px;\n    height: 32px;\n}\n.cinemaView .el-dialog__footer .el-button + .el-button {\n    margin-left: 30px;\n}\n.cinemaView .search-form {\n  background: #f5f5f5;\n  padding: 24px 24px 6px 24px;\n}\n.cinemaView .search-form .el-form-item {\n    margin-right: 32px;\n}\n.cinemaView .search-form .el-form-item .el-form-item__label,\n    .cinemaView .search-form .el-form-item .el-input {\n      font-size: 12px;\n      color: #666;\n}\n.cinemaView .search-form .el-form-item .readonly-input {\n      width: 192px;\n      margin-right: 8px;\n}\n.cinemaView .search-form .el-form-item .readonly-input .el-input__inner {\n        background: #f5f5f5;\n}\n.cinemaView .search-form .el-form-item .el-button + .el-button {\n      margin-left: 8px;\n}\n.cinemaView .search-form .el-icon-arrow-left,\n  .cinemaView .search-form .el-icon-arrow-right {\n    cursor: pointer;\n}\n.cinemaView .search-form .el-icon-date,\n  .cinemaView .search-form .el-range__close-icon {\n    display: none;\n}\n.cinemaView .search-form .month {\n    width: 140px;\n}\n.cinemaView .search-form .month .el-input__inner {\n      text-align: center;\n}\n.cinemaView .search-form .month .el-input__prefix {\n      display: none;\n}\n.cinemaView .el-table .el-button {\n  padding: 0;\n}\n.cinemaView .el-table .el-button span {\n    font-size: 12px;\n}\n.cinemaView .el-table .el-button + .el-button {\n  margin-left: 0;\n}\n.cinemaView .el-row-btns {\n  padding: 8px 0;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/csm/src/views/paymentManage/CinemaView.vue"],names:[],mappings:";AACA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,aAAa;CACd;AACD;EACE,kBAAkB;CACnB;AACD;EACE,gBAAgB;EAChB,aAAa;EACb,0BAA0B;EAC1B,mBAAmB;EACnB,kBAAkB;EAClB,iBAAiB;CAClB;AACD;IACI,gBAAgB;IAChB,eAAe;CAClB;AACD;EACE,gBAAgB;EAChB,eAAe;EACf,iCAAiC;CAClC;AACD;IACI,YAAY;CACf;AACD;EACE,iCAAiC;CAClC;AACD;IACI,oBAAoB;CACvB;AACD;;;MAGM,YAAY;MACZ,gBAAgB;CACrB;AACD;;MAEM,cAAc;CACnB;AACD;MACM,WAAW;MACX,gBAAgB;CACrB;AACD;EACE,yBAAyB;CAC1B;AACD;IACI,kBAAkB;IAClB,gBAAgB;IAChB,aAAa;CAChB;AACD;IACI,kBAAkB;CACrB;AACD;EACE,oBAAoB;EACpB,4BAA4B;CAC7B;AACD;IACI,mBAAmB;CACtB;AACD;;MAEM,gBAAgB;MAChB,YAAY;CACjB;AACD;MACM,aAAa;MACb,kBAAkB;CACvB;AACD;QACQ,oBAAoB;CAC3B;AACD;MACM,iBAAiB;CACtB;AACD;;IAEI,gBAAgB;CACnB;AACD;;IAEI,cAAc;CACjB;AACD;IACI,aAAa;CAChB;AACD;MACM,mBAAmB;CACxB;AACD;MACM,cAAc;CACnB;AACD;EACE,WAAW;CACZ;AACD;IACI,gBAAgB;CACnB;AACD;EACE,eAAe;CAChB;AACD;EACE,eAAe;CAChB",file:"CinemaView.vue",sourcesContent:["\n.cinemaView .single-cinema-btn .el-button {\n  padding: 8px 16px;\n  min-width: 80px;\n  height: 32px;\n}\n.cinemaView .single-cinema-btn .el-button + .el-button {\n  margin-left: 30px;\n}\n.cinemaView .normal-btn {\n  min-width: 80px;\n  height: 32px;\n  border: 1px solid #3b74ff;\n  border-radius: 4px;\n  padding: 8px 16px;\n  background: #fff;\n}\n.cinemaView .normal-btn span {\n    font-size: 12px;\n    color: #3b74ff;\n}\n.cinemaView .normal-dialog .el-dialog__header {\n  padding: 20px 0;\n  margin: 0 20px;\n  border-bottom: 1px solid #e5e5e5;\n}\n.cinemaView .normal-dialog .el-dialog__header .el-dialog__title {\n    color: #333;\n}\n.cinemaView .normal-dialog .el-dialog__body {\n  border-bottom: 1px solid #e5e5e5;\n}\n.cinemaView .normal-dialog .el-dialog__body .el-form-item {\n    margin-bottom: 16px;\n}\n.cinemaView .normal-dialog .el-dialog__body .el-form-item .el-form-item__label,\n    .cinemaView .normal-dialog .el-dialog__body .el-form-item .el-range-input,\n    .cinemaView .normal-dialog .el-dialog__body .el-form-item span {\n      color: #666;\n      font-size: 12px;\n}\n.cinemaView .normal-dialog .el-dialog__body .el-form-item .el-icon-date,\n    .cinemaView .normal-dialog .el-dialog__body .el-form-item .el-range__close-icon {\n      display: none;\n}\n.cinemaView .normal-dialog .el-dialog__body .el-form-item .el-checkbox-group .el-checkbox {\n      width: 33%;\n      margin-right: 0;\n}\n.cinemaView .el-dialog__footer {\n  /*padding: 0 20px 12px;*/\n}\n.cinemaView .el-dialog__footer .el-button {\n    padding: 8px 16px;\n    min-width: 80px;\n    height: 32px;\n}\n.cinemaView .el-dialog__footer .el-button + .el-button {\n    margin-left: 30px;\n}\n.cinemaView .search-form {\n  background: #f5f5f5;\n  padding: 24px 24px 6px 24px;\n}\n.cinemaView .search-form .el-form-item {\n    margin-right: 32px;\n}\n.cinemaView .search-form .el-form-item .el-form-item__label,\n    .cinemaView .search-form .el-form-item .el-input {\n      font-size: 12px;\n      color: #666;\n}\n.cinemaView .search-form .el-form-item .readonly-input {\n      width: 192px;\n      margin-right: 8px;\n}\n.cinemaView .search-form .el-form-item .readonly-input .el-input__inner {\n        background: #f5f5f5;\n}\n.cinemaView .search-form .el-form-item .el-button + .el-button {\n      margin-left: 8px;\n}\n.cinemaView .search-form .el-icon-arrow-left,\n  .cinemaView .search-form .el-icon-arrow-right {\n    cursor: pointer;\n}\n.cinemaView .search-form .el-icon-date,\n  .cinemaView .search-form .el-range__close-icon {\n    display: none;\n}\n.cinemaView .search-form .month {\n    width: 140px;\n}\n.cinemaView .search-form .month .el-input__inner {\n      text-align: center;\n}\n.cinemaView .search-form .month .el-input__prefix {\n      display: none;\n}\n.cinemaView .el-table .el-button {\n  padding: 0;\n}\n.cinemaView .el-table .el-button span {\n    font-size: 12px;\n}\n.cinemaView .el-table .el-button + .el-button {\n  margin-left: 0;\n}\n.cinemaView .el-row-btns {\n  padding: 8px 0;\n}\n"],sourceRoot:""}])},316:function(e,n,a){"use strict";var i=function(){var e=this,n=e.$createElement,a=e._self._c||n;return a("section",{staticClass:"cinemaView"},[a("singleCinema",{ref:"frameSingleCinema",attrs:{framedialogVisible:e.singleCinemaVisible,type:e.singleCinemaType,innerData:e.innerData},on:{"update:framedialogVisible":function(n){e.singleCinemaVisible=n},"update:framedialog-visible":function(n){e.singleCinemaVisible=n},callBackSingle:e.callBackSingle}},[a("div",{staticClass:"single-cinema-btn",attrs:{slot:"footerId"},slot:"footerId"},[a("el-button",{attrs:{type:"primary"},on:{click:function(n){e.$refs.frameSingleCinema.confirmData(),e.singleCinemaVisible=!1}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(n){e.singleCinemaVisible=!1}}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{staticClass:"normal-dialog",attrs:{title:e.isDetail?"支付方式详情":"新增支付方式",visible:e.dialogVisible},on:{"update:visible":function(n){e.dialogVisible=n}}},[a("el-form",{ref:"addForm",staticStyle:{width:"400px"},attrs:{model:e.addForm,rules:e.rules,"label-width":e.formLabelWidth}},[a("el-form-item",{attrs:{label:"支付方式编码："}},[a("span",[e._v(e._s(e.addForm.payTypeCode))])]),e._v(" "),a("el-form-item",{attrs:{label:"支付方式名称：",prop:"payTypeName"}},[e.isDetail?a("span",[e._v(e._s(e.addForm.payTypeName))]):a("el-input",{model:{value:e.addForm.payTypeName,callback:function(n){e.$set(e.addForm,"payTypeName",n)},expression:"addForm.payTypeName"}})],1),e._v(" "),e.isDetail?a("el-form-item",{attrs:{label:"支付类型："}},[e.defFg?a("span",[e._v("\n          自定义支付方式-"+e._s(1===e.payMode?"普通":2===e.payMode?"微信":"支付宝")+"\n        ")]):a("span",[e._v("默认支付方式")])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"使用状态：",prop:"status"}},[a("el-radio",{attrs:{disabled:e.isDetail,label:1},model:{value:e.addForm.status,callback:function(n){e.$set(e.addForm,"status",n)},expression:"addForm.status"}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{disabled:e.isDetail,label:0},model:{value:e.addForm.status,callback:function(n){e.$set(e.addForm,"status",n)},expression:"addForm.status"}},[e._v("停用")])],1)],1),e._v(" "),e.isDetail?e._e():a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.savePayType("addForm")}}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(n){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-form",{staticClass:"demo-form-inline search-form",attrs:{inline:!0,model:e.formData,size:"small"}},[a("el-form-item",{attrs:{label:"支付方式编码："}},[a("el-input",{attrs:{placeholder:"请输入支付方式编码",clearable:""},model:{value:e.formData.code,callback:function(n){e.$set(e.formData,"code",n)},expression:"formData.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付方式名称："}},[a("el-input",{attrs:{placeholder:"请输入支付方式名称",clearable:""},model:{value:e.formData.name,callback:function(n){e.$set(e.formData,"name",n)},expression:"formData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"使用状态："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.status,callback:function(n){e.$set(e.formData,"status",n)},expression:"formData.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.statusOptions,function(e){return a("el-option",{key:e.keyCode,attrs:{label:e.keyName,value:e.keyCode}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"适用影院："}},[a("el-input",{staticClass:"readonly-input",attrs:{readonly:""},model:{value:e.cinemaName,callback:function(n){e.cinemaName=n},expression:"cinemaName"}}),e._v(" "),a("el-button",{staticClass:"normal-btn",on:{click:function(n){e.singleCinemaVisible=!0,e.$refs.frameSingleCinema.listAuthCommCinemas()}}},[e._v("选择")])],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{width:"80px",height:"32px"},attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1),e._v(" "),a("div",{staticClass:"el-row-btns clearfix"},[a("el-button",{staticClass:"normal-btn",staticStyle:{float:"right",padding:"8px 16px",width:"auto"},attrs:{size:"small"},on:{click:e.pullPayTypeToCinema}},[e._v("同步总部数据")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payTypeCode",label:"支付方式编码","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"payTypeName",label:"支付方式名称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"defFg",label:"支付类型","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.defFg?a("span",[e._v("\n          自定义支付方式-"+e._s(1===n.row.payMode?"普通":2===n.row.payMode?"微信":3===n.row.payMode?"支付宝":"")+"\n        ")]):a("span",[e._v("默认支付方式")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"pos端是否显示","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.showFlag?a("span",[e._v("显示")]):a("span",[e._v("不显示")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"使用状态",width:"120","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.status?a("span",[e._v("启用")]):a("span",[e._v("停用")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"260",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(n){return[a("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.getCinemaPayType(n.row.payTypeCode)}}},[e._v("查看")]),e._v(" "),a("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.updatePayTypeShowFlag(0===n.row.showFlag?1:0,n.row.payTypeCode)}}},[e._v(e._s(n.row.showFlag?"隐藏":"显示"))]),e._v(" "),a("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.updatePayTypeStatus(0===n.row.status?1:0,n.row.payTypeCode)}}},[e._v(e._s(n.row.status?"停用":"启用"))])]}}])})],1),e._v(" "),a("div",{staticClass:"page-wrap"},[a("el-pagination",{attrs:{background:"","current-page":e.formData.current,"page-sizes":[20,40,60,80],"page-size":e.formData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},t=[],o={render:i,staticRenderFns:t};n.a=o},76:function(e,n,a){"use strict";function i(e){a(314)}Object.defineProperty(n,"__esModule",{value:!0});var t=a(198),o=a(316),l=a(4),r=i,s=l(t.a,o.a,!1,r,null,null);n.default=s.exports}});