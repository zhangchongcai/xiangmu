webpackJsonpccm([18],{138:function(e,a,n){"use strict";function t(e){n(347)}Object.defineProperty(a,"__esModule",{value:!0});var o=n(283),i=n(349),l=n(3),s=t,c=l(o.a,i.a,!1,s,"data-v-a76e7dc4",null);a.default=c.exports},283:function(e,a,n){"use strict";var t=n(30),o=n.n(t),i=n(57),l=n(32);n.n(l);a.a={components:{searchLan:i.a},mixins:[l.cacheMixin.cacheMixin],data:function(){return{cacheField:["searchConfig","pageConfig","tableConfig","searchInfo"],dialogVisible:!1,abandonCope:"",searchInfo:[{label:"总票券数量",key:"totalCount",value:0},{label:"激活状态",key:"actCount",value:0},{label:"已消费",key:"consumeCount",value:0},{label:"已退货",key:"refundCount",value:0},{label:"已停用",key:"stopCount",value:0},{label:"已作废",key:"cancelCount",value:0},{label:"已过期",key:"expireCount",value:0}],modelName:"searchNumber",searchConfig:[{keyName:"applyCode",name:"销售申请单号",type:"input",value:""},{keyName:"couponCode",name:"票券编号",type:"input",value:""},{keyName:"status",name:"票券状态",type:"select",value:"",options:[{label:"全部",value:""},{label:"激活",value:"1"},{label:"已消费",value:"2"},{label:"已退货",value:"3"},{label:"已停用",value:"4"},{label:"已作废",value:"6"},{label:"已过期",value:"7"}]},{keyName:"contractCode",name:"合同协议号",type:"input",value:""}],tableConfig:{data:[],title:[{label:"销售申请单号",prop:"applyCode"},{label:"票券编号",prop:"couponCode"},{label:"票券名称",prop:"couponName"},{label:"激活日期",prop:"actTime"},{label:"消费日期",prop:"saleTime"},{label:"票券状态",hasTemplate:!0},{label:"操作",fixed:"right",hasTemplate:!0,width:"200"}]},pageConfig:{pageSizes:[10,20,30,40],pageSize:10,currentPage:1,total:0},searchParam:{}}},created:function(){var e=this,a=this.$route.query.applyCode;a&&(this.searchParam.applyCode=a,this.searchConfig[0].value=a,this.pageConfig.currentPage=1,this.search(),this.$nextTick(function(a){console.log(e.searchConfig),e.$refs.searchTitle.init(e.searchConfig)}))},methods:{setSearch:function(e){this.searchParam=e},search:function(e){var a=this,n=this.setParams(e);if(n.isShow)return this.$message({type:"warning",message:"请输入“申请单号”或“合同协议号”或“票券编号”进行查询。",showClose:!0});this.$ccmList.queryCodeList(n).then(function(e){1==e.flag?e.data&&(a.tableConfig.data=e.data,a.pageConfig.total=e.pageNum,a.setSearchInfo(n)):a.$message({type:"warning",message:"票券编号查询失败，请稍后再尝试！"})}).catch(function(e){console.log("票券编号查询错误：",e)})},setParams:function(e){var a=this;e="{}"!=o()(e)?e:void 0;var n={},t=[{key:"applyCode",isReg:!0},{key:"status",isReg:!1},{key:"contractCode",isReg:!0},{key:"couponCode",isReg:!0}],i={isShow:!0};return t.forEach(function(t,o){var l=t.key,s=t.isReg;n[""+l]||(n[""+l]=e?e[""+l]:a.searchParam?a.searchParam[""+l]:""),i.isShow&&s&&""!=n[""+l]&&(i.isShow=!1)}),i.isShow?i:(e&&(this.pageConfig.currentPage=1),n.pageNo=this.pageConfig.currentPage,n.pageSize=this.pageConfig.pageSize,n)},handleSizeChange:function(e){this.pageConfig.pageSize=e,this.search()},handleCurrentChange:function(e){this.pageConfig.currentPage=e,this.search()},counponStatus:function(e){var a="";switch(e){case 0:a="未激活";break;case 1:a="已激活";break;case 2:a="已消费";break;case 3:a="已退货";break;case 4:a="已停用";break;case 5:a="未生成";break;case 6:a="已作废";break;case 7:a="已过期";break;default:a="未知"}return a},controlBtn:function(e){var a=[{type:"check",emitFn:"checkCounpon",text:"查看"}];return 1==e&&a.push({type:"abandon",emitFn:"abandonOpenDialog",text:"作废"}),a},emitFn:function(e,a){this[""+e](a)},checkCounpon:function(e){this.$router.push({path:"checkSearchNumber",query:e})},abandonOpenDialog:function(e){console.log(e),this.abandonCope=e.couponCode,this.dialogVisible=!0},abandonCoupon:function(){var e=this,a={couponCode:this.abandonCope};this.$ccmList.cancelCode(a).then(function(a){var n=200==a.code?"success":"warning",t=200==a.code?"作废票券成功！":a.msg?a.msg:"作废票券失败，请稍后重试！";e.$message({message:t,type:n}),"success"==n&&(e.dialogVisible=!1,e.search())}).catch(function(e){console.log("作废票券错误："+e)})},setSearchInfo:function(e){var a=this;this.$ccmList.queryCodeListCount(e).then(function(e){var n=e.data;a.searchInfo.forEach(function(e){n.hasOwnProperty([e.key])?e.value=n[e.key]:e.value=0})})}}}},347:function(e,a,n){var t=n(348);"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);n(123)("670daab6",t,!0,{})},348:function(e,a,n){a=e.exports=n(122)(!0),a.push([e.i,"\n[data-v-a76e7dc4].pageStyle .el-input .el-input__inner {\n  font-size: 12px !important;\n  height: 24px !important;\n  color: #666666;\n}\n[data-v-a76e7dc4].pageStyle .el-pagination__sizes {\n  position: relative;\n  bottom: 1px;\n}\n[data-v-a76e7dc4].pageStyle .el-pagination .el-pagination__jump {\n  margin: 0 24px;\n}\n[data-v-a76e7dc4].pageStyle .el-pagination .el-pagination__total,[data-v-a76e7dc4].pageStyle .el-pagination .btn-prev,[data-v-a76e7dc4].pageStyle .el-pagination .el-pager li,[data-v-a76e7dc4].pageStyle .el-pagination .btn-next,[data-v-a76e7dc4].pageStyle .el-pagination .el-pagination__jump,[data-v-a76e7dc4].pageStyle .el-pagination .el-pagination__sizes {\n  font-size: 12px !important;\n  height: 24px;\n  line-height: 24px;\n  min-width: 24px;\n  border-radius: 4px;\n  background: #ffffff;\n  color: #666666;\n}\n[data-v-a76e7dc4].pageStyle .el-pagination .btn-prev,[data-v-a76e7dc4].pageStyle .el-pagination .el-pager li,[data-v-a76e7dc4].pageStyle .el-pagination .btn-next {\n  border: 1px solid #BCBCBC;\n}\nsection[data-v-a76e7dc4] {\n  margin-bottom: 15px;\n}\n.addBtn[data-v-a76e7dc4] {\n  width: 80px;\n  padding-left: 0;\n  padding-right: 0;\n  height: 32px;\n  font-size: 12px;\n  border-color: #3B74FF;\n  color: #3B74FF;\n}\n.autocollorr[data-v-a76e7dc4] {\n  color: red;\n}\n.searchInfo[data-v-a76e7dc4] {\n  font-family: MicrosoftYaHei;\n  letter-spacing: 0;\n  padding: 20px 0;\n}\n.searchInfo .searchInfo_title[data-v-a76e7dc4] {\n    color: #666666;\n    font-size: 12px;\n}\n.searchInfo .searchInfo_content[data-v-a76e7dc4] {\n    margin-left: 5px;\n}\n.searchInfo .searchInfo_content li[data-v-a76e7dc4] {\n      margin-right: 5px;\n}\n.searchInfo .searchInfo_content li span[data-v-a76e7dc4]:nth-of-type(1) {\n        font-size: 12px;\n        font-family: MicrosoftYaHei-Bold;\n}\n.searchInfo .searchInfo_content li span[data-v-a76e7dc4]:nth-of-type(2) {\n        margin-left: 5px;\n        font-size: 12px;\n        color: #3b74ff;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/ccm/src/views/coupon/searchNumber/index.vue"],names:[],mappings:";AACA;EACE,2BAA2B;EAC3B,wBAAwB;EACxB,eAAe;CAChB;AACD;EACE,mBAAmB;EACnB,YAAY;CACb;AACD;EACE,eAAe;CAChB;AACD;EACE,2BAA2B;EAC3B,aAAa;EACb,kBAAkB;EAClB,gBAAgB;EAChB,mBAAmB;EACnB,oBAAoB;EACpB,eAAe;CAChB;AACD;EACE,0BAA0B;CAC3B;AACD;EACE,oBAAoB;CACrB;AACD;EACE,YAAY;EACZ,gBAAgB;EAChB,iBAAiB;EACjB,aAAa;EACb,gBAAgB;EAChB,sBAAsB;EACtB,eAAe;CAChB;AACD;EACE,WAAW;CACZ;AACD;EACE,4BAA4B;EAC5B,kBAAkB;EAClB,gBAAgB;CACjB;AACD;IACI,eAAe;IACf,gBAAgB;CACnB;AACD;IACI,iBAAiB;CACpB;AACD;MACM,kBAAkB;CACvB;AACD;QACQ,gBAAgB;QAChB,iCAAiC;CACxC;AACD;QACQ,iBAAiB;QACjB,gBAAgB;QAChB,eAAe;CACtB",file:"index.vue",sourcesContent:["\n[data-v-a76e7dc4].pageStyle .el-input .el-input__inner {\n  font-size: 12px !important;\n  height: 24px !important;\n  color: #666666;\n}\n[data-v-a76e7dc4].pageStyle .el-pagination__sizes {\n  position: relative;\n  bottom: 1px;\n}\n[data-v-a76e7dc4].pageStyle .el-pagination .el-pagination__jump {\n  margin: 0 24px;\n}\n[data-v-a76e7dc4].pageStyle .el-pagination .el-pagination__total,[data-v-a76e7dc4].pageStyle .el-pagination .btn-prev,[data-v-a76e7dc4].pageStyle .el-pagination .el-pager li,[data-v-a76e7dc4].pageStyle .el-pagination .btn-next,[data-v-a76e7dc4].pageStyle .el-pagination .el-pagination__jump,[data-v-a76e7dc4].pageStyle .el-pagination .el-pagination__sizes {\n  font-size: 12px !important;\n  height: 24px;\n  line-height: 24px;\n  min-width: 24px;\n  border-radius: 4px;\n  background: #ffffff;\n  color: #666666;\n}\n[data-v-a76e7dc4].pageStyle .el-pagination .btn-prev,[data-v-a76e7dc4].pageStyle .el-pagination .el-pager li,[data-v-a76e7dc4].pageStyle .el-pagination .btn-next {\n  border: 1px solid #BCBCBC;\n}\nsection[data-v-a76e7dc4] {\n  margin-bottom: 15px;\n}\n.addBtn[data-v-a76e7dc4] {\n  width: 80px;\n  padding-left: 0;\n  padding-right: 0;\n  height: 32px;\n  font-size: 12px;\n  border-color: #3B74FF;\n  color: #3B74FF;\n}\n.autocollorr[data-v-a76e7dc4] {\n  color: red;\n}\n.searchInfo[data-v-a76e7dc4] {\n  font-family: MicrosoftYaHei;\n  letter-spacing: 0;\n  padding: 20px 0;\n}\n.searchInfo .searchInfo_title[data-v-a76e7dc4] {\n    color: #666666;\n    font-size: 12px;\n}\n.searchInfo .searchInfo_content[data-v-a76e7dc4] {\n    margin-left: 5px;\n}\n.searchInfo .searchInfo_content li[data-v-a76e7dc4] {\n      margin-right: 5px;\n}\n.searchInfo .searchInfo_content li span[data-v-a76e7dc4]:nth-of-type(1) {\n        font-size: 12px;\n        font-family: MicrosoftYaHei-Bold;\n}\n.searchInfo .searchInfo_content li span[data-v-a76e7dc4]:nth-of-type(2) {\n        margin-left: 5px;\n        font-size: 12px;\n        color: #3b74ff;\n}\n"],sourceRoot:""}])},349:function(e,a,n){"use strict";var t=function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"table-page"},[n("section",{staticClass:"search-section"},[n("searchLan",{ref:"searchTitle",attrs:{modelName:e.modelName,config:e.searchConfig},on:{pressSearch:e.search,searchValueChange:e.setSearch}})],1),e._v(" "),n("section",{staticClass:"btnGropu-section flex-base flex-between"},[n("div",{staticClass:"flex-base searchInfo"},[n("span",{staticClass:"searchInfo_title"},[e._v("查询结果明细：")]),e._v(" "),n("ul",{staticClass:"flex-base searchInfo_content"},e._l(e.searchInfo,function(a,t){return n("li",{key:t,staticClass:"flex-base"},[n("span",[e._v(e._s(a.label)+":")]),e._v(" "),n("span",[e._v(e._s(a.value)+"张")])])}),0)])]),e._v(" "),n("section",{staticClass:"table-section "},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableConfig.data}},[e._l(e.tableConfig.title,function(a,t){return[a.prop&&!a.hasTemplate?n("el-table-column",{key:t,attrs:{prop:a.prop,label:a.label,width:a.width,"show-overflow-tooltip":"",fixed:a.fixed}}):a.hasTemplate?n("el-table-column",{key:t,attrs:{prop:a.prop,label:a.label,width:a.width,"show-overflow-tooltip":"",fixed:a.fixed},scopedSlots:e._u([{key:"default",fn:function(t){return["票券状态"==a.label?n("div",[e._v("\n              "+e._s(e.counponStatus(t.row.status))+"\n            ")]):"操作"==a.label?n("div",e._l(e.controlBtn(t.row.status),function(a){return n("el-button",{key:a.label,attrs:{type:"text"},on:{click:function(n){return e.emitFn(a.emitFn,t.row)}}},[e._v(e._s(a.text))])}),1):e._e()]}}],null,!0)}):e._e()]})],2)],1),e._v(" "),0!=e.tableConfig.data.length?n("section",{staticClass:"pagination-section flex-base flex-center pageStyle"},[n("el-pagination",{attrs:{"current-page":e.pageConfig.currentPage,"page-sizes":e.pageConfig.pageSizes,"page-size":e.pageConfig.pageSize,background:"",layout:"total, prev, pager, next, jumper, sizes",total:e.pageConfig.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e(),e._v(" "),n("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(a){e.dialogVisible=a}}},[n("span",[e._v("确定作废")]),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(a){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.abandonCoupon}},[e._v("确 定")])],1)])],1)},o=[],i={render:t,staticRenderFns:o};a.a=i}});