webpackJsonpccm([11],{127:function(e,t,a){"use strict";function n(e){a(296)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(268),o=a(302),l=a(3),s=n,c=l(i.a,o.a,!1,s,"data-v-e4e62b2c",null);t.default=c.exports},268:function(e,t,a){"use strict";var n=a(57),i=a(298),o=a(32),l=(a.n(o),a(126)),s=a.n(l);t.a={components:{searchLan:n.a,checkApporveDialog:i.a},mixins:[o.cacheMixin.cacheMixin],data:function(){return{cacheField:["pageConfig","tableConfig","searchParam"],subComName:"salesManagement",dialogFormVisible:!1,bizNo:"",baseUrl:this.$store.state.default.apiConfig.baseURL,modelName:"salesManagement",searchLevelButton:!0,searchConfig:[{keyName:"incomeCinemaId",alertCompontsName:"cinemaSingle",name:"入账影院",type:"input",value:{value:"",text:""},alertButton:!0,clearable:!0,alertSrc:"http://192.168.100.148:8080/alertWindow"},{keyName:"applyCode",name:"申请单号",type:"input",value:""},{keyName:"couponName",name:"票券名称",type:"input",value:""},{keyName:"queryCreateUserName",name:"申请人",type:"input",value:"",alertSrc:""},{keyName:"proposDate",name:"申请日期",type:"date-picker",level:"hight",value:""},{keyName:"contractCode",name:"合同协议号",type:"input",level:"hight",value:""},{keyName:"custId",alertCompontsName:"tradeMerchantSingle",name:"客商名称",type:"input",level:"hight",value:{value:"",text:""},clearable:!0,alertButton:!0,alertSrc:""},{keyName:"couponType",name:"票券类型",type:"select",level:"hight",value:"",options:[{label:"全部",value:""},{label:"兑换券",value:"0"},{label:"优惠券",value:"2"},{label:"代金券",value:"1"}]},{keyName:"state",name:"状态",type:"select",level:"hight",value:"",options:[{label:"全部",value:""},{label:"未提交",value:"0"},{label:"新建",value:"1"},{label:"已激活",value:"2"},{label:"已停用",value:"3"},{label:"已作废",value:"4"},{label:"已过期",value:"5"},{label:"修订中",value:"-1"},{label:"票券验证中",value:"7"},{label:"票券验证不通过",value:"8"},{label:"票券生成中",value:"9"}]},{keyName:"auditState",name:"审批状态",type:"select",level:"hight",value:"",options:[{label:"全部",value:""},{label:"审批通过",value:"0"},{label:"审批未通过",value:"1"},{label:"未审批",value:"2"}]},{keyName:"ticketTimeUp",name:"票券过期日期",type:"date-picker",level:"hight",value:""}],tableConfig:{title:[{label:"申请单号",prop:"applyCode",width:"190"},{label:"票券名称",prop:"couponName",width:""},{label:"票券类型",prop:"couponType",width:""},{label:"数量",prop:"couponCount",width:""},{label:"有效期起",prop:"validDateStart",width:"",hasTemplate:!0},{label:"有效期止",prop:"validDateEnd",width:"",hasTemplate:!0},{label:"客商名称",prop:"custName",width:"100"},{label:"申请人",prop:"createUserName",width:""},{label:"状态",prop:"state",width:"",hasTemplate:!0},{label:"审批状态",prop:"auditState",width:"",hasTemplate:!0},{label:"操作",hasTemplate:!0,fixed:"right",width:"200"}],data:[]},pageConfig:{start:0,pageSize:10,pageSizes:[10,20,30,40],pageNo:1,total:0},searchParam:{},delayWindow:{labelWidth:"120px",isShow:!1,pickerOptions:{disabledDate:function(e){var t=new Date,a=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),o=a+"-"+n+"-"+i;return e.getTime()<new Date(o)}},applyCode:"",validDateStart:"",validDateEnd:""}}},created:function(){this.tableConfig.data.length&&!this.$route.params.isFresh||this.search()},methods:{search:function(e){var t=this.setParams(e);this.getData(t)},setSearch:function(e){this.searchParam=e},setParams:function(e){var t=this;console.log(e),e=e||"";var a=this.searchParam,n=["applyCode","auditState","batchCode","contractCode","couponName","couponType","state","queryCreateUserName"],i={};return n.forEach(function(t){i[""+t]||(i[""+t]=e[""+t]?e[""+t]:a[""+t]?a[""+t]:"")}),[{keys:"proposDate",children:["createTimeStart","createTimeEnd"]},{keys:"ticketTimeUp",children:["validDateStart","validDateEnd"]}].forEach(function(n,o){var l=n.keys;n.children.forEach(function(n,o){i[""+n]||(i[""+n]=e[""+l]?t.tiemRule(e[""+l][o]):a[""+l]?t.tiemRule(a[""+l][o]):"")})}),["custId","incomeCinemaId"].forEach(function(t,n){i[""+t]||(i[""+t]=e[""+t]?e[""+t].value:a[""+t]?a[""+t].value:"")}),["pageSize","pageNo"].forEach(function(e,a){i[""+e]||(i[""+e]=t.pageConfig[""+e])}),e&&(this.pageConfig.pageNo=1,i.pageNo=1,console.log(this.pageConfig.pageNo,"页数回到第一页"),console.log(i)),i},tiemRule:function(e,t){var a=new Date(e),n="";switch(t){case"time":n=a.getHours()+":"+a.getMinutes();break;default:n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()}return n},getData:function(e){var t=this;this.$ccmList.findSaleList(e).then(function(e){var a="warning";2==e.flag&&(a="success"),"success"==a&&(t.tableConfig.data=e.data,t.pageConfig.total=e.pageNum,t.tableConfig.data.map(function(e,a){e.couponType=t.ticketTypes(e.couponTypeRight.couponType)}))}).catch(function(e){console.log("查询销售单列表错误：",e)})},ticketTypes:function(e){var t="";switch(e){case"0":t="兑换券";break;case"1":t="代金券";break;case"2":t="优惠券";break;default:t="全部"}return t},ticketStatus:function(e){var t="";switch(e.state){case 0:t="未提交";break;case 1:t="新建";break;case 2:t="已激活",t=1==e.isRevision&&2==e.state?"修订中":t,e.genStatus&&2==e.genStatus&&(t="票券生成中");break;case 3:t="已停用";break;case 4:t="已作废";break;case 5:t="已过期";break;case 7:t="票券验证中";break;case 8:t="票券验证不通过";break;case 9:t="票券生成中";break;case 10:t="迁移";break;default:t="未知"}return t},auditStatus:function(e){var t="";switch(e){case 0:t="审批通过";break;case 1:t="审批未通过";break;case 2:t="未审批";break;default:t="未知"}return t},level1Template:function(e,t,a){var n=[{label:"查看",emitFn:"check",use:"all"},{label:"导出",emitFn:"export",use:"0&&2,0&&3,0&&4,0&&5"},{label:"修改",emitFn:"change",use:"2&&0,2&&8,1&&1,1&&0"}];if(2==a.genStatus)return[{label:"查看",emitFn:"check",use:"all"}];if(10==t)return[{label:"修订",emitFn:"revise"}];for(var i=[],o=e+"&&"+t,l=0;l<n.length;l++){var s=n[l].use;"all"==s?i.push(n[l]):-1!=s.indexOf(o)&&i.push(n[l])}return i},level2Template:function(e,t,a){var n=[{label:"删除",emitFn:"delete",use:"2&&0,2&&8"},{label:"复制",emitFn:"copy",use:"all"},{label:"提交审批",emitFn:"submit",use:"1&&1,2&&0,2&&8"},{label:"查看审批单",emitFn:"checkApporve",use:"2&&1,0&&9,0&&2,0&&3,0&&4,0&&5,1&&1,2&&7,1&&0"},{label:"作废",emitFn:"blankOut",use:"0&&9,0&&2,0&&3"},{label:"修订",emitFn:"revise",use:"0&&2"},{label:"停用",emitFn:"stop",use:"0&&2"},{label:"延期",emitFn:"delay",use:"0&&2,0&&5"},{label:"启用",emitFn:"start",use:"0&&3"}],i=[];if(2==a.genStatus)return[{label:"复制",emitFn:"copy"},{label:"查看审批单",emitFn:"checkApporve"},{label:"作废",emitFn:"blankOut"}];if(10==t)return[{label:"修订",emitFn:"revise"}];for(var o=e+"&&"+t,l=0;l<n.length;l++){var s=n[l].use;if("all"==s)i.push(n[l]);else if(-1!=s.indexOf(o)){if("revise"==n[l].emitFn&&1==a.isRevision)continue;i.push(n[l])}}return i},controlEmitFn:function(e,t){this[""+e](t)},commandLevel2:function(e){var t=e[0],a=e[1].emitFn;this.controlEmitFn(a,t)},check:function(e){this.$router.push({path:"checkSaleList",query:{applyCode:e.applyCode}})},create:function(){this.$router.push({name:"createSales",query:{pageName:"add",isAdd:!0}})},change:function(e){this.$router.push({name:"editSales",query:{applyCode:e.applyCode,isEdit:!0,ischange:!0,pageName:"edit"}})},copy:function(e){this.$router.push({name:"copySales",query:{applyCode:e.applyCode,isEdit:!0,isCopy:!0,pageName:"copy"}})},revise:function(e){console.log("修订:",e),this.$router.push({name:"reviseSales",query:{applyCode:e.applyCode,incomeCinemaId:e.incomeCinemaId,isEdit:!0,isrevise:!0,pageName:"revise"}})},export:function(e){var t=this,a="warning",n=this.baseUrl+"/coupon/apply/export?applyCode="+e.applyCode,i={};this.$store.state.CpmUserKey&&(i["Cpm-User-Token"]=this.$store.state.CpmUserKey),sessionStorage.getItem("token")&&(i["Cpm-User-Token"]=sessionStorage.getItem("token")),s()(n,{headers:i,method:"post",responseType:"blob"}).then(function(e){console.log(e.headers);var n=e.headers.flag,i="导出失败，请稍后尝试！";if("1"==n){a="success",i="导出成功！";var o=new Blob([e.data]),l=e.headers.filename,s=document.createElement("a");s.download=l,s.style.display="none",s.href=URL.createObjectURL(o),document.body.appendChild(s),s.click(),URL.revokeObjectURL(s.href),document.body.removeChild(s)}t.$message({type:a,message:i})})},delete:function(e){var t=this;console.log("删除:",e);var a={applyCode:e.applyCode};this.$confirm("是否删除","提示",{type:"warning"}).then(function(e){t.$ccmList.deleteSaleList(a).then(function(e){var a="warning";200==e.code&&(a="success"),t.$message({type:a,message:"删除票券申请单成功",onClose:function(a){200==e.code&&t.search()}})}).catch(function(e){console.log("删除票券申请单错误",e)})})},submit:function(e){var t=this;console.log("提交审批:",e);var a={applyCode:e.applyCode};this.$ccmList.createAuditBill(a).then(function(e){var a="warning",n="提交审批单失败，请稍后尝试";200==e.code&&(a="success",n="提交审批单成功"),t.$message({type:a,message:n,duration:1e3}),200==e.code&&t.search()}).catch(function(e){console.log("提交审批单失败：",e)})},checkApporve:function(e){console.log("查看审批单:",e.applyCode),this.bizNo=e.applyCode,this.dialogFormVisible=!0},close:function(e){this.dialogFormVisible=!1},blankOut:function(e){var t=this,a={applyCode:e.applyCode};this.$ccmList.abandonSaleList(a).then(function(e){var a="warning",n=e.msg;3==e.flag&&(a="success",n="作废销售单成功"),t.$message({type:a,message:n}),"success"==a&&t.search()}).catch(function(e){console.log("作废销售申请单错误：",e)})},start:function(e){var t=this,a={applyCode:e.applyCode,state:e.state};this.$ccmList.startSaleList(a).then(function(e){var a="warning",n="启用票券销售单失败，请稍后尝试";2==e.flag&&(a="success",n="启用销售单成功"),t.$message({type:a,message:n}),"success"==a&&t.search()}).catch(function(e){console.log("启用票券销售单错误：",e)})},stop:function(e){var t=this,a={applyCode:e.applyCode,auditState:e.auditState};this.$ccmList.stopSaleList(a).then(function(e){var a="warning",n="停用销售单失败，请稍后再尝试";2==e.flag&&(a="success",n="停用销售单成功"),t.$message({type:a,message:n}),"success"==a&&t.search()}).catch(function(e){console.log("停用销售单错误：",e)})},delay:function(e){this.setDelayParam(!0,e.applyCode,e.validDateStart,e.validDateEnd)},setDelayParam:function(e,t,a,n){this.delayWindow.applyCode=t,this.delayWindow.validDateStart=this.ruleTime(a),this.delayWindow.validDateEnd=new Date(n),this.delayWindow.isShow=e},sureDelay:function(){var e=this,t={applyCode:this.delayWindow.applyCode,validDateEnd:this.ruleTime(this.delayWindow.validDateEnd)};this.$confirm("延期操作时，系统默认暂停票券申请单，请手启动恢复使用！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$ccmList.delaySaleList(t).then(function(t){var a="warning",n=t.msg;2==t.flag&&(a="success",n="票券延期成功"),e.$message({type:a,message:n}),e.setDelayParam(!1,"","",""),"success"==a&&e.search()}).catch(function(t){console.log(t),e.setDelayParam(!1,"","","")})})},cancleDelay:function(){this.setDelayParam(!1,"","","")},ruleTime:function(e,t){var a=new Date(e),n=a.getFullYear(),i=a.getMonth()+1,o=a.getDate(),l=a.getHours(),s=a.getMinutes(),c=n+"-"+i+"-"+o;return"time"==t&&(c=l+":"+s),c},handleSizeChange:function(e){this.pageConfig.pageSize=e,this.search()},handleCurrentChange:function(e){this.pageConfig.pageNo=e,this.search()}}}},269:function(e,t,a){"use strict";var n=a(31);t.a={props:{bizNo:String,dialogFormVisible:Boolean},data:function(){return{checkInfo:{},workflowNoteNum:"",contentText:"查看审批单",tableData:[],formLabelWidth:"120px",dialogVisible:this.dialogFormVisible}},computed:{},methods:{getApprovalrecordList:function(){var e=this,t={atId:this.checkInfo.atId};Object(n.d)(t).then(function(t){t&&200===t.code&&1==t.flag?e.tableData=t.data:e.$message({message:t.msg,type:"warning",duration:1e3})}).catch(function(e){console.log(e)})},getDataList:function(){var e=this,t={bizNo:this.bizNo,pageNo:1,pageSize:10,status:[1,2,3]};Object(n.c)(t).then(function(t){t&&200===t.code&&1==t.flag?(e.checkInfo=t.data[0],e.getApprovalrecordList()):e.$message({message:t.msg,type:"warning",duration:1e3})}).catch(function(e){console.log(e)})},close:function(){this.dialogVisible=!1,this.$emit("close")},closeBack:function(){this.dialogVisible=!1}},mounted:function(){console.log(this.bizNo),this.bizNo&&this.getDataList()}}},296:function(e,t,a){var n=a(297);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(123)("47e9bc97",n,!0,{})},297:function(e,t,a){t=e.exports=a(122)(!0),t.push([e.i,"\n[data-v-e4e62b2c].pageStyle .el-input .el-input__inner {\n  font-size: 12px !important;\n  height: 24px !important;\n  color: #666666;\n}\n[data-v-e4e62b2c].pageStyle .el-pagination__sizes {\n  position: relative;\n  bottom: 1px;\n}\n[data-v-e4e62b2c].pageStyle .el-pagination .el-pagination__jump {\n  margin: 0 24px;\n}\n[data-v-e4e62b2c].pageStyle .el-pagination .el-pagination__total,[data-v-e4e62b2c].pageStyle .el-pagination .btn-prev,[data-v-e4e62b2c].pageStyle .el-pagination .el-pager li,[data-v-e4e62b2c].pageStyle .el-pagination .btn-next,[data-v-e4e62b2c].pageStyle .el-pagination .el-pagination__jump,[data-v-e4e62b2c].pageStyle .el-pagination .el-pagination__sizes {\n  font-size: 12px !important;\n  height: 24px;\n  line-height: 24px;\n  min-width: 24px;\n  border-radius: 4px;\n  background: #ffffff;\n  color: #666666;\n}\n[data-v-e4e62b2c].pageStyle .el-pagination .btn-prev,[data-v-e4e62b2c].pageStyle .el-pagination .el-pager li,[data-v-e4e62b2c].pageStyle .el-pagination .btn-next {\n  border: 1px solid #BCBCBC;\n}\nsection[data-v-e4e62b2c] {\n  margin-bottom: 15px;\n}\n.addBtn[data-v-e4e62b2c] {\n  width: 80px;\n  padding-left: 0;\n  padding-right: 0;\n  height: 32px;\n  font-size: 12px;\n  border-color: #3B74FF;\n  color: #3B74FF;\n}\n.autocollorr[data-v-e4e62b2c] {\n  color: red;\n}\n.el-dropdown-link[data-v-e4e62b2c] {\n  cursor: pointer;\n  color: #409eff;\n  font-size: 12px;\n}\n.el-icon-arrow-down[data-v-e4e62b2c] {\n  font-size: 12px;\n}\n.delayLine[data-v-e4e62b2c] {\n  margin-left: 15px;\n  margin-right: 15px;\n}\n[data-v-e4e62b2c].el-dropdown-link {\n  color: #3b74ff;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/ccm/src/views/coupon/salesManagement/list.vue"],names:[],mappings:";AACA;EACE,2BAA2B;EAC3B,wBAAwB;EACxB,eAAe;CAChB;AACD;EACE,mBAAmB;EACnB,YAAY;CACb;AACD;EACE,eAAe;CAChB;AACD;EACE,2BAA2B;EAC3B,aAAa;EACb,kBAAkB;EAClB,gBAAgB;EAChB,mBAAmB;EACnB,oBAAoB;EACpB,eAAe;CAChB;AACD;EACE,0BAA0B;CAC3B;AACD;EACE,oBAAoB;CACrB;AACD;EACE,YAAY;EACZ,gBAAgB;EAChB,iBAAiB;EACjB,aAAa;EACb,gBAAgB;EAChB,sBAAsB;EACtB,eAAe;CAChB;AACD;EACE,WAAW;CACZ;AACD;EACE,gBAAgB;EAChB,eAAe;EACf,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,kBAAkB;EAClB,mBAAmB;CACpB;AACD;EACE,eAAe;CAChB",file:"list.vue",sourcesContent:["\n[data-v-e4e62b2c].pageStyle .el-input .el-input__inner {\n  font-size: 12px !important;\n  height: 24px !important;\n  color: #666666;\n}\n[data-v-e4e62b2c].pageStyle .el-pagination__sizes {\n  position: relative;\n  bottom: 1px;\n}\n[data-v-e4e62b2c].pageStyle .el-pagination .el-pagination__jump {\n  margin: 0 24px;\n}\n[data-v-e4e62b2c].pageStyle .el-pagination .el-pagination__total,[data-v-e4e62b2c].pageStyle .el-pagination .btn-prev,[data-v-e4e62b2c].pageStyle .el-pagination .el-pager li,[data-v-e4e62b2c].pageStyle .el-pagination .btn-next,[data-v-e4e62b2c].pageStyle .el-pagination .el-pagination__jump,[data-v-e4e62b2c].pageStyle .el-pagination .el-pagination__sizes {\n  font-size: 12px !important;\n  height: 24px;\n  line-height: 24px;\n  min-width: 24px;\n  border-radius: 4px;\n  background: #ffffff;\n  color: #666666;\n}\n[data-v-e4e62b2c].pageStyle .el-pagination .btn-prev,[data-v-e4e62b2c].pageStyle .el-pagination .el-pager li,[data-v-e4e62b2c].pageStyle .el-pagination .btn-next {\n  border: 1px solid #BCBCBC;\n}\nsection[data-v-e4e62b2c] {\n  margin-bottom: 15px;\n}\n.addBtn[data-v-e4e62b2c] {\n  width: 80px;\n  padding-left: 0;\n  padding-right: 0;\n  height: 32px;\n  font-size: 12px;\n  border-color: #3B74FF;\n  color: #3B74FF;\n}\n.autocollorr[data-v-e4e62b2c] {\n  color: red;\n}\n.el-dropdown-link[data-v-e4e62b2c] {\n  cursor: pointer;\n  color: #409eff;\n  font-size: 12px;\n}\n.el-icon-arrow-down[data-v-e4e62b2c] {\n  font-size: 12px;\n}\n.delayLine[data-v-e4e62b2c] {\n  margin-left: 15px;\n  margin-right: 15px;\n}\n[data-v-e4e62b2c].el-dropdown-link {\n  color: #3b74ff;\n}\n"],sourceRoot:""}])},298:function(e,t,a){"use strict";function n(e){a(299)}var i=a(269),o=a(301),l=a(3),s=n,c=l(i.a,o.a,!1,s,"data-v-218c8b06",null);t.a=c.exports},299:function(e,t,a){var n=a(300);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(123)("7545048d",n,!0,{})},300:function(e,t,a){t=e.exports=a(122)(!0),t.push([e.i,"\n.check .check-item[data-v-218c8b06] {\n  width: 50%;\n  float: left;\n}\n.check .check-item-first[data-v-218c8b06] {\n  width: 50%;\n  float: right;\n}\n.check .el-form-item[data-v-218c8b06] {\n  margin-bottom: 0;\n}\n.check .box-card[data-v-218c8b06] {\n  margin-bottom: 15px;\n}\n.el-row[data-v-218c8b06] {\n  margin-bottom: 20px;\n}\n.footerBtn[data-v-218c8b06] {\n  width: 80px;\n  height: 32px;\n  line-height: 32px;\n  text-align: center;\n  vertical-align: middle;\n  padding: 0;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/ccm/src/dialogs/approval/approvalDialog.vue"],names:[],mappings:";AACA;EACE,WAAW;EACX,YAAY;CACb;AACD;EACE,WAAW;EACX,aAAa;CACd;AACD;EACE,iBAAiB;CAClB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,YAAY;EACZ,aAAa;EACb,kBAAkB;EAClB,mBAAmB;EACnB,uBAAuB;EACvB,WAAW;CACZ",file:"approvalDialog.vue",sourcesContent:["\n.check .check-item[data-v-218c8b06] {\n  width: 50%;\n  float: left;\n}\n.check .check-item-first[data-v-218c8b06] {\n  width: 50%;\n  float: right;\n}\n.check .el-form-item[data-v-218c8b06] {\n  margin-bottom: 0;\n}\n.check .box-card[data-v-218c8b06] {\n  margin-bottom: 15px;\n}\n.el-row[data-v-218c8b06] {\n  margin-bottom: 20px;\n}\n.footerBtn[data-v-218c8b06] {\n  width: 80px;\n  height: 32px;\n  line-height: 32px;\n  text-align: center;\n  vertical-align: middle;\n  padding: 0;\n}\n"],sourceRoot:""}])},301:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"check"},[a("el-dialog",{attrs:{width:"80%","close-on-click-modal":!1,title:e.contentText,visible:e.dialogVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close}},[e.checkInfo?a("el-form",[a("el-form-item",{attrs:{"label-width":e.formLabelWidth}},[a("div",{staticClass:"check-item"},[a("span",[e._v("单据名称：")]),e._v(" "),a("span",[e._v(e._s(e.checkInfo.bizName||""))])]),e._v(" "),a("div",{staticClass:"check-item"},[a("span",[e._v("创建时间：")]),e._v(" "),a("span",[e._v(e._s(e.checkInfo.createTime||""))])])]),e._v(" "),a("el-form-item",{attrs:{"label-width":e.formLabelWidth}},[a("div",{staticClass:"check-item"},[a("span",[e._v("审批状态：")]),e._v(" "),1==e.checkInfo.statusRespons?a("span",[e._v("待审批")]):e._e(),e._v(" "),2==e.checkInfo.statusRespons?a("span",[e._v("审批通过")]):e._e(),e._v(" "),3==e.checkInfo.statusRespons?a("span",[e._v("驳回审批")]):e._e(),e._v(" "),4==e.checkInfo.statusRespons?a("span",[e._v("未审批")]):e._e()]),e._v(" "),a("div",{staticClass:"check-item"},[a("span",[e._v("单据类型：")]),e._v(" "),a("span",[e._v(e._s(e.checkInfo.bizTypeName||""))])])]),e._v(" "),a("el-form-item",{attrs:{"label-width":e.formLabelWidth}},[a("div",{staticClass:"check-item"},[a("span",[e._v("申请人：")]),e._v(" "),a("span",[e._v(e._s(e.checkInfo.applyUserName||""))])]),e._v(" "),a("div",{staticClass:"check-item"},[a("span",[e._v("申请人单位：")]),e._v(" "),a("span",[e._v(e._s(e.checkInfo.applyGroupName||""))])])]),e._v(" "),a("el-form-item",{attrs:{"label-width":e.formLabelWidth}},[a("div",{staticClass:"check-item"},[a("span",[e._v("业务单据号：")]),e._v(" "),a("span",[e._v(e._s(e.checkInfo.bizNo||""))])])])],1):e._e(),e._v(" "),a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("审批记录")])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"workflowNoteNum",label:"审批节点"}}),e._v(" "),a("el-table-column",{attrs:{prop:"atId",label:"任务编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"auditTime",label:"审批时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"auditUserName",label:"审批人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"auditResult",label:"审批结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(1==t.row.auditResult?"待审批":"")+"\n            "+e._s(2==t.row.auditResult?"审批通过":"")+"\n            "+e._s(3==t.row.auditResult?"驳回审批":"")+"\n            "+e._s(4==t.row.auditResult?"未审批":"")+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"auditOpinion",label:"审批意见"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"footerBtn",on:{click:e.closeBack}},[e._v("关 闭")])],1)],1)],1)},i=[],o={render:n,staticRenderFns:i};t.a=o},302:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-page"},[a("section",{staticClass:"search-section"},[a("searchLan",{attrs:{modelName:e.modelName,config:e.searchConfig,searchLevelButton:e.searchLevelButton},on:{pressSearch:e.search,searchValueChange:e.setSearch}})],1),e._v(" "),a("section",{staticClass:"btnGroup-section flex-base flex-end"},[a("el-button",{staticStyle:{width:"80px",height:"32px"},attrs:{type:"primary",plain:""},on:{click:e.create}},[e._v("新建")])],1),e._v(" "),a("section",{staticClass:"table-section"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableConfig.data}},[e._l(e.tableConfig.title,function(t,n){return[t.hasTemplate?e._e():a("el-table-column",{key:n,attrs:{prop:t.prop,label:t.label,width:t.width,"show-overflow-tooltip":""}}),e._v(" "),t.hasTemplate?a("el-table-column",{key:n,attrs:{prop:t.prop,label:t.label,width:t.width,fixed:t.fixed,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(n){return["couponType"==t.prop?a("div",[e._v("\n              "+e._s("0"==n.row.couponType?"兑换券":"1"==n.row.couponType?"代金券":"优惠券")+"\n            ")]):e._e(),e._v(" "),"state"==t.prop?a("div",[e._v("\n              "+e._s(e.ticketStatus(n.row))+"\n            ")]):"auditState"==t.prop?a("div",["0"==n.row.auditState?a("span",{staticStyle:{"font-size":"12px",color:"#2DBC2D"}},[e._v("\n                "+e._s(e.auditStatus(n.row.auditState))+"\n              ")]):"1"==n.row.auditState?a("span",{staticStyle:{"font-size":"12px",color:"#F33430"}},[e._v("\n                "+e._s(e.auditStatus(n.row.auditState))+"\n              ")]):"2"==n.row.auditState?a("span",{staticStyle:{"font-size":"12px",color:"#739BFF"}},[e._v("\n                "+e._s(e.auditStatus(n.row.auditState))+"\n              ")]):a("span",[e._v("\n                "+e._s(e.auditStatus(n.row.auditState))+"\n              ")])]):"validDateStart"==t.prop||"validDateEnd"==t.prop?a("div",[e._v("\n              "+e._s(e.tiemRule(n.row[""+t.prop]))+"\n            ")]):"操作"==t.label?a("div",[a("el-row",[e._l(e.level1Template(n.row.auditState,n.row.state,n.row),function(t,i){return a("el-button",{key:i,attrs:{type:"text"},on:{click:function(a){return e.controlEmitFn(t.emitFn,n.row)}}},[e._v(e._s(t.label))])}),e._v(" "),a("el-dropdown",{on:{command:e.commandLevel2}},[a("span",{staticClass:"el-dropdown-link"},[e._v("更多"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.level2Template(n.row.auditState,n.row.state,n.row),function(t,i){return a("el-dropdown-item",{key:i,attrs:{command:[n.row,t]}},[e._v(e._s(t.label))])}),1)],1)],2)],1):e._e()]}}],null,!0)}):e._e()]})],2)],1),e._v(" "),0!=e.tableConfig.data.length?a("section",{staticClass:"flex-base flex-center pageStyle"},[a("el-pagination",{attrs:{"current-page":e.pageConfig.pageNo,"page-sizes":e.pageConfig.pageSizes,"page-size":e.pageConfig.pageSize,background:"",layout:"total, prev, pager, next, jumper, sizes",total:e.pageConfig.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"票券延期",visible:e.delayWindow.isShow,"close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.delayWindow,"isShow",t)}}},[a("el-form",[a("el-form-item",{attrs:{label:"调整票券有效期:","label-width":e.delayWindow.labelWidth}},[a("el-row",{staticClass:"flex-base"},[a("span",[e._v(e._s(e.delayWindow.validDateStart))]),e._v(" "),a("span",{staticClass:"delayLine"},[e._v(" - ")]),e._v(" "),a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期","picker-options":e.delayWindow.pickerOptions},model:{value:e.delayWindow.validDateEnd,callback:function(t){e.$set(e.delayWindow,"validDateEnd",t)},expression:"delayWindow.validDateEnd"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancleDelay}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.sureDelay}},[e._v("确 定")])],1)],1),e._v(" "),e.dialogFormVisible?a("checkApporveDialog",{attrs:{dialogFormVisible:e.dialogFormVisible,bizNo:e.bizNo},on:{close:e.close}}):e._e()],1)},i=[],o={render:n,staticRenderFns:i};t.a=o}});