webpackJsonpccm([9],{146:function(e,a,t){"use strict";function n(e){t(379)}Object.defineProperty(a,"__esModule",{value:!0});var i=t(291),o=t(385),l=t(3),s=n,r=l(i.a,o.a,!1,s,"data-v-91d2b1a6",null);a.default=r.exports},260:function(e,a,t){"use strict";a.__esModule=!0;var n=t(261),i=function(e){return e&&e.__esModule?e:{default:e}}(n);a.default=function(e,a,t){return a in e?(0,i.default)(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}},261:function(e,a,t){e.exports={default:t(262),__esModule:!0}},262:function(e,a,t){t(263);var n=t(0).Object;e.exports=function(e,a,t){return n.defineProperty(e,a,t)}},263:function(e,a,t){var n=t(12);n(n.S+n.F*!t(4),"Object",{defineProperty:t(6).f})},291:function(e,a,t){"use strict";var n=t(260),i=t.n(n),o=t(57),l=t(381),s=t(32);t.n(s);a.a={components:{searchLan:o.a,checkDialog:l.a},mixins:[s.cacheMixin.cacheMixin],data:function(){return i()({cacheField:["pageConfig","tableConfig"],subComName:"receivable",modelName:"printManagement",searchParam:{},dialogForm:"",dialogArr:[],searchConfig:[{name:"申请单号",keyName:"applyCode",type:"input",value:""},{name:"入账影院",keyName:"incomeCinemaName",alertCompontsName:"cinemaSingle",type:"input",value:{value:"",text:""},alertButton:!0,clearable:!0},{name:"创建人",keyName:"names",type:"input",value:""},{name:"日期范围",keyName:"proposDate",type:"date-picker",value:""},{name:"合同协议号",keyName:"contractCode",type:"input",level:"hight",value:""},{name:"客户名称",keyName:"custName",type:"input",value:"",level:"hight"},{name:"申请部门",keyName:"departmentName",type:"input",value:"",level:"hight"},{name:"下次收款时间",keyName:"nextReceiptDate",type:"date-picker",dateType:"date",level:"hight",value:""},{name:"收款状态",keyName:"receivableState",type:"select",value:"0",level:"hight",options:[{label:"全部",value:""},{label:"未收齐",value:"0"},{label:"已收齐",value:"1"},{label:"已终止 ",value:"2"}]}],tableConfig:{title:[{label:"申请单号",prop:"applyCode",width:"180"},{label:"入账影院",prop:"incomeCinemaName"},{label:"创建人",prop:"createUserName"},{label:"申请部门",prop:"createDepartmentName"},{label:"客户名称",prop:"custName"},{label:"申请日期",prop:"dateOfApplication"},{label:"收款状态",prop:"receivableState",hasTemplate:!0},{label:"总金额（元）",prop:"totalAmount"},{label:"未收款金额（元）",prop:"uncollectedAmount"},{label:"下次回收日期",prop:"nextReceiptDate",width:"100"},{label:"操作",width:"180",hasTemplate:!0,fixed:"right"}],data:[]},pageConfig:{pageNo:1,pageSizes:[10,20,30,40],pageSize:10,total:15}},"searchParam",{})},created:function(){this.tableConfig.data.length&&!this.$route.params.isFresh||this.search({receivableState:"0"})},methods:{setSearch:function(e){this.searchParam=e},setParams:function(e){var a=this;console.log("有参数",e),e=e||"";var t={},n=this.searchParam;return["applyCode","names","contractCode","departmentName","custName","receivableState"].forEach(function(a){t[a]||(t[a]=e[a]?e[a]:n[a]?n[a]:"")}),[{keys:"proposDate",children:["validDateStart","validDateEnd"]}].forEach(function(i,o){var l=i.keys;i.children.forEach(function(i,o){t[""+i]||(t[""+i]=e[""+l]?a.tiemRule(e[""+l][o]):n[""+l]?a.tiemRule(n[""+l][o]):"")})}),t.nextReceiptDate=e.nextReceiptDate?this.tiemRule(e.nextReceiptDate):n.nextReceiptDate?this.tiemRule(n.nextReceiptDate):"",["incomeCinemaName"].forEach(function(a){t[a]=e[a]?e[a].value:n[a]?n[a].value:""}),e&&(this.pageConfig.pageNo=1),t.pageNo=this.pageConfig.pageNo,t.pageSize=this.pageConfig.pageSize,t},checkReceivable:function(e){this.dialogForm=e,this.$refs.checkDialog.openDialg(e.receivableId)},endReceivable:function(e){var a=this,t={applyCode:e.applyCode,state:2};this.$confirm("确认执行终止操作？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$ccmList.receivableUpdateState(t).then(function(e){console.log(e);var t="warning",n=e.msg?e.msg:"新增收款记录失败";200==e.code&&(t="success",n=e.msg?e.msg:"新增收款记录成功",a.search()),a.$message({type:t,message:n})})})},create:function(e){console.log(e),this.$router.push({name:"createReceivable",query:{id:e.receivableId}})},search:function(e){var a=this;console.log(e);var t=this.setParams(e);this.$ccmList.receivableList(t).then(function(e){200==e.code&&(a.tableConfig.data=e.data.list,a.pageConfig.total=e.data.pageNum)})},tiemRule:function(e,a){var t=new Date(e),n="";switch(a){case"time":n=t.getHours()+":"+t.getMinutes();break;default:n=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}return n},handleSizeChange:function(e){this.pageConfig.pageSize=e,this.search()},handleCurrentChange:function(e){this.pageConfig.pageNo=e,this.search()},formal:function(e){var a="";switch(e){case 0:a="未收齐";break;case 1:a="已收齐";break;case 2:a="已终止"}return a}},mounted:function(){}}},292:function(e,a,t){"use strict";a.a={components:{},props:{formData:{}},data:function(){return{tableConfig:[{label:"收款单编号",prop:"receiptCode"},{label:"收款金额（元）",prop:"receiptAmount",width:"110"},{label:"支付方式",prop:"payTypeName"},{label:"收款日期",prop:"receiptDate"},{label:"制单日期",prop:"createTime"},{label:"制单人",prop:"createUserName"},{label:"下次回款日期",prop:"nextReceiptDate",hasTemplate:!0}],activeNames:["baseInfo"],tableData:[],Visible:!1,pageConfig:{pageNo:1,pageSize:10,total:null}}},created:function(){},methods:{search:function(e){var a=this;console.log("查询",this.formData);var t={id:e||this.formData.receivableId?this.formData.receivableId:"",pageNo:this.pageConfig.pageNo,pageSize:this.pageConfig.pageSize};this.$ccmList.receivableSelectItem(t).then(function(e){console.log(e),a.tableData=e.data.list,a.pageConfig.total=e.data.pageNum})},handleSizeChange:function(e){this.pageConfig.pageSize=e,this.search()},handleCurrentChange:function(e){this.pageConfig.pageNo=e,this.search()},openDialg:function(e){this.Visible=!0,this.search(e)}},mounted:function(){}}},379:function(e,a,t){var n=t(380);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t(123)("79dab6ec",n,!0,{})},380:function(e,a,t){a=e.exports=t(122)(!0),a.push([e.i,"\n[data-v-91d2b1a6].pageStyle .el-input .el-input__inner {\n  font-size: 12px !important;\n  height: 24px !important;\n  color: #666666;\n}\n[data-v-91d2b1a6].pageStyle .el-pagination__sizes {\n  position: relative;\n  bottom: 1px;\n}\n[data-v-91d2b1a6].pageStyle .el-pagination .el-pagination__jump {\n  margin: 0 24px;\n}\n[data-v-91d2b1a6].pageStyle .el-pagination .el-pagination__total,[data-v-91d2b1a6].pageStyle .el-pagination .btn-prev,[data-v-91d2b1a6].pageStyle .el-pagination .el-pager li,[data-v-91d2b1a6].pageStyle .el-pagination .btn-next,[data-v-91d2b1a6].pageStyle .el-pagination .el-pagination__jump,[data-v-91d2b1a6].pageStyle .el-pagination .el-pagination__sizes {\n  font-size: 12px !important;\n  height: 24px;\n  line-height: 24px;\n  min-width: 24px;\n  border-radius: 4px;\n  background: #ffffff;\n  color: #666666;\n}\n[data-v-91d2b1a6].pageStyle .el-pagination .btn-prev,[data-v-91d2b1a6].pageStyle .el-pagination .el-pager li,[data-v-91d2b1a6].pageStyle .el-pagination .btn-next {\n  border: 1px solid #BCBCBC;\n}\nsection[data-v-91d2b1a6] {\n  margin-bottom: 15px;\n}\n.addBtn[data-v-91d2b1a6] {\n  width: 80px;\n  padding-left: 0;\n  padding-right: 0;\n  height: 32px;\n  font-size: 12px;\n  border-color: #3B74FF;\n  color: #3B74FF;\n}\n.autocollorr[data-v-91d2b1a6] {\n  color: red;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/ccm/src/views/coupon/receivableManagement/index.vue"],names:[],mappings:";AACA;EACE,2BAA2B;EAC3B,wBAAwB;EACxB,eAAe;CAChB;AACD;EACE,mBAAmB;EACnB,YAAY;CACb;AACD;EACE,eAAe;CAChB;AACD;EACE,2BAA2B;EAC3B,aAAa;EACb,kBAAkB;EAClB,gBAAgB;EAChB,mBAAmB;EACnB,oBAAoB;EACpB,eAAe;CAChB;AACD;EACE,0BAA0B;CAC3B;AACD;EACE,oBAAoB;CACrB;AACD;EACE,YAAY;EACZ,gBAAgB;EAChB,iBAAiB;EACjB,aAAa;EACb,gBAAgB;EAChB,sBAAsB;EACtB,eAAe;CAChB;AACD;EACE,WAAW;CACZ",file:"index.vue",sourcesContent:["\n[data-v-91d2b1a6].pageStyle .el-input .el-input__inner {\n  font-size: 12px !important;\n  height: 24px !important;\n  color: #666666;\n}\n[data-v-91d2b1a6].pageStyle .el-pagination__sizes {\n  position: relative;\n  bottom: 1px;\n}\n[data-v-91d2b1a6].pageStyle .el-pagination .el-pagination__jump {\n  margin: 0 24px;\n}\n[data-v-91d2b1a6].pageStyle .el-pagination .el-pagination__total,[data-v-91d2b1a6].pageStyle .el-pagination .btn-prev,[data-v-91d2b1a6].pageStyle .el-pagination .el-pager li,[data-v-91d2b1a6].pageStyle .el-pagination .btn-next,[data-v-91d2b1a6].pageStyle .el-pagination .el-pagination__jump,[data-v-91d2b1a6].pageStyle .el-pagination .el-pagination__sizes {\n  font-size: 12px !important;\n  height: 24px;\n  line-height: 24px;\n  min-width: 24px;\n  border-radius: 4px;\n  background: #ffffff;\n  color: #666666;\n}\n[data-v-91d2b1a6].pageStyle .el-pagination .btn-prev,[data-v-91d2b1a6].pageStyle .el-pagination .el-pager li,[data-v-91d2b1a6].pageStyle .el-pagination .btn-next {\n  border: 1px solid #BCBCBC;\n}\nsection[data-v-91d2b1a6] {\n  margin-bottom: 15px;\n}\n.addBtn[data-v-91d2b1a6] {\n  width: 80px;\n  padding-left: 0;\n  padding-right: 0;\n  height: 32px;\n  font-size: 12px;\n  border-color: #3B74FF;\n  color: #3B74FF;\n}\n.autocollorr[data-v-91d2b1a6] {\n  color: red;\n}\n"],sourceRoot:""}])},381:function(e,a,t){"use strict";function n(e){t(382)}var i=t(292),o=t(384),l=t(3),s=n,r=l(i.a,o.a,!1,s,"data-v-1525c47a",null);a.a=r.exports},382:function(e,a,t){var n=t(383);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t(123)("39c3fda0",n,!0,{})},383:function(e,a,t){a=e.exports=t(122)(!0),a.push([e.i,'\n.pagination-section[data-v-1525c47a] {\n  margin-top: 10px;\n}\n.option[data-v-1525c47a] {\n  height: 40px;\n}\n.base-info[data-v-1525c47a] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  margin-left: 20px;\n}\n.base-info .base-box[data-v-1525c47a] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n}\n.base-info .base-box .keyName[data-v-1525c47a],\n    .base-info .base-box .keyValue[data-v-1525c47a] {\n      color: #666;\n      font-size: 12px;\n}\n[data-v-1525c47a] .el-collapse-item__header::after {\n  display: none;\n}\n[data-v-1525c47a] .el-collapse-item__header {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: row-reverse;\n          flex-direction: row-reverse;\n}\n[data-v-1525c47a] .el-collapse-item__arrow {\n  margin: 8px 8px 8px 0;\n}\n[data-v-1525c47a] .el-dialog__body {\n  padding-top: 0px;\n}\n[data-v-1525c47a] .el-dialog__header::after {\n  content: "";\n  display: block;\n  width: 100%;\n  height: 1px;\n  background: #e5e5e5;\n}\n[data-v-1525c47a] .el-collapse {\n  padding-bottom: 0px;\n}\n[data-v-1525c47a] .el-collapse-item__wrap {\n  padding-top: 0;\n}\n[data-v-1525c47a] .el-collapse-item:last-child {\n  margin: 0;\n}\n',"",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/ccm/src/views/coupon/receivableManagement/checkDialog.vue"],names:[],mappings:";AACA;EACE,iBAAiB;CAClB;AACD;EACE,aAAa;CACd;AACD;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,kBAAkB;CACnB;AACD;IACI,oBAAoB;QAChB,YAAY;YACR,QAAQ;CACnB;AACD;;MAEM,YAAY;MACZ,gBAAgB;CACrB;AACD;EACE,cAAc;CACf;AACD;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,sBAAsB;MAClB,mBAAmB;UACf,0BAA0B;EAClC,+BAA+B;EAC/B,+BAA+B;MAC3B,gCAAgC;UAC5B,4BAA4B;CACrC;AACD;EACE,sBAAsB;CACvB;AACD;EACE,iBAAiB;CAClB;AACD;EACE,YAAY;EACZ,eAAe;EACf,YAAY;EACZ,YAAY;EACZ,oBAAoB;CACrB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,eAAe;CAChB;AACD;EACE,UAAU;CACX",file:"checkDialog.vue",sourcesContent:['\n.pagination-section[data-v-1525c47a] {\n  margin-top: 10px;\n}\n.option[data-v-1525c47a] {\n  height: 40px;\n}\n.base-info[data-v-1525c47a] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  margin-left: 20px;\n}\n.base-info .base-box[data-v-1525c47a] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n}\n.base-info .base-box .keyName[data-v-1525c47a],\n    .base-info .base-box .keyValue[data-v-1525c47a] {\n      color: #666;\n      font-size: 12px;\n}\n[data-v-1525c47a] .el-collapse-item__header::after {\n  display: none;\n}\n[data-v-1525c47a] .el-collapse-item__header {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: row-reverse;\n          flex-direction: row-reverse;\n}\n[data-v-1525c47a] .el-collapse-item__arrow {\n  margin: 8px 8px 8px 0;\n}\n[data-v-1525c47a] .el-dialog__body {\n  padding-top: 0px;\n}\n[data-v-1525c47a] .el-dialog__header::after {\n  content: "";\n  display: block;\n  width: 100%;\n  height: 1px;\n  background: #e5e5e5;\n}\n[data-v-1525c47a] .el-collapse {\n  padding-bottom: 0px;\n}\n[data-v-1525c47a] .el-collapse-item__wrap {\n  padding-top: 0;\n}\n[data-v-1525c47a] .el-collapse-item:last-child {\n  margin: 0;\n}\n'],sourceRoot:""}])},384:function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"my_dialog"},[t("el-dialog",{attrs:{title:"查看收款记录","close-on-click-modal":!1,visible:e.Visible},on:{"update:visible":function(a){e.Visible=a}}},[t("el-collapse",{model:{value:e.activeNames,callback:function(a){e.activeNames=a},expression:"activeNames"}},[t("el-collapse-item",{attrs:{title:"销售申请单信息",name:"baseInfo"}},[e.formData?t("div",{staticClass:"base-info"},[t("div",{staticClass:"base-box"},[t("div",{staticClass:"option"},[t("label",{staticClass:"keyName"},[e._v("合同协议号:")]),e._v(" "),t("span",{staticClass:"keyValue"},[e._v(e._s(e.formData.contractCode))])]),e._v(" "),t("div",{staticClass:"option"},[t("label",{staticClass:"keyName"},[e._v("销售申请人:")]),e._v(" "),t("span",{staticClass:"keyValue"},[e._v(e._s(e.formData.createUserName))])]),e._v(" "),t("div",{staticClass:"option"},[t("label",{staticClass:"keyName"},[e._v("客户名称:")]),e._v(" "),t("span",{staticClass:"keyValue"},[e._v(e._s(e.formData.custName))])]),e._v(" "),t("div",{staticClass:"option"},[t("label",{staticClass:"keyName"},[e._v("已收款金额:")]),e._v(" "),t("span",{staticClass:"keyValue"},[e._v(e._s(e.formData.receiptAmount))])])]),e._v(" "),t("div",{staticClass:"base-box"},[t("div",{staticClass:"option"},[t("label",{staticClass:"keyName"},[e._v("销售申请单号:")]),e._v(" "),t("span",{staticClass:"keyValue"},[e._v(e._s(e.formData.applyCode))])]),e._v(" "),t("div",{staticClass:"option"},[t("label",{staticClass:"keyName"},[e._v("申请时间:")]),e._v(" "),t("span",{staticClass:"keyValue"},[e._v(e._s(e.formData.dateOfApplication))])]),e._v(" "),t("div",{staticClass:"option"},[t("label",{staticClass:"keyName"},[e._v("合同总金额:")]),e._v(" "),t("span",{staticClass:"keyValue"},[e._v(e._s(e.formData.totalAmount))])]),e._v(" "),t("div",{staticClass:"option"},[t("label",{staticClass:"keyName"},[e._v("未收款金额:")]),e._v(" "),t("span",{staticClass:"keyValue"},[e._v(e._s(e.formData.uncollectedAmount))])])])]):e._e(),e._v(" "),t("div",{staticClass:"table"},[t("el-table",{attrs:{data:e.tableData}},[e._l(e.tableConfig,function(e,a){return[t("el-table-column",{key:a,attrs:{prop:e.prop,label:e.label,width:e.width}})]})],2)],1),e._v(" "),e.pageConfig.total>10?t("section",{staticClass:"pagination-section flex-base flex-center pageStyle"},[t("el-pagination",{attrs:{"current-page":e.pageConfig.pageNo,"page-sizes":e.pageConfig.pageSizes,"page-size":e.pageConfig.pageSize,background:"",layout:"total, prev, pager, next, jumper, sizes",total:e.pageConfig.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()])],1),e._v(" "),t("div",{staticStyle:{"text-align":"center"}},[t("el-button",{attrs:{plain:""},on:{click:function(a){e.Visible=!1}}},[e._v("返回")])],1)],1)],1)},i=[],o={render:n,staticRenderFns:i};a.a=o},385:function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"table-page"},[t("section",{staticClass:"search-section"},[t("searchLan",{attrs:{modelName:e.modelName,config:e.searchConfig,searchLevelButton:!0},on:{pressSearch:e.search,searchValueChange:e.setSearch}})],1),e._v(" "),t("section",{staticClass:"table-section"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableConfig.data}},[e._l(e.tableConfig.title,function(a,n){return[a.hasTemplate?a.hasTemplate?t("el-table-column",{key:n,attrs:{prop:a.prop,label:a.label,width:a.width,fixed:a.fixed},scopedSlots:e._u([{key:"default",fn:function(n){return["receivableState"==a.prop?t("div",[e._v("\n              "+e._s(e.formal(n.row.receivableState))+"\n            ")]):e._e(),e._v(" "),"操作"==a.label?t("div",[t("el-button",{attrs:{type:"text"},on:{click:function(a){return e.checkReceivable(n.row)}}},[e._v("查看")]),e._v(" "),"0"==n.row.receivableState?t("el-button",{attrs:{type:"text"},on:{click:function(a){return e.create(n.row)}}},[e._v("新建")]):e._e(),e._v(" "),"0"==n.row.receivableState?t("el-button",{attrs:{type:"text"},on:{click:function(a){return e.endReceivable(n.row)}}},[e._v("终止")]):e._e()],1):e._e()]}}],null,!0)}):e._e():t("el-table-column",{key:n,attrs:{prop:a.prop,label:a.label,width:a.width}})]})],2)],1),e._v(" "),0!=e.tableConfig.data.length?t("section",{staticClass:"pagination-section flex-base flex-center pageStyle"},[t("el-pagination",{attrs:{"current-page":e.pageConfig.pageNo,"page-sizes":e.pageConfig.pageSizes,"page-size":e.pageConfig.pageSize,background:"",layout:"total, prev, pager, next, jumper, sizes",total:e.pageConfig.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e(),e._v(" "),t("check-dialog",{ref:"checkDialog",attrs:{formData:e.dialogForm,tableData:e.dialogArr}})],1)},i=[],o={render:n,staticRenderFns:i};a.a=o}});