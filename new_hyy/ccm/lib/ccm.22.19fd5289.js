webpackJsonpccm([22],{135:function(e,n,t){"use strict";function a(e){t(334)}Object.defineProperty(n,"__esModule",{value:!0});var o=t(280),i=t(336),l=t(3),r=a,s=l(o.a,i.a,!1,r,"data-v-f1837f5c",null);n.default=s.exports},280:function(e,n,t){"use strict";var a=t(37),o=t.n(a),i=t(126),l=t.n(i);n.a={components:{},data:function(){var e=function(e,n,t){if(console.log(void 0===n?"undefined":o()(n)),console.log("NaN"==Number(n).toString()),!/^[1-9]\d*$/.test(n))return t(new TypeError("请输入大于零小于等于50000的数字"));!n||0==n||"NaN"==Number(n).toString()||n>5e4?t(new Error("请输入大于零小于等于50000的数字")):t()};return{activeNames:["baseConfig"],baseUrl:this.$store.state.default.apiConfig.baseURL,returnTime:null,returnTime2:null,fileList:[],file:"",address:[{name:"票券",path:""},{name:"票券编号预生成",path:""},{name:"新建预生成批次",path:"",active:!0}],baseConfig:{couponNumber:"0",couponCount:null,uploadSrc:"#",uploadFileList:[],couponColor:{value:"不设",show:[{label:"不设",value:"不设"},{label:"红色",value:"红色"},{label:"绿色",value:"绿色"},{label:"蓝色",value:"蓝色"},{label:"紫色",value:"紫色"},{label:"黄色",value:"黄色"},{label:"3D",value:"3D"}]}},formRules:{couponCount:[{required:!0,validator:e,trigger:"blur"}]}}},methods:{handleChange:function(){},downLoadTem:function(){var e=this,n=this.baseUrl+"/coupon/prebuild/exportTemplate",t={};this.$store.state.CpmUserKey&&(t["Cpm-User-Token"]=this.$store.state.CpmUserKey),sessionStorage.getItem("token")&&(t["Cpm-User-Token"]=sessionStorage.getItem("token")),l()(n,{headers:t,method:"get",responseType:"blob"}).then(function(n){console.log(n);var t=n.headers.flag,a="下载模板错误，请稍后再试！",o="warning";"1"==t&&(o="success",a="下载成功"),e.$message({type:o,message:a});var i=new Blob([n.data]),l=n.headers.filename,r=document.createElement("a");r.download=l,r.style.display="none",r.href=URL.createObjectURL(i),document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r)})},addNumber:function(){var e=this,n=this.baseConfig.couponNumber;"0"==n?this.$refs.validateForm.validate(function(n){n&&e.createCouponSys()}):"1"==n&&this.beforeUpload()},createCouponSys:function(){var e=this,n=this,t={couponColor:this.baseConfig.couponColor.value,couponCount:this.baseConfig.couponCount};n.$ccmList.createCouponBatch(t).then(function(t){var a=(t.flag,t.msg),o="warning";3==t.flag&&(o="success",clearTimeout(n.returnTime),n.returnTime=setTimeout(function(){n.$router.push("numberCreate")},1e3)),e.$message({type:o,message:a})})},onUploadChange:function(e){this.file=e,this.fileList=[],this.fileList.push({name:e.name});var n=new FileReader;n.readAsDataURL(e.raw),n.onload=function(e){}},removeFile:function(){this.file="",this.fileList=[]},beforeUpload:function(){var e=this.file;if(console.log(this.fileList),!this.fileList.length)return this.$message({type:"warning",message:"请选择导入文件"});console.log("file",e);var n=e.name.substring(e.name.lastIndexOf(".")+1);if(console.log("文件后缀：",n),"xls"!=n&&"xlsx"!=n)return this.$message({type:"warning",message:"请选择excel文件"});var t=this,a=new FormData;a.append("file",e.raw),a.append("couponColor",this.baseConfig.couponColor.value),t.$ccmList.importExcel(a).then(function(e){var n=(e.flag,e.msg),a="warning";4==e.flag&&(a="success",clearTimeout(t.returnTime2),t.returnTime2=setTimeout(function(){t.$router.push("numberCreate")},1e3)),t.$message({type:a,message:n})})},cancle:function(){this.$store.commit("tagNav/removeTagNav",{name:this.$route.name,path:this.$route.path,title:this.$route.meta.title,query:this.$route.query}),this.$router.push({path:"numberCreate"})}},destroyed:function(){clearTimeout(this.returnTime),clearTimeout(this.returnTime2)}}},334:function(e,n,t){var a=t(335);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t(123)("1cfe6fa9",a,!0,{})},335:function(e,n,t){n=e.exports=t(122)(!0),n.push([e.i,'\n@charset "UTF-8";\n.el-checkbox__label[data-v-f1837f5c] {\n  color: #666;\n  font-size: 12px;\n}\n[data-v-f1837f5c] .el-form-item__label {\n  color: #666;\n  font: 12px;\n}\n[data-v-f1837f5c] .el-radio__label {\n  color: #666;\n  font-size: 12px;\n}\n[data-v-f1837f5c] .el-input {\n  font-size: 12px;\n}\n[data-v-f1837f5c] .el-select-dropdown__item span {\n  font-size: 12px;\n}\n[data-v-f1837f5c] .el-date-editor span {\n  font-size: 12px;\n}\n[data-v-f1837f5c] span {\n  font-size: 12px;\n}\n.font-style[data-v-f1837f5c] {\n  font-size: 12px;\n  color: #666;\n}\n[data-v-f1837f5c] .popup-input {\n  margin-right: 8px;\n}\n[data-v-f1837f5c] .popup-input input {\n    text-overflow: ellipsis;\n    background: #f5f5f5;\n    border: 1px solid #bcbcbc !important;\n}\n.popup-input:hover .popup-close[data-v-f1837f5c] {\n  display: inline-block;\n}\n[data-v-f1837f5c] .popup-close {\n  cursor: pointer;\n  color: #3B74FF;\n  font-size: 16px;\n  font-weight: 500;\n  font-weight: 700;\n  margin-top: 13px;\n  display: none;\n}\n/* 按钮大小*/\n[data-v-f1837f5c] .el-button {\n  width: 80px;\n  height: 32px;\n}\n/* 折叠*/\n[data-v-f1837f5c] .el-collapse-item__header::after {\n  display: none;\n}\n[data-v-f1837f5c] .el-collapse-item__header {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: row-reverse;\n          flex-direction: row-reverse;\n}\n[data-v-f1837f5c] .el-collapse-item__wrap {\n  padding-top: 0;\n}\n[data-v-f1837f5c] .el-collapse-item__content {\n  padding-bottom: 0;\n}\n/* 日期*/\n[data-v-f1837f5c] .el-date-editor .el-range-separator, .el-range-editor .el-range-input[data-v-f1837f5c] {\n  font-size: 12px;\n}\n[data-v-f1837f5c] .el-range-editor .el-range-input {\n  font-size: 12px;\n}\n[data-v-f1837f5c] .el-date-editor--daterange.el-input__inner {\n  width: 252px;\n  font-size: 12px;\n}\n[data-v-f1837f5c] .el-range-separator {\n  width: 24px;\n  line-height: 24px;\n}\n[data-v-f1837f5c] .el-range__icon, .el-range-separator[data-v-f1837f5c], .el-range__close-icon[data-v-f1837f5c] {\n  line-height: 20px !important;\n}\n[data-v-f1837f5c] .el-date-editor .el-range__close-icon {\n  line-height: 20px;\n}\n.baseConfig li[data-v-f1837f5c] {\n  margin-bottom: 10px;\n  margin-left: 4px;\n}\n.tips-info[data-v-f1837f5c] {\n  color: #666;\n  font-size: 12px;\n}\n.import-template .upload-demo[data-v-f1837f5c] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.import-template .el-upload-list[data-v-f1837f5c] {\n  display: inline-block !important;\n}\n.import-template .el-upload-list .el-upload-list--excel[data-v-f1837f5c] {\n  display: inline-block !important;\n}\n[data-v-f1837f5c] .el-form-item {\n  margin-bottom: 12px;\n}\n',"",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/ccm/src/views/coupon/numberCreate/addNumber.vue"],names:[],mappings:";AACA,iBAAiB;AACjB;EACE,YAAY;EACZ,gBAAgB;CACjB;AACD;EACE,YAAY;EACZ,WAAW;CACZ;AACD;EACE,YAAY;EACZ,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;EAChB,YAAY;CACb;AACD;EACE,kBAAkB;CACnB;AACD;IACI,wBAAwB;IACxB,oBAAoB;IACpB,qCAAqC;CACxC;AACD;EACE,sBAAsB;CACvB;AACD;EACE,gBAAgB;EAChB,eAAe;EACf,gBAAgB;EAChB,iBAAiB;EACjB,iBAAiB;EACjB,iBAAiB;EACjB,cAAc;CACf;AACD,SAAS;AACT;EACE,YAAY;EACZ,aAAa;CACd;AACD,OAAO;AACP;EACE,cAAc;CACf;AACD;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,sBAAsB;MAClB,mBAAmB;UACf,0BAA0B;EAClC,+BAA+B;EAC/B,+BAA+B;MAC3B,gCAAgC;UAC5B,4BAA4B;CACrC;AACD;EACE,eAAe;CAChB;AACD;EACE,kBAAkB;CACnB;AACD,OAAO;AACP;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,aAAa;EACb,gBAAgB;CACjB;AACD;EACE,YAAY;EACZ,kBAAkB;CACnB;AACD;EACE,6BAA6B;CAC9B;AACD;EACE,kBAAkB;CACnB;AACD;EACE,oBAAoB;EACpB,iBAAiB;CAClB;AACD;EACE,YAAY;EACZ,gBAAgB;CACjB;AACD;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;CACf;AACD;EACE,iCAAiC;CAClC;AACD;EACE,iCAAiC;CAClC;AACD;EACE,oBAAoB;CACrB",file:"addNumber.vue",sourcesContent:['\n@charset "UTF-8";\n.el-checkbox__label[data-v-f1837f5c] {\n  color: #666;\n  font-size: 12px;\n}\n[data-v-f1837f5c] .el-form-item__label {\n  color: #666;\n  font: 12px;\n}\n[data-v-f1837f5c] .el-radio__label {\n  color: #666;\n  font-size: 12px;\n}\n[data-v-f1837f5c] .el-input {\n  font-size: 12px;\n}\n[data-v-f1837f5c] .el-select-dropdown__item span {\n  font-size: 12px;\n}\n[data-v-f1837f5c] .el-date-editor span {\n  font-size: 12px;\n}\n[data-v-f1837f5c] span {\n  font-size: 12px;\n}\n.font-style[data-v-f1837f5c] {\n  font-size: 12px;\n  color: #666;\n}\n[data-v-f1837f5c] .popup-input {\n  margin-right: 8px;\n}\n[data-v-f1837f5c] .popup-input input {\n    text-overflow: ellipsis;\n    background: #f5f5f5;\n    border: 1px solid #bcbcbc !important;\n}\n.popup-input:hover .popup-close[data-v-f1837f5c] {\n  display: inline-block;\n}\n[data-v-f1837f5c] .popup-close {\n  cursor: pointer;\n  color: #3B74FF;\n  font-size: 16px;\n  font-weight: 500;\n  font-weight: 700;\n  margin-top: 13px;\n  display: none;\n}\n/* 按钮大小*/\n[data-v-f1837f5c] .el-button {\n  width: 80px;\n  height: 32px;\n}\n/* 折叠*/\n[data-v-f1837f5c] .el-collapse-item__header::after {\n  display: none;\n}\n[data-v-f1837f5c] .el-collapse-item__header {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n      -ms-flex-pack: end;\n          justify-content: flex-end;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: row-reverse;\n          flex-direction: row-reverse;\n}\n[data-v-f1837f5c] .el-collapse-item__wrap {\n  padding-top: 0;\n}\n[data-v-f1837f5c] .el-collapse-item__content {\n  padding-bottom: 0;\n}\n/* 日期*/\n[data-v-f1837f5c] .el-date-editor .el-range-separator, .el-range-editor .el-range-input[data-v-f1837f5c] {\n  font-size: 12px;\n}\n[data-v-f1837f5c] .el-range-editor .el-range-input {\n  font-size: 12px;\n}\n[data-v-f1837f5c] .el-date-editor--daterange.el-input__inner {\n  width: 252px;\n  font-size: 12px;\n}\n[data-v-f1837f5c] .el-range-separator {\n  width: 24px;\n  line-height: 24px;\n}\n[data-v-f1837f5c] .el-range__icon, .el-range-separator[data-v-f1837f5c], .el-range__close-icon[data-v-f1837f5c] {\n  line-height: 20px !important;\n}\n[data-v-f1837f5c] .el-date-editor .el-range__close-icon {\n  line-height: 20px;\n}\n.baseConfig li[data-v-f1837f5c] {\n  margin-bottom: 10px;\n  margin-left: 4px;\n}\n.tips-info[data-v-f1837f5c] {\n  color: #666;\n  font-size: 12px;\n}\n.import-template .upload-demo[data-v-f1837f5c] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.import-template .el-upload-list[data-v-f1837f5c] {\n  display: inline-block !important;\n}\n.import-template .el-upload-list .el-upload-list--excel[data-v-f1837f5c] {\n  display: inline-block !important;\n}\n[data-v-f1837f5c] .el-form-item {\n  margin-bottom: 12px;\n}\n'],sourceRoot:""}])},336:function(e,n,t){"use strict";var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"coupon-addNumber"},[t("el-collapse",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(n){e.activeNames=n},expression:"activeNames"}},[t("el-collapse-item",{attrs:{title:"基础信息",name:"baseConfig"}},[t("div",{staticClass:"baseConfig"},[t("el-form",{ref:"validateForm",attrs:{model:e.baseConfig,rules:e.formRules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"票券编号："}},[t("el-radio",{attrs:{label:"0"},model:{value:e.baseConfig.couponNumber,callback:function(n){e.$set(e.baseConfig,"couponNumber",n)},expression:"baseConfig.couponNumber"}},[e._v("系统生成")]),e._v(" "),t("el-radio",{attrs:{label:"1"},model:{value:e.baseConfig.couponNumber,callback:function(n){e.$set(e.baseConfig,"couponNumber",n)},expression:"baseConfig.couponNumber"}},[e._v("外部导入")])],1),e._v(" "),"0"==e.baseConfig.couponNumber?t("div",[t("el-form-item",{attrs:{prop:"couponCount",label:"票券编号数量："}},[t("el-input",{staticStyle:{width:"165px"},attrs:{placeholder:"请输入内容"},model:{value:e.baseConfig.couponCount,callback:function(n){e.$set(e.baseConfig,"couponCount",n)},expression:"baseConfig.couponCount"}}),e._v(" "),t("span",{staticClass:"tips-info"},[e._v("（<=50000张）")])],1)],1):e._e(),e._v(" "),"1"==e.baseConfig.couponNumber?t("el-form-item",{attrs:{label:"导入票券数据："}},[t("el-upload",{ref:"newupload",staticClass:"upload-demo",staticStyle:{display:"inline-block"},attrs:{"auto-upload":!1,action:"","http-request":e.beforeUpload,limit:2,"before-upload":e.beforeUpload,"on-remove":e.removeFile,"on-change":e.onUploadChange,"list-type":"excel","file-list":e.fileList}},[t("el-button",{staticStyle:{width:"90px"},attrs:{slot:"trigger",size:"small",type:"primary",plain:""},slot:"trigger"},[e._v("选择文件")])],1),e._v(" "),t("el-button",{attrs:{type:"text"},on:{click:e.downLoadTem}},[e._v("下载模板")])],1):e._e(),e._v(" "),t("el-form-item",{attrs:{label:"票纸颜色："}},[t("el-select",{staticClass:"table-search-inner-width",attrs:{placeholder:"请选择"},model:{value:e.baseConfig.couponColor.value,callback:function(n){e.$set(e.baseConfig.couponColor,"value",n)},expression:"baseConfig.couponColor.value"}},e._l(e.baseConfig.couponColor.show,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)])],1),e._v(" "),t("section",{staticClass:"flex-base flex-center"},[t("el-row",[t("el-button",{attrs:{type:"primary"},on:{click:e.addNumber}},[e._v("确定")]),e._v(" "),t("el-button",{staticStyle:{"margin-left":"27px"},on:{click:e.cancle}},[e._v("取消")])],1)],1)],1)},o=[],i={render:a,staticRenderFns:o};n.a=i}});