webpackJsonpccm([6],{141:function(e,t,n){"use strict";function a(e){n(356)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(286),o=n(363),i=n(3),l=a,s=i(r.a,o.a,!1,l,"data-v-3a3af512",null);t.default=s.exports},149:function(e,t,n){"use strict";function a(e){var t,n;this.promise=new e(function(e,a){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=a}),this.resolve=r(t),this.reject=r(n)}var r=n(54);e.exports.f=function(e){return new a(e)}},150:function(e,t,n){var a=n(9);e.exports=function(e,t,n,r){try{return r?t(a(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&a(o.call(e)),t}}},151:function(e,t,n){var a=n(13),r=n(2)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||o[r]===e)}},152:function(e,t,n){var a=n(9),r=n(54),o=n(2)("species");e.exports=function(e,t){var n,i=a(e).constructor;return void 0===i||void 0==(n=a(i)[o])?t:r(n)}},153:function(e,t,n){var a,r,o,i=n(53),l=n(188),s=n(58),c=n(35),p=n(1),d=p.process,u=p.setImmediate,f=p.clearImmediate,m=p.MessageChannel,g=p.Dispatch,h=0,v={},_=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},y=function(e){_.call(e.data)};u&&f||(u=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++h]=function(){l("function"==typeof e?e:Function(e),t)},a(h),h},f=function(e){delete v[e]},"process"==n(18)(d)?a=function(e){d.nextTick(i(_,e,1))}:g&&g.now?a=function(e){g.now(i(_,e,1))}:m?(r=new m,o=r.port2,r.port1.onmessage=y,a=i(o.postMessage,o,1)):p.addEventListener&&"function"==typeof postMessage&&!p.importScripts?(a=function(e){p.postMessage(e+"","*")},p.addEventListener("message",y,!1)):a="onreadystatechange"in c("script")?function(e){s.appendChild(c("script")).onreadystatechange=function(){s.removeChild(this),_.call(e)}}:function(e){setTimeout(i(_,e,1),0)}),e.exports={set:u,clear:f}},154:function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},155:function(e,t,n){var a=n(9),r=n(10),o=n(149);e.exports=function(e,t){if(a(e),r(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},156:function(e,t,n){var a=n(2)("iterator"),r=!1;try{var o=[7][a]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],i=o[a]();i.next=function(){return{done:n=!0}},o[a]=function(){return i},e(o)}catch(e){}return n}},179:function(e,t,n){e.exports=n(180)},180:function(e,t,n){var a=function(){return this}()||Function("return this")(),r=a.regeneratorRuntime&&Object.getOwnPropertyNames(a).indexOf("regeneratorRuntime")>=0,o=r&&a.regeneratorRuntime;if(a.regeneratorRuntime=void 0,e.exports=n(181),r)a.regeneratorRuntime=o;else try{delete a.regeneratorRuntime}catch(e){a.regeneratorRuntime=void 0}},181:function(e,t){!function(t){"use strict";function n(e,t,n,a){var o=t&&t.prototype instanceof r?t:r,i=Object.create(o.prototype),l=new f(a||[]);return i._invoke=c(e,n,l),i}function a(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function r(){}function o(){}function i(){}function l(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){function t(n,r,o,i){var l=a(e[n],e,r);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"==typeof c&&_.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,i)},function(e){t("throw",e,o,i)}):Promise.resolve(c).then(function(e){s.value=e,o(s)},i)}i(l.arg)}function n(e,n){function a(){return new Promise(function(a,r){t(e,n,a,r)})}return r=r?r.then(a,a):a()}var r;this._invoke=n}function c(e,t,n){var r=E;return function(o,i){if(r===k)throw new Error("Generator is already running");if(r===B){if("throw"===o)throw i;return g()}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var s=p(l,n);if(s){if(s===P)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===E)throw r=B,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=k;var c=a(e,t,n);if("normal"===c.type){if(r=n.done?B:S,c.arg===P)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=B,n.method="throw",n.arg=c.arg)}}}function p(e,t){var n=e.iterator[t.method];if(n===h){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=h,p(e,t),"throw"===t.method))return P;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var r=a(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,P;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=h),t.delegate=null,P):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,P)}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function u(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function m(e){if(e){var t=e[C];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(_.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=h,t.done=!0,t};return a.next=a}}return{next:g}}function g(){return{value:h,done:!0}}var h,v=Object.prototype,_=v.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},C=y.iterator||"@@iterator",b=y.asyncIterator||"@@asyncIterator",x=y.toStringTag||"@@toStringTag",A="object"==typeof e,w=t.regeneratorRuntime;if(w)return void(A&&(e.exports=w));w=t.regeneratorRuntime=A?e.exports:{},w.wrap=n;var E="suspendedStart",S="suspendedYield",k="executing",B="completed",P={},M={};M[C]=function(){return this};var T=Object.getPrototypeOf,N=T&&T(T(m([])));N&&N!==v&&_.call(N,C)&&(M=N);var F=i.prototype=r.prototype=Object.create(M);o.prototype=F.constructor=i,i.constructor=o,i[x]=o.displayName="GeneratorFunction",w.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},w.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,x in e||(e[x]="GeneratorFunction")),e.prototype=Object.create(F),e},w.awrap=function(e){return{__await:e}},l(s.prototype),s.prototype[b]=function(){return this},w.AsyncIterator=s,w.async=function(e,t,a,r){var o=new s(n(e,t,a,r));return w.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},l(F),F[x]="Generator",F[C]=function(){return this},F.toString=function(){return"[object Generator]"},w.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},w.values=m,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(u),!e)for(var t in this)"t"===t.charAt(0)&&_.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=h)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,a){return o.type="throw",o.arg=e,n.next=t,a&&(n.method="next",n.arg=h),!!a}if(this.done)throw e;for(var n=this,a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],o=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var i=_.call(r,"catchLoc"),l=_.call(r,"finallyLoc");if(i&&l){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&_.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,P):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),P},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),u(n),P}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;u(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:m(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=h),P}}}(function(){return this}()||Function("return this")())},182:function(e,t,n){"use strict";t.__esModule=!0;var a=n(183),r=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=function(e){return function(){var t=e.apply(this,arguments);return new r.default(function(e,n){function a(o,i){try{var l=t[o](i),s=l.value}catch(e){return void n(e)}if(!l.done)return r.default.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}return a("next")})}}},183:function(e,t,n){e.exports={default:n(184),__esModule:!0}},184:function(e,t,n){n(59),n(34),n(36),n(185),n(193),n(194),e.exports=n(0).Promise},185:function(e,t,n){"use strict";var a,r,o,i,l=n(14),s=n(1),c=n(53),p=n(60),d=n(12),u=n(10),f=n(54),m=n(186),g=n(187),h=n(152),v=n(153).set,_=n(189)(),y=n(149),C=n(154),b=n(190),x=n(155),A=s.TypeError,w=s.process,E=w&&w.versions,S=E&&E.v8||"",k=s.Promise,B="process"==p(w),P=function(){},M=r=y.f,T=!!function(){try{var e=k.resolve(1),t=(e.constructor={})[n(2)("species")]=function(e){e(P,P)};return(B||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t&&0!==S.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(e){}}(),N=function(e){var t;return!(!u(e)||"function"!=typeof(t=e.then))&&t},F=function(e,t){if(!e._n){e._n=!0;var n=e._c;_(function(){for(var a=e._v,r=1==e._s,o=0;n.length>o;)!function(t){var n,o,i,l=r?t.ok:t.fail,s=t.resolve,c=t.reject,p=t.domain;try{l?(r||(2==e._h&&O(e),e._h=1),!0===l?n=a:(p&&p.enter(),n=l(a),p&&(p.exit(),i=!0)),n===t.promise?c(A("Promise-chain cycle")):(o=N(n))?o.call(n,s,c):s(n)):c(a)}catch(e){p&&!i&&p.exit(),c(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&D(e)})}},D=function(e){v.call(s,function(){var t,n,a,r=e._v,o=R(e);if(o&&(t=C(function(){B?w.emit("unhandledRejection",r,e):(n=s.onunhandledrejection)?n({promise:e,reason:r}):(a=s.console)&&a.error&&a.error("Unhandled promise rejection",r)}),e._h=B||R(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},R=function(e){return 1!==e._h&&0===(e._a||e._c).length},O=function(e){v.call(s,function(){var t;B?w.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},L=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),F(t,!0))},j=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw A("Promise can't be resolved itself");(t=N(e))?_(function(){var a={_w:n,_d:!1};try{t.call(e,c(j,a,1),c(L,a,1))}catch(e){L.call(a,e)}}):(n._v=e,n._s=1,F(n,!1))}catch(e){L.call({_w:n,_d:!1},e)}}};T||(k=function(e){m(this,k,"Promise","_h"),f(e),a.call(this);try{e(c(j,this,1),c(L,this,1))}catch(e){L.call(this,e)}},a=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},a.prototype=n(191)(k.prototype,{then:function(e,t){var n=M(h(this,k));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=B?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&F(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new a;this.promise=e,this.resolve=c(j,e,1),this.reject=c(L,e,1)},y.f=M=function(e){return e===k||e===i?new o(e):r(e)}),d(d.G+d.W+d.F*!T,{Promise:k}),n(19)(k,"Promise"),n(192)("Promise"),i=n(0).Promise,d(d.S+d.F*!T,"Promise",{reject:function(e){var t=M(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(l||!T),"Promise",{resolve:function(e){return x(l&&this===i?k:this,e)}}),d(d.S+d.F*!(T&&n(156)(function(e){k.all(e).catch(P)})),"Promise",{all:function(e){var t=this,n=M(t),a=n.resolve,r=n.reject,o=C(function(){var n=[],o=0,i=1;g(e,!1,function(e){var l=o++,s=!1;n.push(void 0),i++,t.resolve(e).then(function(e){s||(s=!0,n[l]=e,--i||a(n))},r)}),--i||a(n)});return o.e&&r(o.v),n.promise},race:function(e){var t=this,n=M(t),a=n.reject,r=C(function(){g(e,!1,function(e){t.resolve(e).then(n.resolve,a)})});return r.e&&a(r.v),n.promise}})},186:function(e,t){e.exports=function(e,t,n,a){if(!(e instanceof t)||void 0!==a&&a in e)throw TypeError(n+": incorrect invocation!");return e}},187:function(e,t,n){var a=n(53),r=n(150),o=n(151),i=n(9),l=n(55),s=n(56),c={},p={},t=e.exports=function(e,t,n,d,u){var f,m,g,h,v=u?function(){return e}:s(e),_=a(n,d,t?2:1),y=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(f=l(e.length);f>y;y++)if((h=t?_(i(m=e[y])[0],m[1]):_(e[y]))===c||h===p)return h}else for(g=v.call(e);!(m=g.next()).done;)if((h=r(g,_,m.value,t))===c||h===p)return h};t.BREAK=c,t.RETURN=p},188:function(e,t){e.exports=function(e,t,n){var a=void 0===n;switch(t.length){case 0:return a?e():e.call(n);case 1:return a?e(t[0]):e.call(n,t[0]);case 2:return a?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return a?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return a?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},189:function(e,t,n){var a=n(1),r=n(153).set,o=a.MutationObserver||a.WebKitMutationObserver,i=a.process,l=a.Promise,s="process"==n(18)(i);e.exports=function(){var e,t,n,c=function(){var a,r;for(s&&(a=i.domain)&&a.exit();e;){r=e.fn,e=e.next;try{r()}catch(a){throw e?n():t=void 0,a}}t=void 0,a&&a.enter()};if(s)n=function(){i.nextTick(c)};else if(!o||a.navigator&&a.navigator.standalone)if(l&&l.resolve){var p=l.resolve(void 0);n=function(){p.then(c)}}else n=function(){r.call(a,c)};else{var d=!0,u=document.createTextNode("");new o(c).observe(u,{characterData:!0}),n=function(){u.data=d=!d}}return function(a){var r={fn:a,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}},190:function(e,t,n){var a=n(1),r=a.navigator;e.exports=r&&r.userAgent||""},191:function(e,t,n){var a=n(7);e.exports=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:a(e,r,t[r]);return e}},192:function(e,t,n){"use strict";var a=n(1),r=n(0),o=n(6),i=n(4),l=n(2)("species");e.exports=function(e){var t="function"==typeof r[e]?r[e]:a[e];i&&t&&!t[l]&&o.f(t,l,{configurable:!0,get:function(){return this}})}},193:function(e,t,n){"use strict";var a=n(12),r=n(0),o=n(1),i=n(152),l=n(155);a(a.P+a.R,"Promise",{finally:function(e){var t=i(this,r.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return l(t,e()).then(function(){return n})}:e,n?function(n){return l(t,e()).then(function(){throw n})}:e)}})},194:function(e,t,n){"use strict";var a=n(12),r=n(149),o=n(154);a(a.S,"Promise",{try:function(e){var t=r.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},260:function(e,t,n){"use strict";t.__esModule=!0;var a=n(261),r=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=function(e,t,n){return t in e?(0,r.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},261:function(e,t,n){e.exports={default:n(262),__esModule:!0}},262:function(e,t,n){n(263);var a=n(0).Object;e.exports=function(e,t,n){return a.defineProperty(e,t,n)}},263:function(e,t,n){var a=n(12);a(a.S+a.F*!n(4),"Object",{defineProperty:n(6).f})},286:function(e,t,n){"use strict";var a=n(30),r=n.n(a),o=n(179),i=n.n(o),l=n(182),s=n.n(l),c=n(358),p=n(57),d=n(362),u=n(32);n.n(u);t.a={components:{searchLan:p.a,printModel:c.a},mixins:[u.cacheMixin.cacheMixin],data:function(){var e=function(e,t,n){var a=/^[1-9]\d*$/;return t?a.test(t)?n():n(new TypeError("请输入小于5位的正整数！")):n(new TypeError("请输入数量！"))};return{cacheField:["form","pageConfig","tableData","searchParam","oparaOptions","configData"],subComName:"printList",modelName:"printManagement",tableData:[],printVisible:!1,rePrintVisible:!1,searchParam:{},oparaOptions:[],form:{applyCode:"",couponName:"",num:"",opara:"",beginSeq:"",endSeq:"",templateName:"",templateId:""},searchConfig:[{name:"申请单号",keyName:"applyCode",type:"input",value:""},{name:"票券名称",keyName:"couponName",type:"input",value:""},{name:"创建人",keyName:"createname",type:"input",value:""},{keyName:"salesMode",name:"销售方式",type:"select",value:"",options:[{label:"全部",value:""},{label:"影院零售",value:"1"},{label:"营销活动",value:"2"},{label:"大客户",value:"3"},{label:"第三方合作",value:"4"}]}],tableConfig:[{label:"申请单号",prop:"applyCode",width:"180"},{label:"票券名称",prop:"couponName",width:"100"},{label:"客户名称",prop:"custName"},{label:"票券类型",prop:"typeName"},{label:"申请日期",prop:"createTime"},{label:"数量",prop:"couponCount"},{label:"单价",prop:"couponPrice"},{label:"已打印数量",prop:"printCount"},{label:"未打印数量",prop:"notPrintNum"},{label:"最后打印序列号",prop:"lastPrintSeq",width:"110"},{label:"使用票版",prop:"names"},{label:"操作",width:"180",hasTemplate:!0,fixed:"right"}],pageConfig:{pageNo:1,pageSizes:[10,20,30,40],pageSize:10,total:15},rules:{num:[{required:!0,validator:e,trigger:"blur"}],beginSeq:[{required:!0,validator:e,trigger:"blur"}],endSeq:[{required:!0,validator:e,trigger:"blur"}],opara:{required:!0,message:"请选择打印设备",trigger:"change"},templateName:{required:!0,message:"请选择票版",trigger:"change"}},configData:[]}},created:function(){this.search(),this.isExistDefaultTemplate()},methods:{setSearch:function(e){this.searchParam=e},setParams:function(e){console.log("有参数",e),e=e||"";var t={},n=this.searchParam;return["createname","couponName","salesMode","applyCode"].forEach(function(a){t[a]||(t[a]=e[a]?e[a]:n[a]?n[a]:"")}),e&&(this.pageConfig.pageNo=1),t.pageNo=this.pageConfig.pageNo,t.pageSize=this.pageConfig.pageSize,t},search:function(e){var t=this;console.log(e);var n=this.setParams(e);this.$ccmList.findCouponByCondition(n).then(function(e){200==e.code&&(t.tableData=e.data.list,t.pageConfig.total=e.data.pageNum)})},isExistDefaultTemplate:function(){var e=this;this.$ccmList.selectDefault().then(function(t){200==t.code&&(e.form.templateName=t.data.name,e.form.templateId=t.data.id)})},printMethods:function(e,t){"undefined"!=typeof app&&app.sendMessage?(console.log(app),this.form.applyCode=t.applyCode,this.form.couponName=t.couponName,"print"==e?this.printVisible=!0:"rePrint"==e&&(this.rePrintVisible=!0)):this.$confirm("浏览器下不支持打印功能，请运行‘慧影云影院收益管理平台’客户端进行票券打印，如需下载‘慧影云影院收益管理平台’，请点击‘下载’按钮。","打印提示",{title:"打印提示",distinguishCancelAndClose:!0,confirmButtonText:"下载",cancelButtonText:"取消"}).then(function(){var e=document.createElement("a");e.download="慧影云影院收益管理平台",e.style.display="none",e.href="http://www.oristarcloud.com/software/download.html",document.body.appendChild(e),e.click(),URL.revokeObjectURL(e.href),document.body.removeChild(e)})},printFnc:function(e){var t=this;return s()(i.a.mark(function n(){var a,r,o,l,s,c,p,d,u,f;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.form,r={code:-1},o={},l=!1,"print"!=e){n.next=18;break}if(t.$refs[""+e].validate(function(e){l=e}),!l){n.next=15;break}for(s=["templateId","applyCode","num"],c={},p=0;p<s.length;p++)a[s[p]]&&(c[""+s[p]]=a[""+s[p]]);return n.next=12,t.$ccmList.ticketPrinting(c);case 12:r=n.sent,n.next=16;break;case 15:return n.abrupt("return");case 16:n.next=30;break;case 18:if("rePrint"!=e){n.next=30;break}if(t.$refs[""+e].validate(function(e){l=e}),!l){n.next=29;break}for(d=["templateId","applyCode","couponName","beginSeq","endSeq"],u={},f=0;f<d.length;f++)a[d[f]]&&(u[""+d[f]]=a[""+d[f]]);return n.next=26,t.$ccmList.reprint(u);case 26:r=n.sent,n.next=30;break;case 29:return n.abrupt("return");case 30:if(200!=r.code){n.next=34;break}o=r.data,n.next=35;break;case 34:return n.abrupt("return",t.$message({type:"error",message:r.msg?r.msg:"打印失败！"}));case 35:console.log("数据",o),console.log("配置 ",a),t.printCoupon(o,0);case 38:case"end":return n.stop()}},n,t)}))()},printCoupon:function(e,t){var n=this,a=e[t];d.a.printTicket("coupon_print",a,this.configData,function(a){console.log(a);var r="warning",o="打印第"+(t+1)+"张票券失败！";0==a[0]&&(r="success",o="成功打印第"+(t+1)+"张票券！"),n.$message({type:r,message:o}),t++,t<e.length?n.printCoupon(e,t):(n.$message({type:"success",message:"打印结束！"}),n.search(),n.printVisible=!1,n.rePrintVisible=!1)})},selecteTemplate:function(){this.$refs.tamplate.openDialog(this.form.templateId)},selecteTemplateCallBack:function(e){this.form.templateName=e.name,this.form.templateId=e.id},clearInputValue:function(){this.form.templateName="",this.form.templateId=""},handleSizeChange:function(e){this.pageConfig.pageSize=e,this.search()},handleCurrentChange:function(e){this.pageConfig.pageNo=e,this.search()},oparaChange:function(e){this.oparaOptions.forEach(function(t){t.code==e?(t.selected=!0,console.log("trueitem",t)):(t.selected=!1,console.log("falseitem",t))}),this.configData.coupon_print=JSON.parse(r()(this.oparaOptions)),console.log("configData",this.configData),d.a.writeTerminalParameter(this.configData,function(e){console.log(e)})}},mounted:function(){var e=this;d.a.readTerminalParameter(function(t){e.configData=t,e.oparaOptions=t.coupon_print,console.log("终端：",t)})}}},287:function(e,t,n){"use strict";t.a={props:{innerData:{type:Object,default:function(){},required:!1}},data:function(){return{framedialogVisible:!1,pageConfig:{total:0,pageSize:10,pageNo:1},tableList:{data:[],title:[{lable:"票版名称",prop:"name"}]},selectedId:"",selectedRows:null}},created:function(){},methods:{openDialog:function(e){this.framedialogVisible=!0,this.selectedId=e,this.searchData()},closeDialog:function(){this.framedialogVisible=!1},showRow:function(e){var t=this;this.selectedRows=e,t.$nextTick(function(){this.selectedId=e.id})},confirmData:function(){var e=this;if(!this.selectedRows)return this.$message({type:"warning",message:"请选择一个票版！"});e.$emit("selecteTemplateCallBack",this.selectedRows),this.framedialogVisible=!1},searchFunc:function(){this.searchData()},selectable:function(e){return"WAIT_APPROVE"===e.approveStatus},searchData:function(){var e=this,t={pageNo:this.pageConfig.pageNo,pageSize:this.pageConfig.pageSize};this.$ccmList.selectmodel(t).then(function(t){t&&200===t.code&&(e.pageConfig.total=t.data.pageNum,e.tableList.data=t.data.list)}).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.pageConfig.pageSize=e,this.searchData()},handleCurrentChange:function(e){this.pageConfig.pageNo=e,this.searchData()},submitForm:function(e){}}}},356:function(e,t,n){var a=n(357);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(123)("177651c1",a,!0,{})},357:function(e,t,n){t=e.exports=n(122)(!0),t.push([e.i,"\n[data-v-3a3af512].pageStyle .el-input .el-input__inner {\n  font-size: 12px !important;\n  height: 24px !important;\n  color: #666666;\n}\n[data-v-3a3af512].pageStyle .el-pagination__sizes {\n  position: relative;\n  bottom: 1px;\n}\n[data-v-3a3af512].pageStyle .el-pagination .el-pagination__jump {\n  margin: 0 24px;\n}\n[data-v-3a3af512].pageStyle .el-pagination .el-pagination__total,[data-v-3a3af512].pageStyle .el-pagination .btn-prev,[data-v-3a3af512].pageStyle .el-pagination .el-pager li,[data-v-3a3af512].pageStyle .el-pagination .btn-next,[data-v-3a3af512].pageStyle .el-pagination .el-pagination__jump,[data-v-3a3af512].pageStyle .el-pagination .el-pagination__sizes {\n  font-size: 12px !important;\n  height: 24px;\n  line-height: 24px;\n  min-width: 24px;\n  border-radius: 4px;\n  background: #ffffff;\n  color: #666666;\n}\n[data-v-3a3af512].pageStyle .el-pagination .btn-prev,[data-v-3a3af512].pageStyle .el-pagination .el-pager li,[data-v-3a3af512].pageStyle .el-pagination .btn-next {\n  border: 1px solid #BCBCBC;\n}\nsection[data-v-3a3af512] {\n  margin-bottom: 15px;\n}\n.addBtn[data-v-3a3af512] {\n  width: 80px;\n  padding-left: 0;\n  padding-right: 0;\n  height: 32px;\n  font-size: 12px;\n  border-color: #3B74FF;\n  color: #3B74FF;\n}\n.autocollorr[data-v-3a3af512] {\n  color: red;\n}\n.footer-are[data-v-3a3af512] {\n  text-align: center;\n  border-top: 1px #e5e5e5 solid;\n  padding-top: 20px;\n}\n[data-v-3a3af512] .el-dialog__body {\n  padding: 20px 0;\n}\n[data-v-3a3af512] .el-form {\n  padding: 0 10px;\n}\n[data-v-3a3af512] .el-dialog__header .el-dialog__title {\n  padding-bottom: 5px;\n  width: 100%;\n  display: inline-block;\n  border-bottom: 1px solid #e5e5e5;\n}\n[data-v-3a3af512] .form-print .el-input {\n  width: 220px;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/ccm/src/views/coupon/printManagement/index.vue"],names:[],mappings:";AACA;EACE,2BAA2B;EAC3B,wBAAwB;EACxB,eAAe;CAChB;AACD;EACE,mBAAmB;EACnB,YAAY;CACb;AACD;EACE,eAAe;CAChB;AACD;EACE,2BAA2B;EAC3B,aAAa;EACb,kBAAkB;EAClB,gBAAgB;EAChB,mBAAmB;EACnB,oBAAoB;EACpB,eAAe;CAChB;AACD;EACE,0BAA0B;CAC3B;AACD;EACE,oBAAoB;CACrB;AACD;EACE,YAAY;EACZ,gBAAgB;EAChB,iBAAiB;EACjB,aAAa;EACb,gBAAgB;EAChB,sBAAsB;EACtB,eAAe;CAChB;AACD;EACE,WAAW;CACZ;AACD;EACE,mBAAmB;EACnB,8BAA8B;EAC9B,kBAAkB;CACnB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,oBAAoB;EACpB,YAAY;EACZ,sBAAsB;EACtB,iCAAiC;CAClC;AACD;EACE,aAAa;CACd",file:"index.vue",sourcesContent:["\n[data-v-3a3af512].pageStyle .el-input .el-input__inner {\n  font-size: 12px !important;\n  height: 24px !important;\n  color: #666666;\n}\n[data-v-3a3af512].pageStyle .el-pagination__sizes {\n  position: relative;\n  bottom: 1px;\n}\n[data-v-3a3af512].pageStyle .el-pagination .el-pagination__jump {\n  margin: 0 24px;\n}\n[data-v-3a3af512].pageStyle .el-pagination .el-pagination__total,[data-v-3a3af512].pageStyle .el-pagination .btn-prev,[data-v-3a3af512].pageStyle .el-pagination .el-pager li,[data-v-3a3af512].pageStyle .el-pagination .btn-next,[data-v-3a3af512].pageStyle .el-pagination .el-pagination__jump,[data-v-3a3af512].pageStyle .el-pagination .el-pagination__sizes {\n  font-size: 12px !important;\n  height: 24px;\n  line-height: 24px;\n  min-width: 24px;\n  border-radius: 4px;\n  background: #ffffff;\n  color: #666666;\n}\n[data-v-3a3af512].pageStyle .el-pagination .btn-prev,[data-v-3a3af512].pageStyle .el-pagination .el-pager li,[data-v-3a3af512].pageStyle .el-pagination .btn-next {\n  border: 1px solid #BCBCBC;\n}\nsection[data-v-3a3af512] {\n  margin-bottom: 15px;\n}\n.addBtn[data-v-3a3af512] {\n  width: 80px;\n  padding-left: 0;\n  padding-right: 0;\n  height: 32px;\n  font-size: 12px;\n  border-color: #3B74FF;\n  color: #3B74FF;\n}\n.autocollorr[data-v-3a3af512] {\n  color: red;\n}\n.footer-are[data-v-3a3af512] {\n  text-align: center;\n  border-top: 1px #e5e5e5 solid;\n  padding-top: 20px;\n}\n[data-v-3a3af512] .el-dialog__body {\n  padding: 20px 0;\n}\n[data-v-3a3af512] .el-form {\n  padding: 0 10px;\n}\n[data-v-3a3af512] .el-dialog__header .el-dialog__title {\n  padding-bottom: 5px;\n  width: 100%;\n  display: inline-block;\n  border-bottom: 1px solid #e5e5e5;\n}\n[data-v-3a3af512] .form-print .el-input {\n  width: 220px;\n}\n"],sourceRoot:""}])},358:function(e,t,n){"use strict";function a(e){n(359)}var r=n(287),o=n(361),i=n(3),l=a,s=i(r.a,o.a,!1,l,"data-v-25e69d71",null);t.a=s.exports},359:function(e,t,n){var a=n(360);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(123)("5c53d03a",a,!0,{})},360:function(e,t,n){t=e.exports=n(122)(!0),t.push([e.i,'\n.dialog-footer[data-v-25e69d71] {\n  text-align: center;\n  margin-top: 10px;\n}\n.page-wrap[data-v-25e69d71] {\n  text-align: center;\n  padding: 5px 0 10px 0;\n}\n.choose-body[data-v-25e69d71] {\n  margin-top: 11px;\n  border: 1px solid #e5e5e5;\n  overflow-y: auto;\n}\n[data-v-25e69d71] .el-dialog__body {\n  padding-top: 0px;\n}\n[data-v-25e69d71] .el-dialog__header::after {\n  content: "";\n  display: block;\n  width: 100%;\n  height: 1px;\n  background: #e5e5e5;\n}\n',"",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/ccm/src/dialogs/printModel/index.vue"],names:[],mappings:";AACA;EACE,mBAAmB;EACnB,iBAAiB;CAClB;AACD;EACE,mBAAmB;EACnB,sBAAsB;CACvB;AACD;EACE,iBAAiB;EACjB,0BAA0B;EAC1B,iBAAiB;CAClB;AACD;EACE,iBAAiB;CAClB;AACD;EACE,YAAY;EACZ,eAAe;EACf,YAAY;EACZ,YAAY;EACZ,oBAAoB;CACrB",file:"index.vue",sourcesContent:['\n.dialog-footer[data-v-25e69d71] {\n  text-align: center;\n  margin-top: 10px;\n}\n.page-wrap[data-v-25e69d71] {\n  text-align: center;\n  padding: 5px 0 10px 0;\n}\n.choose-body[data-v-25e69d71] {\n  margin-top: 11px;\n  border: 1px solid #e5e5e5;\n  overflow-y: auto;\n}\n[data-v-25e69d71] .el-dialog__body {\n  padding-top: 0px;\n}\n[data-v-25e69d71] .el-dialog__header::after {\n  content: "";\n  display: block;\n  width: 100%;\n  height: 1px;\n  background: #e5e5e5;\n}\n'],sourceRoot:""}])},361:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ccm_dialog"},[n("el-dialog",{attrs:{title:"选择打印票版",visible:e.framedialogVisible,width:"32%","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.framedialogVisible=t}}},[n("div",{staticClass:"choose-body"},[n("el-table",{ref:"tableListRef",attrs:{data:e.tableList.data,height:"308px","highlight-current-row":""},on:{"row-click":e.showRow}},[n("el-table-column",{attrs:{label:"选择",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-radio",{staticClass:"radio",attrs:{label:t.row.id},model:{value:e.selectedId,callback:function(t){e.selectedId=t},expression:"selectedId"}},[e._v(" ")])]}}])}),e._v(" "),e._l(e.tableList.title,function(t,a){return[n("el-table-column",{key:a,attrs:{prop:t.prop,label:t.lable,"show-overflow-tooltip":""}},[e._v(e._s(t.label))])]})],2),e._v(" "),n("div",{staticClass:"page-wrap"},[n("el-pagination",{attrs:{background:"","current-page":e.pageConfig.pageNo,"page-sizes":[10,25,50,100],"page-size":e.pageConfig.pageSize,layout:"prev, pager, next, jumper",total:e.pageConfig.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmData()}}},[e._v("确 定")]),e._v(" "),n("el-button",{on:{click:function(t){return e.closeDialog(!1)}}},[e._v("取 消")])],1)])],1)},r=[],o={render:a,staticRenderFns:r};t.a=o},362:function(e,t,n){"use strict";function a(e){return u()(e)}function r(e){if("film_print"==e){var t="func_"+(new Date).getTime()+f.printFilmTicketCount++;return f.printFilmTicketCount>65536&&(f.printFilmTicketCount=1),t}return"func_"+(new Date).getTime()+i()}function o(e){for(var t=null,n=0;n<e.length;n++)if(e[n].selected){t=e[n].code;break}return null==t&&e.length>0&&(t=e[0].code),t}function i(){for(var e="",t=1;t<=32;t++){e+=Math.floor(16*Math.random()).toString(16),8!=t&&12!=t&&16!=t&&20!=t||(e+="-")}return e}function l(e,t){readTerminalParameter(function(n){if(alert("进入获取硬件信息方法"),alert("type==="+e),alert(n),0==e||2==e){alert("获取读卡器硬件信息");var a=f.member_card_kind_code,r=getSession(a);if(alert("memberCardKindCodeObj===="+r),null==r){var o="kind_code="+a;alert("postData==="+o);var i={url:"cms.basis.common.GetMemberCardKind",data:o,async:!1,request:"data",success:function(r){if(alert("退票打印2"),null!=$.trim(r)){var o=r.result.cardAuthPwd,i=r.result.cardAuthInitPwd;alert("读卡密码====="+o),putSession(a,r),s(e,n,o,i,t),alert("退票打印5")}else t(null)}};ajax_request(i)}else s(e,n,r.result.cardAuthPwd,null,t);alert("完成获取读卡器硬件信息")}else alert("获取读卡器以外的硬件信息"),s(e,n,null,null,t)})}function s(e,t,n,a,r){var o=null;if(0==e){var i=t.card_reader;if(null==i&&0==i.length)r(null);else{for(var l=0;l<i.length;l++){var s=i[l],c=s.selected,p=!1;p="string"==typeof c?"true"==c:c,p&&(o={},o.name=s.name,o.code=s.code,o.pwd=n,o.initPwd=a)}null==o&&(o={},o.name=i[0].name,o.code=i[0].code,o.pwd=n,o.initPwd=a),r(o)}}else if(1==e){alert("退票打印3");var d=t.film_print;if(null==d&&0==d.lengtg)r(null);else{for(var l=0;l<d.length;l++){var u=d[l],c=u.selected,p=!1;p="string"==typeof c?"true"==c:c,p&&(o={},o.name=u.name,o.pwd=n,o.code=u.code),alert("退票打印4")}null==o&&(o={},o.name=d[0].name,o.code=d[0].code,o.pwd=n,o.initPwd=a),r(o)}}else if(2==e){var f=t.keyboard;if(null==f&&0==f.lengtg)r(null);else{for(var l=0;l<f.length;l++){var m=f[l],c=m.selected,p=!1;p="string"==typeof c?"true"==c:c,p&&(o={},o.name=m.name,o.code=m.code,o.pwd=n)}null==o&&(o={},o.name=f[0].name,o.code=f[0].code,o.pwd=n,o.initPwd=a),r(o)}}else if(3==e){var g=t.bill_print;if(null==g&&0==g.length)r(null);else{for(var l=0;l<g.length;l++){var h=g[l],c=h.selected,p=!1;p="string"==typeof c?"true"==c:c,p&&(o={},o.name=h.name,o.code=h.code,o.pwd=n)}null==o&&(o={},o.name=g[0].name,o.code=g[0].code,o.pwd=n,o.initPwd=a),r(o)}}else if(4==e){alert("钱箱");var v=t.cash_box;if(null==v&&0==v.length)r(null);else{for(var l=0;l<v.length;l++){var _=v[l],c=_.selected,p=!1;p="string"==typeof c?"true"==c:c,p&&(o={},o.name=_.name,o.pwd=n,o.code=_.code),alert("钱箱5")}null==o&&(o={},o.name=v[0].name,o.code=v[0].code,o.pwd=n,o.initPwd=a),window.$appConfigData="device",r(o)}}else if(5==e){alert("银联pos机类型");var y=rs.pos_type;if(null==y||0==y.length)r(null);else{for(var l=0;l<y.length;l++){var _=y[l],c=_.selected,p=!1;p="string"==typeof c?"true"==c:c,p&&(o={},o.name=_.name,o.pwd=n,o.code=_.code),alert("钱箱5")}null==o&&(o={},o.name=y[0].name,o.code=y[0].code,o.pwd=n,o.initPwd=a),r(o)}}else if(6==e){alert("银联pos机类型 端口");var C=rs.pos_com;null==C?r(null):(o={},o.name="",o.pwd=n,o.code=C,alert("银联pos机类型 端口"),null==o&&(o={},o.name="",o.code=C,o.pwd=n,o.initPwd=a),r(o))}}var c=n(260),p=n.n(c),d=n(30),u=n.n(d),f={};f.member_card_kind_code="STAR";f.quit=function(){if("undefined"==typeof app)return alert("浏览器不支持此功能"),!1;if(!app.sendMessage)return alert("浏览器不支持此功能"),!1;app.setMessageCallback("exitapp_reponse",function(e,t){});app.sendMessage("Common_REQUEST",["exitapp_reponse","exitapp",""])},f.toMinimize=function(){if("undefined"==typeof app)return alert("浏览器不支持此功能"),!1;if(!app.sendMessage)return alert("浏览器不支持此功能"),!1;app.sendMessage("Common_REQUEST",["Common_REQUEST_001","miniapp",""])},f.printFilmTicketCount=1,f.printTicket=function(e,t,n,i){if("undefined"==typeof app)return void i("浏览器不支持此功能");if(!app.sendMessage)return void i("浏览器不支持此功能");if(!e&&("film_print"!=e||"bill_print"!=e||"coupon_print"!=e))return void i("打票类型有误");if("film_print"==e){var l=n.film_print_offset.x,s=n.film_print_offset.y;if(t.ticket_element&&t.ticket_element.length>0)for(var c in t.ticket_element)t.ticket_element[c].x=1*t.ticket_element[c].x+parseInt(l),t.ticket_element[c].y=1*t.ticket_element[c].y+parseInt(s)}if(!n)return void i("终端数据为空");if(!t)return void i("打印数据为空");var p=n[e];if(!p)return void i("找不到打印终端配置项");var d=o(p);if(null==d)return void i("未找到打印机.");var u=r(e),f=a(t);app.sendMessage("Ticket_Print_REQUEST",[u,f,d]);try{app.setMessageCallback(u,function(e,t){i(t)})}catch(e){i(e)}},f.secKeyBoard=function(e,t,n){if("undefined"==typeof app)return void n("浏览器不支持此功能");if(!app.sendMessage)return void n("浏览器不支持此功能");if(!e&&("open"!=e||"close"!=e))return void n("操作键盘类型有误");if(!t)return void n("终端数据为空");var a=r(),i=t.keyboard;if(!i)return void n("找不到键盘终端配置项");var l=o(i);if(!l)return void n("未找到键盘");"close"==e&&(l+="_CLOSE"),app.sendMessage("SecKeyBoard_Input_REQUEST",[a,l]);try{app.setMessageCallback(a,function(e,t){n(t)})}catch(e){n(e)}},f.readCard2=function(e){var t="func"+(new Date).getTime()+i(),n={};l(0,function(a){alert("88888888888888885555555555555============="),alert(a),alert(a.code.split("&")[0]),alert(a.pwd),null==a?(n.status=-1,n.msg="找不到合适的设备",e(n)):is_reading_member||(is_reading_member=!0,app.setMessageCallback(t,function(t,r){alert("-------------------------------------------------"),alert(t),alert(r),r&&r.length>0?0==r[0]?(n.status=0,n.data=r[1]):(n.status=-1,n.msg=r[1]):(n.status=-1,n.msg="系统异常，请联系管理员"),f.member_card_kind_code="STAR",is_reading_member=!1,e(n),alert("----\x3e读餐卡返回状态:---\x3e"+a.code+"-------\x3e"+a.pwd+"------\x3e"+n.status+"----\x3e"+n.data+"------\x3e"+n.msg)}),app.sendMessage("Card_ReadSN_REQUEST",[t,a.code.split("&")[0]]))})},f.readCard1=function(e){var t="func"+(new Date).getTime()+i(),n={};l(0,function(a){alert("88888888888888885555555555555============="),alert(a),alert(a.code.split("&")[1]),alert(a.pwd),null==a?(n.status=-1,n.msg="找不到合适的设备",e(n)):is_reading_member||(is_reading_member=!0,app.setMessageCallback(t,function(t,r){var o=r[0].toString();alert("-------------------------------------------------"),alert(r),alert(o),"-1"==o?(n.status=-1,n.msg=r[1].toString(),""==n.msg.trim()&&(n.msg="系统异常，请联系管理员")):(n.status=0,n.data=r[0].toString()),f.member_card_kind_code="STAR",is_reading_member=!1,e(n),alert("----\x3e读卡返回状态:---\x3e"+a.code+"-------\x3e"+a.pwd+"------\x3e"+n.status+"----\x3e"+n.data+"------\x3e"+n.msg)}),app.sendMessage("Card_ReadNum_REQUEST",[t,a.code.split("&")[1],a.pwd]))})},f.readCard=function(e,t){if("undefined"==typeof app)return void t("浏览器不支持此功能");if(!app.sendMessage)return void t("浏览器不支持此功能");if(!e)return void t("终端数据为空");var n=e.card_reader;if(!n)return void callback("找不到读卡器终端配置项");var a=r(),i="383333333030",l=o(n);if(null==l)return void callback("未找到读卡器");"FHJY&GWI-60BR"==l?app.sendMessage("Card_ReadNum_REQUEST",[a,l.split("&")[0],i]):app.sendMessage("Card_ReadNum_REQUEST",[a,l,i]);try{app.setMessageCallback(a,function(e,n){t(n)})}catch(e){t(e)}},f.writeCard=function(e,t){if("undefined"==typeof app)return void t("浏览器不支持此功能");if(!app.sendMessage)return void t("浏览器不支持此功能");if(!e)return void t("终端数据为空");if(!e.card_reader)return void t("读卡终端数据为空");var n=r(),a=o(e.card_reader);app.sendMessage("Card_WriteNum_REQUEST",[n,a,"383333333030","Zy4vZtBgzc1rjjb","","","123456"]);try{app.setMessageCallback(n,function(e,n){t(n)})}catch(e){t(e)}},f.resetCardPwd=function(e,t){if("undefined"==typeof app)return void t("浏览器不支持此功能");if(!e)return void t("终端数据为空");if(!e.card_reader)return void t("读卡终端数据为空");var n=r(),a=r(),i="383333333030",l=o(e.card_reader);app.sendMessage("Common_ChangeCardPwd_REQUEST",[n,l,"FFFFFFFFFFFF",i]),app.setMessageCallback(n,function(e,n){0==n[0]?t(n):(app.sendMessage("Common_ChangeCardPwd_REQUEST",[a,l,i,i]),app.setMessageCallback(a,function(e,n){t(n)}))})},f.reIntitReadCard=function(e){var t=null;if(e.length>0){for(var n=0;n<e.length;n++){var a=e[n],r=a.selected,o=!1;o="string"==typeof r?"true"==r:r,o&&(t={},t.name=a.name,t.code=a.code)}null==t&&(t={},t.name=e[0].name,t.code=e[0].code)}return t},f.readTerminalParameter=function(e){if("function"==typeof e)if("undefined"!=typeof app&&app.setMessageCallback){var t="readconfig_reponse_"+i();app.setMessageCallback(t,function(t,n){if(0==n[0]){var a=JSON.parse(n[2]),r=a.film_print_offset;if(void 0===r||null==r){var o={x:0,y:0};a.film_print_offset=o}e(a)}else e(n)});app.sendMessage("Common_DataRead_REQUEST",[t,"pos"])}else{var n,a=null;n={film_print_offset:{x:0,y:0},bill_print:[{code:"Send To OneNote 2016",name:"Send To OneNote 2016",selected:!1},{code:"Microsoft XPS Document Writer",name:"Microsoft XPS Document Writer",selected:!0},{code:"Microsoft Print to PDF",name:"Microsoft Print to PDF",selected:!1},{code:"Fax",name:"Fax",selected:!1}],card_reader:[{code:"S8",name:"峰华_S8",selected:!1},{code:"E7",name:"峰华_E7",selected:!0},{code:"Z9",name:"德卡_Z9",selected:!1},{code:"QM8",name:"德卡_QM8",selected:!1},{code:"QM8_OSK",name:"德卡_QM8_OSK",selected:!1},{code:"FKSF2",name:"方卡_SF2",selected:!1},{code:"FKSF2C",name:"方卡_SF2C",selected:!1},{code:"TYRM",name:"明华_R330",selected:!1},{code:"FHJY",name:"德生F3RF",selected:!1},{code:"FHJY&GWI-60BR",name:"德生F3RF+长城GWI-60BR",selected:!1},{code:"SENOR",name:"星乔读卡器",selected:!1}],cash_box:[{code:"Send To OneNote 2016",name:"Send To OneNote 2016",selected:!1},{code:"Microsoft XPS Document Writer",name:"Microsoft XPS Document Writer",selected:!1},{code:"Microsoft Print to PDF",name:"Microsoft Print to PDF",selected:!1},{code:"Fax",name:"Fax",selected:!1},{code:"COM3",name:"COM3",selected:!0}],coupon_print:[{code:"Send To OneNote 2016",name:"Send To OneNote 2016",selected:!1},{code:"Microsoft XPS Document Writer",name:"Microsoft XPS Document Writer",selected:!1},{code:"Microsoft Print to PDF",name:"Microsoft Print to PDF",selected:!0},{code:"Fax",name:"Fax",selected:!1}],film_print:[{code:"Send To OneNote 2016",name:"Send To OneNote 2016",selected:!0},{code:"Microsoft XPS Document Writer",name:"Microsoft XPS Document Writer",selected:!1},{code:"Microsoft Print to PDF",name:"Microsoft Print to PDF",selected:!1},{code:"Fax",name:"Fax",selected:!1}],keyboard:[{code:"E7",name:"峰华_E7",selected:!1},{code:"Z9",name:"德卡_Z9",selected:!1},{code:"CM511",name:"辰明_CM511",selected:!1},{code:"CM512",name:"辰明_CM512",selected:!1},{code:"Numeric Keypad",name:"标准键盘",selected:!0}],counter_type:[{code:"movie",selected:!1},{code:"goods",selected:!1},{code:"both",selected:!0}],meal_preparation:[{code:"0",selected:!1},{code:"1",selected:!0}],pos_show_type:[{code:" ",name:"无客显",selected:!0},{code:"ZHONGQI",name:"中崎",selected:!1},{code:"XINGQIAO",name:"星乔",selected:!1}]},p()(n,"pos_show_type",[{code:"ZHONGQI",name:"中崎",selected:!1},{code:"XINGQIAO",name:"星乔",selected:!1}]),p()(n,"pos_type",[{code:"2",name:"不对接",selected:!0},{code:"0",name:"快钱POS机",selected:!1},{code:"1",name:"杉德POS机",selected:!1}]),p()(n,"print_voucher",[{code:"0",selected:!1},{code:"1",selected:!0}]),a=n,e(a)}},f.writeTerminalParameter=function(e,t){if("undefined"==typeof app)return void t("浏览器不支持此功能");if(!app.sendMessage)return void t("浏览器不支持此功能");if(!e)return void t("写入数据为空");var n="writeconfig_reponse_"+i(),a=u()(e);app.sendMessage("Common_DataWrite_REQUEST",[n,"pos",a]),app.setMessageCallback(n,function(e,n){t(0==n[0]?n:n)})},f.getCinemaInfoParameter=function(e){if("undefined"==typeof app)return void e("浏览器不支持此功能");if(!app.sendMessage)return void e("浏览器不支持此功能");var t="License_Read_Reponse_"+i();app.sendMessage("License_Read_REQUEST",[t]),app.setMessageCallback(t,function(t,n){e(0==n[0]?n:n)})},f.openCashBox=function(e,t){if("undefined"==typeof app)return void t("浏览器不支持此功能");if(!app.sendMessage)return void t("浏览器不支持此功能");if(!e)return void t("终端数据为空");var n=r(),a=e.cash_box;if(!a)return void t("找不到钱箱终端配置项");var i=o(a);if(!i)return void t("未找到钱箱");app.sendMessage("CashBox_Open_REQUEST",[n,i]);try{app.setMessageCallback(n,function(e,n){t(n)})}catch(e){t(e)}},t.a=f},363:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table-page"},[n("section",{staticClass:"search-section"},[n("searchLan",{attrs:{modelName:e.modelName,config:e.searchConfig},on:{pressSearch:e.search,searchValueChange:e.setSearch}})],1),e._v(" "),n("section",{staticClass:"table-section"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[e._l(e.tableConfig,function(t,a){return[t.hasTemplate?t.hasTemplate?n("el-table-column",{key:a,attrs:{prop:t.prop,label:t.label,width:t.width,fixed:t.fixed},scopedSlots:e._u([{key:"default",fn:function(a){return["操作"==t.label?n("div",[n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.printMethods("print",a.row)}}},[e._v("打印")]),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.printMethods("rePrint",a.row)}}},[e._v("重打")])],1):e._e()]}}],null,!0)}):e._e():n("el-table-column",{key:a,attrs:{prop:t.prop,label:t.label,width:t.width}})]})],2)],1),e._v(" "),0!=e.tableData.length?n("section",{staticClass:"pagination-section flex-base flex-center pageStyle"},[n("el-pagination",{attrs:{"current-page":e.pageConfig.pageNo,"page-sizes":e.pageConfig.pageSizes,"page-size":e.pageConfig.pageSize,background:"",layout:"total, prev, pager, next, jumper, sizes",total:e.pageConfig.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e(),e._v(" "),n("el-dialog",{attrs:{title:"票券打印",visible:e.printVisible,width:"32%","close-on-click-modal":!1},on:{"update:visible":function(t){e.printVisible=t}}},[n("div",{staticClass:"print-main"},[n("el-form",{ref:"print",staticClass:"form-print",attrs:{inline:!0,"label-width":"85px",size:"small",model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{label:"申请单号："}},[n("div",{staticClass:"nameValue"},[e._v(e._s(e.form.applyCode))])]),e._v(" "),n("div",[n("el-form-item",{attrs:{label:"票券名称："}},[n("div",{staticClass:"nameValue"},[e._v(e._s(e.form.couponName))])])],1),e._v(" "),n("el-form-item",{attrs:{label:"打印数量：",prop:"num"}},[n("el-input",{model:{value:e.form.num,callback:function(t){e.$set(e.form,"num",t)},expression:"form.num"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"打印设备：",prop:"opara"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:e.oparaChange},model:{value:e.form.opara,callback:function(t){e.$set(e.form,"opara",t)},expression:"form.opara"}},e._l(e.oparaOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.name,value:e.code}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"使用票版：",prop:"templateName"}},[n("el-input",{attrs:{readonly:!0},model:{value:e.form.templateName,callback:function(t){e.$set(e.form,"templateName",t)},expression:"form.templateName"}},[e.form.templateId?n("i",{staticClass:"el-icon-circle-close",attrs:{slot:"suffix"},on:{click:function(t){return e.clearInputValue()}},slot:"suffix"}):e._e()]),e._v(" "),n("el-button",{attrs:{plain:""},on:{click:e.selecteTemplate}},[e._v("选择")])],1)],1),e._v(" "),n("div",{staticClass:"footer-are"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.printFnc("print")}}},[e._v("确定")]),e._v(" "),n("el-button",{staticStyle:{"margin-left":"8px"},attrs:{plain:""},on:{click:function(t){e.printVisible=!1}}},[e._v("取消")])],1)],1),e._v(" "),n("printModel",{ref:"tamplate",on:{selecteTemplateCallBack:e.selecteTemplateCallBack}})],1),e._v(" "),n("el-dialog",{attrs:{title:"票券重打印",visible:e.rePrintVisible,width:"32%","close-on-click-modal":!1},on:{"update:visible":function(t){e.rePrintVisible=t}}},[n("div",{staticClass:"print-main"},[n("el-form",{ref:"rePrint",staticClass:"form-print",attrs:{inline:!0,"label-width":"85px",size:"small",model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{label:"申请单号："}},[n("div",{staticClass:"nameValue"},[e._v(e._s(e.form.applyCode))])]),e._v(" "),n("div",[n("el-form-item",{attrs:{label:"票券名称："}},[n("div",{staticClass:"nameValue"},[e._v(e._s(e.form.couponName))])])],1),e._v(" "),n("div",{staticClass:"nameValue",staticStyle:{padding:"0 10px 20px"}},[e._v("请指定需要重打印的顺序号：")]),e._v(" "),n("el-form-item",{attrs:{label:"起始序号：",prop:"beginSeq"}},[n("el-input",{model:{value:e.form.beginSeq,callback:function(t){e.$set(e.form,"beginSeq",t)},expression:"form.beginSeq"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"结束序号：",prop:"endSeq"}},[n("el-input",{model:{value:e.form.endSeq,callback:function(t){e.$set(e.form,"endSeq",t)},expression:"form.endSeq"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"打印设备：",prop:"opara"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.opara,callback:function(t){e.$set(e.form,"opara",t)},expression:"form.opara"}},e._l(e.oparaOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.name,value:e.code}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"使用票版：",prop:"templateName"}},[n("el-input",{attrs:{readonly:!0},model:{value:e.form.templateName,callback:function(t){e.$set(e.form,"templateName",t)},expression:"form.templateName"}},[e.form.templateId?n("i",{staticClass:"el-icon-circle-close",attrs:{slot:"suffix"},on:{click:function(t){return e.clearInputValue()}},slot:"suffix"}):e._e()]),e._v(" "),n("el-button",{attrs:{plain:""},on:{click:e.selecteTemplate}},[e._v("选择")])],1)],1),e._v(" "),n("div",{staticClass:"footer-are"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.printFnc("rePrint")}}},[e._v("确定")]),e._v(" "),n("el-button",{staticStyle:{"margin-left":"8px"},attrs:{plain:""},on:{click:function(t){e.rePrintVisible=!1}}},[e._v("取消")])],1)],1),e._v(" "),n("printModel",{ref:"tamplate",on:{selecteTemplateCallBack:e.selecteTemplateCallBack}})],1)],1)},r=[],o={render:a,staticRenderFns:r};t.a=o}});