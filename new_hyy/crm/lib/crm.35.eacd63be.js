webpackJsonpcrm([35],{139:function(e,t,a){"use strict";function r(e){a(262)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(196),i=a(264),o=a(8),m=r,l=o(n.a,i.a,!1,m,"data-v-a16a36f4",null);t.default=l.exports},196:function(e,t,a){"use strict";var r=a(53),n=a.n(r);t.a={name:"MemberIntegralHistory",data:function(){return{uploadHeaders:{Authorization:this.$store.state.loginToken,"Cpm-User-Token":this.$store.state.loginToken},integralDetailVisible:!1,tipMessage:"",total:0,tenantId:this.$store.state.loginUser.consumerId,formData:{memberId:this.$route.query.memberId,flowNo:"",endTime:"",startTime:"",integralType:"",channelName:"",cinemaName:"",operator:"",current:1,size:20,tenantId:this.$store.state.loginUser.consumerId},scopeDialogData:{},tableData:[],integralTypeOptions:[{code:"",desc:"全部"},{code:"0",desc:"积分获取"},{code:"1",desc:"积分兑换"},{code:"2",desc:"积分冲销"},{code:"3",desc:"手动调整积分"},{code:"4",desc:"退积分"}]}},mounted:function(){console.log(this.formData.memberId),this.search()},methods:{formateEmpty:function(e,t,a,r){return null==a||void 0==a||""===a?"-":a},formDataSelectionEmpty:function(e){var t={};for(var a in e)e[a]&&(t[a]=e[a]);return t},search:function(){var e=this,t=this.formDataSelectionEmpty(JSON.parse(n()(this.formData)));this.tipMessage="数据加载中...",console.log(t),this.$crmList.getIntegralTradeRecordList(t).then(function(t){0==t.total&&(e.tipMessage="暂无数据"),e.tableData=t.records||[],e.total=t.total||0}).catch(function(t){console.log(t),e.tipMessage=t})},handleSizeChange:function(e){this.formData.size=e,this.search()},handleCurrentChange:function(e){this.formData.current=e,this.search()},handleSearch:function(){if(this.formData.current=1,this.formData.startTime||this.formData.endTime){if(!this.formData.startTime)return this.$message({message:"开始时间不能为空",type:"warn",duration:1500}),!1;if(!this.formData.endTime)return this.$message({message:"结束时间不能为空",type:"warn",duration:1500}),!1}this.search()},resetForm:function(e){this.$refs[e].resetFields()},handleCheckIntegralDetail:function(e){var t=this;this.integralDetailVisible=!0;var a={flowNo:e.flowNo,tenantId:this.tenantId};this.$crmList.getIntegralTradeRecordDetail(a).then(function(e){t.scopeDialogData=e}).catch(function(e){console.log(e)})}}}},262:function(e,t,a){var r=a(263);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(132)("3095ba96",r,!0,{})},263:function(e,t,a){t=e.exports=a(131)(!0),t.push([e.i,"\n._member-integral-history .el-date-editor.el-input[data-v-a16a36f4] {\n  width: 192px;\n}\n._member-integral-history .form-data-wrap[data-v-a16a36f4] {\n  padding: 19px 24px;\n  background: #f5f5f5;\n}\n._member-integral-history .form-data-wrap .el-form-item[data-v-a16a36f4] {\n    margin-bottom: 0px;\n}\n._member-integral-history .form-data-wrap .word-line[data-v-a16a36f4] {\n    padding: 0 15px;\n    font-size: 12px;\n    color: #666;\n}\n._member-integral-history .form-data-wrap .el-form-item__label[data-v-a16a36f4] {\n    font-size: 12px;\n    color: #717171;\n    padding: 0 6px 0 0;\n}\n._member-integral-history .form-data-wrap .el-date-editor .el-range-input[data-v-a16a36f4] {\n    font-size: 12px;\n}\n._member-integral-history .form-data-wrap .el-date-editor .el-range-separator[data-v-a16a36f4] {\n    font-size: 12px;\n}\n._member-integral-history .form-data-wrap .el-date-editor--daterange.el-input__inner[data-v-a16a36f4] {\n    width: 210px;\n    color: #717171;\n    font-size: 12px;\n}\n._member-integral-history .form-data-wrap .el-input--suffix .el-input__inner[data-v-a16a36f4] {\n    width: 125px;\n    color: #717171;\n    font-size: 12px;\n    padding-right: 0;\n}\n._member-integral-history .member-list-table .not_on[data-v-a16a36f4] {\n  color: #0099ff;\n}\n._member-integral-history .member-list-table .has_been_on[data-v-a16a36f4] {\n  color: #80d91e;\n}\n._member-integral-history .member-list-table .has_been_off[data-v-a16a36f4] {\n  color: #ff3d00;\n}\n._member-integral-history .member-list-table .operation-button span[data-v-a16a36f4] {\n  font-size: 12px;\n}\n._member-integral-history .result-title[data-v-a16a36f4] {\n  font-size: 12px;\n  color: #b1b1b1;\n  padding: 8px 0;\n}\n._member-integral-history ._member-check[data-v-a16a36f4] {\n  overflow: hidden;\n  padding: 0px 10px 10px 10px;\n  color: #000;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n._member-integral-history ._member-check ._member-check-item[data-v-a16a36f4] {\n    overflow: hidden;\n    margin-bottom: 20px;\n}\n._member-integral-history ._member-check ._member-check-item ._member-check-item-left[data-v-a16a36f4] {\n      width: 60%;\n      float: left;\n      padding: 0 20px;\n}\n._member-integral-history ._member-check ._member-check-item ._member-check-item-left ._member-check-item-info[data-v-a16a36f4] {\n        height: 20px;\n        line-height: 20px;\n        margin-top: 20px;\n        font-size: 14px;\n}\n._member-integral-history ._member-check ._member-check-item ._member-check-item-right[data-v-a16a36f4] {\n      width: 40%;\n      float: right;\n      padding: 0 20px;\n}\n._member-integral-history ._member-check ._member-check-item ._member-check-item-right ._member-check-item-info[data-v-a16a36f4] {\n        font-size: 14px;\n        height: 20px;\n        line-height: 20px;\n        margin-top: 20px;\n}\n._member-integral-history ._member-check ._member-check-line[data-v-a16a36f4] {\n    width: 100%;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    overflow: hidden;\n    padding: 5px 40px;\n}\n._member-integral-history ._member-check ._member-check-line ._member-check-line-item[data-v-a16a36f4] {\n      border-top: 1px dashed #666666;\n      height: 1px;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/crm/src/views/member/memberIntegral/memberIntegralHistory.vue"],names:[],mappings:";AACA;EACE,aAAa;CACd;AACD;EACE,mBAAmB;EACnB,oBAAoB;CACrB;AACD;IACI,mBAAmB;CACtB;AACD;IACI,gBAAgB;IAChB,gBAAgB;IAChB,YAAY;CACf;AACD;IACI,gBAAgB;IAChB,eAAe;IACf,mBAAmB;CACtB;AACD;IACI,gBAAgB;CACnB;AACD;IACI,gBAAgB;CACnB;AACD;IACI,aAAa;IACb,eAAe;IACf,gBAAgB;CACnB;AACD;IACI,aAAa;IACb,eAAe;IACf,gBAAgB;IAChB,iBAAiB;CACpB;AACD;EACE,eAAe;CAChB;AACD;EACE,eAAe;CAChB;AACD;EACE,eAAe;CAChB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;EAChB,eAAe;EACf,eAAe;CAChB;AACD;EACE,iBAAiB;EACjB,4BAA4B;EAC5B,YAAY;EACZ,+BAA+B;UACvB,uBAAuB;CAChC;AACD;IACI,iBAAiB;IACjB,oBAAoB;CACvB;AACD;MACM,WAAW;MACX,YAAY;MACZ,gBAAgB;CACrB;AACD;QACQ,aAAa;QACb,kBAAkB;QAClB,iBAAiB;QACjB,gBAAgB;CACvB;AACD;MACM,WAAW;MACX,aAAa;MACb,gBAAgB;CACrB;AACD;QACQ,gBAAgB;QAChB,aAAa;QACb,kBAAkB;QAClB,iBAAiB;CACxB;AACD;IACI,YAAY;IACZ,+BAA+B;YACvB,uBAAuB;IAC/B,iBAAiB;IACjB,kBAAkB;CACrB;AACD;MACM,+BAA+B;MAC/B,YAAY;CACjB",file:"memberIntegralHistory.vue",sourcesContent:["\n._member-integral-history .el-date-editor.el-input[data-v-a16a36f4] {\n  width: 192px;\n}\n._member-integral-history .form-data-wrap[data-v-a16a36f4] {\n  padding: 19px 24px;\n  background: #f5f5f5;\n}\n._member-integral-history .form-data-wrap .el-form-item[data-v-a16a36f4] {\n    margin-bottom: 0px;\n}\n._member-integral-history .form-data-wrap .word-line[data-v-a16a36f4] {\n    padding: 0 15px;\n    font-size: 12px;\n    color: #666;\n}\n._member-integral-history .form-data-wrap .el-form-item__label[data-v-a16a36f4] {\n    font-size: 12px;\n    color: #717171;\n    padding: 0 6px 0 0;\n}\n._member-integral-history .form-data-wrap .el-date-editor .el-range-input[data-v-a16a36f4] {\n    font-size: 12px;\n}\n._member-integral-history .form-data-wrap .el-date-editor .el-range-separator[data-v-a16a36f4] {\n    font-size: 12px;\n}\n._member-integral-history .form-data-wrap .el-date-editor--daterange.el-input__inner[data-v-a16a36f4] {\n    width: 210px;\n    color: #717171;\n    font-size: 12px;\n}\n._member-integral-history .form-data-wrap .el-input--suffix .el-input__inner[data-v-a16a36f4] {\n    width: 125px;\n    color: #717171;\n    font-size: 12px;\n    padding-right: 0;\n}\n._member-integral-history .member-list-table .not_on[data-v-a16a36f4] {\n  color: #0099ff;\n}\n._member-integral-history .member-list-table .has_been_on[data-v-a16a36f4] {\n  color: #80d91e;\n}\n._member-integral-history .member-list-table .has_been_off[data-v-a16a36f4] {\n  color: #ff3d00;\n}\n._member-integral-history .member-list-table .operation-button span[data-v-a16a36f4] {\n  font-size: 12px;\n}\n._member-integral-history .result-title[data-v-a16a36f4] {\n  font-size: 12px;\n  color: #b1b1b1;\n  padding: 8px 0;\n}\n._member-integral-history ._member-check[data-v-a16a36f4] {\n  overflow: hidden;\n  padding: 0px 10px 10px 10px;\n  color: #000;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n._member-integral-history ._member-check ._member-check-item[data-v-a16a36f4] {\n    overflow: hidden;\n    margin-bottom: 20px;\n}\n._member-integral-history ._member-check ._member-check-item ._member-check-item-left[data-v-a16a36f4] {\n      width: 60%;\n      float: left;\n      padding: 0 20px;\n}\n._member-integral-history ._member-check ._member-check-item ._member-check-item-left ._member-check-item-info[data-v-a16a36f4] {\n        height: 20px;\n        line-height: 20px;\n        margin-top: 20px;\n        font-size: 14px;\n}\n._member-integral-history ._member-check ._member-check-item ._member-check-item-right[data-v-a16a36f4] {\n      width: 40%;\n      float: right;\n      padding: 0 20px;\n}\n._member-integral-history ._member-check ._member-check-item ._member-check-item-right ._member-check-item-info[data-v-a16a36f4] {\n        font-size: 14px;\n        height: 20px;\n        line-height: 20px;\n        margin-top: 20px;\n}\n._member-integral-history ._member-check ._member-check-line[data-v-a16a36f4] {\n    width: 100%;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    overflow: hidden;\n    padding: 5px 40px;\n}\n._member-integral-history ._member-check ._member-check-line ._member-check-line-item[data-v-a16a36f4] {\n      border-top: 1px dashed #666666;\n      height: 1px;\n}\n"],sourceRoot:""}])},264:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"_member-integral-history"},[a("el-form",{ref:"formData",staticClass:"form-data-wrap _member-search-area-custom",attrs:{inline:!0,model:e.formData}},[a("el-form-item",{attrs:{label:"积分流水号：","label-width":"84px",prop:"flowNo"}},[a("el-input",{attrs:{placeholder:"积分流水号",clearable:""},on:{blur:function(){e.formData.flowNo=e.formData.flowNo.trim()}},model:{value:e.formData.flowNo,callback:function(t){e.$set(e.formData,"flowNo",t)},expression:"formData.flowNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"积分交易类型：","label-width":"96px",prop:"integralType"}},[a("el-select",{attrs:{placeholder:"请选择积分交易类型",clearable:""},model:{value:e.formData.integralType,callback:function(t){e.$set(e.formData,"integralType",t)},expression:"formData.integralType"}},e._l(e.integralTypeOptions,function(e){return a("el-option",{key:e.code,attrs:{label:e.desc,value:e.code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"交易时间：","label-width":"72px",prop:"startTime"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss","default-time":"00:00:00",type:"datetime",placeholder:"开始时间"},model:{value:e.formData.startTime,callback:function(t){e.$set(e.formData,"startTime",t)},expression:"formData.startTime"}}),e._v(" "),a("span",{staticClass:"word-line"},[e._v("至")]),e._v(" "),a("el-form-item",{staticStyle:{"margin-right":"0px!important"},attrs:{prop:"endTime"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss","default-time":"23:59:59",type:"datetime",placeholder:"结束时间"},model:{value:e.formData.endTime,callback:function(t){e.$set(e.formData,"endTime",t)},expression:"formData.endTime"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"交易渠道：","label-width":"72px",prop:"channelName"}},[a("el-input",{attrs:{placeholder:"交易渠道",clearable:""},on:{blur:function(){e.formData.channelName=e.formData.channelName.trim()}},model:{value:e.formData.channelName,callback:function(t){e.$set(e.formData,"channelName",t)},expression:"formData.channelName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"交易影院：","label-width":"72px",prop:"cinemaName"}},[a("el-input",{attrs:{placeholder:"交易影院",clearable:""},on:{blur:function(){e.formData.cinemaName=e.formData.cinemaName.trim()}},model:{value:e.formData.cinemaName,callback:function(t){e.$set(e.formData,"cinemaName",t)},expression:"formData.cinemaName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作人：","label-width":"60px",prop:"operator"}},[a("el-input",{attrs:{placeholder:"操作人",clearable:""},on:{blur:function(){e.formData.operator=e.formData.operator.trim()}},model:{value:e.formData.operator,callback:function(t){e.$set(e.formData,"operator",t)},expression:"formData.operator"}})],1),e._v(" "),a("el-form-item",{staticClass:"btn-wrap"},[a("el-button",{staticClass:"_el-btn-custom",attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")]),e._v(" "),a("el-button",{staticClass:"_el-btn-custom _member-custom-ghost-button",attrs:{plain:""},on:{click:function(t){return e.resetForm("formData")}}},[e._v("重置\n      ")])],1)],1),e._v(" "),e.total?a("div",{staticClass:"result-title"},[e._v("为您查询到"+e._s(e.total)+"个积分交易信息")]):e._e(),e._v(" "),a("div",{staticClass:"member-list-table _m-member-table-custom"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","empty-text":e.tipMessage}},[a("el-table-column",{attrs:{prop:"flowNo",label:"积分流水号","min-width":"170",formatter:e.formateEmpty,"show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"transactionTime",label:"交易时间","min-width":"140",formatter:e.formateEmpty,"show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"integral",label:"积分数量","min-width":"80",formatter:e.formateEmpty,"show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"integralType",label:"积分交易类型","min-width":"100",formatter:e.formateEmpty,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(0==t.row.integralType?"积分获取":"")+"\n          "+e._s(1==t.row.integralType?"积分兑换":"")+"\n          "+e._s(2==t.row.integralType?"积分冲销":"")+"\n          "+e._s(3==t.row.integralType?"手动调整积分":"")+"\n          "+e._s(4==t.row.integralType?"退积分":"")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"交易渠道","min-width":"100",formatter:e.formateEmpty,"show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"cinemaName",label:"交易影院","min-width":"120",formatter:e.formateEmpty,"show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"operator",label:"操作人","min-width":"100",formatter:e.formateEmpty,"show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"operation-button",attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleCheckIntegralDetail(t.row)}}},[e._v("\n            查看")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"page-wrap"},[a("el-pagination",{attrs:{background:"","current-page":e.formData.current-0,"page-size":e.formData.size-0,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[20,50,100],total:e.total-0},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"积分交易记录详情",visible:e.integralDetailVisible},on:{"update:visible":function(t){e.integralDetailVisible=t}}},[a("div",{staticClass:"_member-check"},[a("div",{staticClass:"_member-check-item",staticStyle:{"border-top":"1px solid #666666"}},[a("div",{staticClass:"_member-check-item-left"},[a("div",{staticClass:"_member-check-item-info"},[a("span",[e._v("交易流水号：")]),a("span",[e._v(e._s(e.scopeDialogData.flowNo||"-"))])]),e._v(" "),a("div",{staticClass:"_member-check-item-info"},[a("span",[e._v("交易日期：")]),a("span",[e._v(e._s(e.scopeDialogData.transactionTime||"-"))])]),e._v(" "),a("div",{staticClass:"_member-check-item-info"},[a("span",[e._v("交易渠道：")]),a("span",[e._v(e._s(e.scopeDialogData.channelName||"-"))])])]),e._v(" "),a("div",{staticClass:"_member-check-item-right"},[a("div",{staticClass:"_member-check-item-info"},[a("span",[e._v("交易积分：")]),a("span",[e._v(e._s(e.scopeDialogData.integral||"-"))])]),e._v(" "),a("div",{staticClass:"_member-check-item-info"},[a("span",[e._v("积分交易类型：")]),e._v(" "),a("span",[e._v("\n              "+e._s(0==e.scopeDialogData.integralType?"积分获取":"")+"\n              "+e._s(1==e.scopeDialogData.integralType?"积分兑换":"")+"\n              "+e._s(2==e.scopeDialogData.integralType?"积分冲销":"")+"\n              "+e._s(3==e.scopeDialogData.integralType?"手动调整积分":"")+"\n              "+e._s(4==e.scopeDialogData.integralType?"退积分":"")+"\n            ")])]),e._v(" "),a("div",{staticClass:"_member-check-item-info"},[a("span",[e._v("交易影院：")]),a("span",[e._v(e._s(e.scopeDialogData.cinemaName||"-"))])])])])])])],1)},n=[],i={render:r,staticRenderFns:n};t.a=i}});