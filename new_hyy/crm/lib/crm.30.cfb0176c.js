webpackJsonpcrm([30],{157:function(t,e,a){"use strict";function r(t){a(380)}Object.defineProperty(e,"__esModule",{value:!0});var s=a(229),o=a(382),n=a(8),l=r,i=n(s.a,o.a,!1,l,null,null);e.default=i.exports},229:function(t,e,a){"use strict";e.a={name:"MemberList",data:function(){return{cardStatus:"frozen",cardNo:"",frozenDialog:!1,tipMessage:"",current:1,pageSize:20,total:0,tableDataList:[],cardTypeOptions:[],cardStatusOptions:[{label:"正常",value:"normal"},{label:"冻结",value:"frozen"},{label:"注销",value:"cancel"},{label:"过期",value:"expire"},{label:"挂失",value:"loss"}],cardNameOptions:[],formData:{cardType:"",status:"",cardName:"",cardNo:"",userName:""}}},created:function(){this.cardTypeList(),this.getCardproductList(),this.getMembercardList()},methods:{getCardproductList:function(){var t=this,e={current:1,size:1e3,tenantId:this.$store.state.loginUser.consumerId,status:"start"};t.$crmList.cardproductList(e).then(function(e){t.cardNameOptions=e.records})},cardTypeList:function(){var t=this,e={tenantId:this.$store.state.loginUser.consumerId};t.$crmList.cardTypeList(e).then(function(e){t.cardTypeOptions=e})},getMembercardList:function(){var t=this,e={current:t.current,size:t.pageSize,status:t.formData.status,userName:t.formData.userName,cardTypeCode:t.formData.cardType,cardNo:t.formData.cardNo,cardProductId:t.formData.cardProductId,tenantId:this.$store.state.loginUser.consumerId};t.tipMessage="数据加载中...",t.$crmList.membercardList(e).then(function(e){0==e.total&&(t.tipMessage="暂无数据"),t.tableDataList=e.records,t.total=e.total,t.current=e.current,t.pageSize=e.size}).catch(function(e){t.tipMessage=e.message,console.log(e)})},search:function(){this.current=1,this.getMembercardList()},resetForm:function(t){this.$refs[t].resetFields()},handleSizeChange:function(t){var e=this;e.pageSize=t,e.getMembercardList()},handleCurrentChange:function(t){var e=this;e.current=t,e.getMembercardList()},handleChangeStatus:function(t,e){this.frozenDialog=!0,this.cardStatus=e,this.cardNo=t},handleSureChange:function(){var t=this;this.frozenDialog=!1;var e={cardNo:this.cardNo,status:this.cardStatus,tenantId:this.$store.state.loginUser.consumerId};this.$crmList.rcardStatus(e).then(function(e){t.getMembercardList(),t.$message({type:"success",message:"frozen"==t.cardStatus?"冻结成功":"解冻成功"})})},handleMemberDetail:function(t){this.$router.push({path:"/member/membershipCard/detail",query:{cardNo:t}})},formateEmpty:function(t,e,a,r){return null==a||void 0==a||""===a?"-":a}}}},380:function(t,e,a){var r=a(381);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(132)("db063606",r,!0,{})},381:function(t,e,a){e=t.exports=a(131)(!0),e.push([t.i,"\n.member-list {\n  padding-bottom: 20px;\n}\n.member-list .result-title {\n    font-size: 12px;\n    color: #b1b1b1;\n    padding: 8px 0;\n}\n.member-list .member-list-table .detail-btn,\n  .member-list .member-list-table .change-status-btn {\n    font-size: 12px;\n    color: #3b74ff;\n    cursor: pointer;\n    margin-right: 10px;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/crm/src/views/member/membershipCardInfo/membershipCardList.vue"],names:[],mappings:";AACA;EACE,qBAAqB;CACtB;AACD;IACI,gBAAgB;IAChB,eAAe;IACf,eAAe;CAClB;AACD;;IAEI,gBAAgB;IAChB,eAAe;IACf,gBAAgB;IAChB,mBAAmB;CACtB",file:"membershipCardList.vue",sourcesContent:["\n.member-list {\n  padding-bottom: 20px;\n}\n.member-list .result-title {\n    font-size: 12px;\n    color: #b1b1b1;\n    padding: 8px 0;\n}\n.member-list .member-list-table .detail-btn,\n  .member-list .member-list-table .change-status-btn {\n    font-size: 12px;\n    color: #3b74ff;\n    cursor: pointer;\n    margin-right: 10px;\n}\n"],sourceRoot:""}])},382:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"member-list"},[a("el-form",{ref:"formData",staticClass:"form-data-wrap _member-search-area-custom",attrs:{inline:!0,model:t.formData}},[a("el-form-item",{attrs:{label:"卡类型：",prop:"cardType"}},[a("el-select",{attrs:{placeholder:"全部类型",clearable:""},model:{value:t.formData.cardType,callback:function(e){t.$set(t.formData,"cardType",e)},expression:"formData.cardType"}},t._l(t.cardTypeOptions,function(t){return a("el-option",{key:t.code,attrs:{label:t.desc,value:t.code}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"卡状态：",prop:"status"}},[a("el-select",{attrs:{placeholder:"全部状态",clearable:""},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},t._l(t.cardStatusOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"卡政策：",prop:"cardProductId"}},[a("el-select",{attrs:{placeholder:"卡政策",filterable:"",clearable:""},model:{value:t.formData.cardProductId,callback:function(e){t.$set(t.formData,"cardProductId",e)},expression:"formData.cardProductId"}},t._l(t.cardNameOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.cardName,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"会员卡号：",prop:"cardNo"}},[a("el-input",{attrs:{placeholder:"会员卡号",clearable:""},on:{blur:function(){t.formData.cardNo=t.formData.cardNo.trim()}},model:{value:t.formData.cardNo,callback:function(e){t.$set(t.formData,"cardNo",e)},expression:"formData.cardNo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"会员姓名：",prop:"userName"}},[a("el-input",{attrs:{placeholder:"会员姓名",clearable:""},on:{blur:function(){t.formData.userName=t.formData.userName.trim()}},model:{value:t.formData.userName,callback:function(e){t.$set(t.formData,"userName",e)},expression:"formData.userName"}})],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"_el-btn-custom",attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"_el-btn-custom _member-custom-ghost-button",attrs:{plain:""},on:{click:function(e){return t.resetForm("formData")}}},[t._v("重置\n      ")])],1)],1),t._v(" "),a("div",{staticClass:"result-title"},[t._v("为您查询到"+t._s(t.total)+"个会员卡信息")]),t._v(" "),a("div",{staticClass:"member-list-table _m-member-table-custom"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableDataList,stripe:"","empty-text":t.tipMessage}},[a("el-table-column",{attrs:{prop:"cardNo",label:"会员卡号",width:"140","show-overflow-tooltip":"",formatter:t.formateEmpty}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"姓名","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{fontSize:"12px"}},[t._v(t._s(null!=e.row.userName?e.row.userName:"-"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"phoneNumber",label:"手机号","min-width":"100","show-overflow-tooltip":"",formatter:t.formateEmpty}}),t._v(" "),a("el-table-column",{attrs:{prop:"cardProductName",label:"卡政策","show-overflow-tooltip":"",formatter:t.formateEmpty}}),t._v(" "),a("el-table-column",{attrs:{prop:"birthday",label:"生日","min-width":"80","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{fontSize:"12px"}},[t._v(t._s(null!=e.row.birthday?e.row.birthday:"-"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cardType",label:"卡类型","min-width":"70","show-overflow-tooltip":"",formatter:t.formateEmpty}}),t._v(" "),a("el-table-column",{attrs:{label:"状态","min-width":"60","show-overflow-tooltip":"",formatter:t.formateEmpty},scopedSlots:t._u([{key:"default",fn:function(e){return["normal"==e.row.status?a("span",{staticStyle:{fontSize:"12px"}},[t._v("正常")]):t._e(),t._v(" "),"expire"==e.row.status?a("span",{staticStyle:{fontSize:"12px"}},[t._v("过期")]):t._e(),t._v(" "),"frozen"==e.row.status?a("span",{staticStyle:{fontSize:"12px"}},[t._v("冻结")]):t._e(),t._v(" "),"cancel"==e.row.status?a("span",{staticStyle:{fontSize:"12px"}},[t._v("注销")]):t._e(),t._v(" "),"loss"==e.row.status?a("span",{staticStyle:{fontSize:"12px"}},[t._v("挂失")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"注册时间","min-width":"80","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{fontSize:"12px"}},[t._v(t._s(null!=e.row.createTime?e.row.createTime:"-"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"全部来源","show-overflow-tooltip":"",formatter:t.formateEmpty}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return["normal"==e.row.status?a("span",{staticClass:"change-status-btn",on:{click:function(a){return t.handleChangeStatus(e.row.cardNo,"frozen")}}},[t._v("冻结")]):t._e(),t._v(" "),"frozen"==e.row.status?a("span",{staticClass:"change-status-btn",on:{click:function(a){return t.handleChangeStatus(e.row.cardNo,"normal")}}},[t._v("解冻")]):t._e(),t._v(" "),a("span",{staticClass:"detail-btn",on:{click:function(a){return t.handleMemberDetail(e.row.cardNo)}}},[t._v("详情")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"page-wrap"},[a("el-pagination",{attrs:{background:"","current-page":t.current-0,"page-sizes":[20,50,100],"page-size":t.pageSize-0,layout:"total, sizes, prev, pager, next, jumper",total:t.total-0},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{staticClass:"_member-tip-dialog-custom-style",attrs:{title:"",visible:t.frozenDialog,width:"320px","show-close":!1},on:{"update:visible":function(e){t.frozenDialog=e}}},[a("i",{staticClass:"iconfont icon-danchuang-tishi _member-tip-dialog-icon"}),t._v(" "),a("span",{staticClass:"_member-tip-dialog-desc"},[t._v(t._s("frozen"==t.cardStatus?"冻结后此卡将无法正常使用，确定冻结吗？":"确定解冻此卡？"))]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"_el-btn-custom _member-add-edit-save-btn",attrs:{type:"primary"},on:{click:t.handleSureChange}},[t._v("确定\n      ")]),t._v(" "),a("el-button",{staticClass:"_el-btn-custom _member-add-edit-save-btn",on:{click:function(e){t.frozenDialog=!1}}},[t._v("取消")])],1)])],1)},s=[],o={render:r,staticRenderFns:s};e.a=o}});