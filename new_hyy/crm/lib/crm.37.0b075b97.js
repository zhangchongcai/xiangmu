webpackJsonpcrm([37],{165:function(t,a,e){"use strict";function s(t){e(411)}Object.defineProperty(a,"__esModule",{value:!0});var n=e(238),r=e(413),o=e(8),i=s,c=o(n.a,r.a,!1,i,null,null);a.default=c.exports},238:function(t,a,e){"use strict";var s=e(53),n=e.n(s);a.a={name:"jointNameCardMerchantList",data:function(){return{statusFlag:"",stopStartInfo:"",stopStartDialog:!1,tipMessage:"",total:400,tableDataList:[],searchData:{merchantNum:"",merchantName:"",status:"all",current:1,size:20,tenantId:this.$store.state.loginUser.consumerId},merchantStatusOptions:[{code:"all",desc:"全部"},{code:"1",desc:"已开售"},{code:"0",desc:"已停售"}]}},created:function(){this.search()},filters:{judegStatus:function(t){return 1==t?"已开售":0==t?"已停售":"-"},formatCreateTime:function(t){return t?new Date(t.replace(/-/g,"/")).formatDate("yyyy-MM-dd"):"-"}},methods:{search:function(){var t=this,a=JSON.parse(n()(this.searchData));this.tipMessage="数据加载中...",this.$crmList.getjointNameCardList(a).then(function(a){0==a.total&&(t.tipMessage="暂无数据"),t.tableDataList=a.records,t.searchData.size=a.size,t.total=a.total}).catch(function(a){t.tipMessage=a.message,console.log("errrrrrr",a.message)})},handleSearch:function(){this.searchData.current=1,this.search()},resetForm:function(t){this.$refs[t].resetFields()},handleAddMerchant:function(){this.$router.push({path:"/member/jointNameCard/addJointNameCardMerchant"})},handleEmitCard:function(t){this.$router.push({path:"/member/jointNameCard/addJointNameCardMerchant",query:{merchantId:t.merchantId}})},handleCardDetail:function(t){this.$router.push({path:"/member/jointNameCard/detail",query:{merchantId:t.merchantId}})},handleChangeStatus:function(t,a){this.stopStartDialog=!0,this.stopStartInfo=a,this.statusFlag=t},handleSureChangeStatus:function(){var t=this;this.stopStartDialog=!1;var a={compactId:this.stopStartInfo.compactId,cooperationEnd:this.stopStartInfo.cooperationEnd,cooperationStart:this.stopStartInfo.cooperationStart,memo:this.stopStartInfo.memo,merchantId:this.stopStartInfo.merchantId,merchantName:this.stopStartInfo.merchantName,status:this.statusFlag,tenantId:this.$store.state.loginUser.consumerId};this.$crmList.editjointNameCardInfo(a).then(function(){t.search(),1==t.statusFlag?t.$message.success("已开售"):t.$message.success("已停售")}).catch(function(t){console.log(t)})},handleSizeChange:function(t){this.searchData.size=t,this.search()},handleCurrentChange:function(t){this.searchData.current=t,this.search()},formateEmpty:function(t,a,e,s){return null==e||void 0==e||""===e?"-":e}}}},411:function(t,a,e){var s=e(412);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e(132)("545cc7fa",s,!0,{})},412:function(t,a,e){a=t.exports=e(131)(!0),a.push([t.i,"\n.jointNameCard-merchant-list .add-btn {\n  font-size: 12px;\n  padding: 6px 0;\n  text-align: right;\n}\n.jointNameCard-merchant-list .add-btn .add-button-custom {\n    font-size: 12px;\n    width: 96px;\n    padding: 5px 20px;\n}\n.jointNameCard-merchant-list .entity-card-list-table .start-sale {\n  color: #2dbc2d;\n}\n.jointNameCard-merchant-list .entity-card-list-table .stop-sale {\n  color: #f33430;\n}\n.jointNameCard-merchant-list .entity-card-list-table .operation-button span {\n  font-size: 12px;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/crm/src/views/member/jointNameCard/jointNameCardMerchantList.vue"],names:[],mappings:";AACA;EACE,gBAAgB;EAChB,eAAe;EACf,kBAAkB;CACnB;AACD;IACI,gBAAgB;IAChB,YAAY;IACZ,kBAAkB;CACrB;AACD;EACE,eAAe;CAChB;AACD;EACE,eAAe;CAChB;AACD;EACE,gBAAgB;CACjB",file:"jointNameCardMerchantList.vue",sourcesContent:["\n.jointNameCard-merchant-list .add-btn {\n  font-size: 12px;\n  padding: 6px 0;\n  text-align: right;\n}\n.jointNameCard-merchant-list .add-btn .add-button-custom {\n    font-size: 12px;\n    width: 96px;\n    padding: 5px 20px;\n}\n.jointNameCard-merchant-list .entity-card-list-table .start-sale {\n  color: #2dbc2d;\n}\n.jointNameCard-merchant-list .entity-card-list-table .stop-sale {\n  color: #f33430;\n}\n.jointNameCard-merchant-list .entity-card-list-table .operation-button span {\n  font-size: 12px;\n}\n"],sourceRoot:""}])},413:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"jointNameCard-merchant-list"},[e("el-form",{ref:"searchData",staticClass:"form-data-wrap _member-search-area-custom",attrs:{inline:!0,model:t.searchData}},[e("el-form-item",{attrs:{label:"商户编号：",prop:"merchantNum",rules:[{max:20,message:"长度不可超过20个字符",trigger:"blur"}]}},[e("el-input",{attrs:{placeholder:"请输入商户编号",clearable:""},on:{blur:function(){t.searchData.merchantNum=t.searchData.merchantNum.trim()}},model:{value:t.searchData.merchantNum,callback:function(a){t.$set(t.searchData,"merchantNum",a)},expression:"searchData.merchantNum"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"商户名称：",prop:"merchantName",rules:[{max:30,message:"长度不可超过30个字符",trigger:"blur"}]}},[e("el-input",{attrs:{placeholder:"请输入商户名称",clearable:""},on:{blur:function(){t.searchData.merchantName=t.searchData.merchantName.trim()}},model:{value:t.searchData.merchantName,callback:function(a){t.$set(t.searchData,"merchantName",a)},expression:"searchData.merchantName"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"状态：",prop:"status"}},[e("el-select",{attrs:{placeholder:"全部状态",clearable:""},model:{value:t.searchData.status,callback:function(a){t.$set(t.searchData,"status",a)},expression:"searchData.status"}},t._l(t.merchantStatusOptions,function(t){return e("el-option",{key:t.code,attrs:{label:t.desc,value:t.code}})}),1)],1),t._v(" "),e("el-form-item",{staticClass:"btn-wrap"},[e("el-button",{staticClass:"_el-btn-custom",attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")]),t._v(" "),e("el-button",{staticClass:"_el-btn-custom _member-custom-ghost-button",attrs:{plain:""},on:{click:function(a){return t.resetForm("searchData")}}},[t._v("重置\n      ")])],1)],1),t._v(" "),e("div",{staticClass:"add-btn"},[e("el-button",{staticClass:"_el-btn-custom _member-custom-ghost-button",attrs:{plain:""},on:{click:t.handleAddMerchant}},[t._v("新建")])],1),t._v(" "),e("div",{staticClass:"entity-card-list-table _m-member-table-custom"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableDataList,stripe:"","empty-text":t.tipMessage}},[e("el-table-column",{attrs:{prop:"merchantNum",label:"商户编号","min-width":"140",formatter:t.formateEmpty,"show-overflow-tooltip":""}}),t._v(" "),e("el-table-column",{attrs:{prop:"merchantName",label:"商户名称","min-width":"140",formatter:t.formateEmpty,"show-overflow-tooltip":""}}),t._v(" "),e("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{class:1==a.row.status?"start-sale":"stop-sale",staticStyle:{fontSize:"12px"}},[t._v(t._s(t._f("judegStatus")(a.row.status)))])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"120",formatter:t.formateEmpty,"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(t._f("formatCreateTime")(a.row.createTime)))]}}])}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticClass:"operation-button",attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleCardDetail(a.row)}}},[t._v("查看\n          ")]),t._v(" "),1==a.row.status?e("el-button",{staticClass:"operation-button",attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleChangeStatus(0,a.row)}}},[t._v("停售")]):t._e(),t._v(" "),0==a.row.status?e("el-button",{staticClass:"operation-button",attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleChangeStatus(1,a.row)}}},[t._v("开售")]):t._e(),t._v(" "),1==a.row.status?e("el-button",{staticClass:"operation-button",attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleEmitCard(a.row)}}},[t._v("编辑")]):t._e()]}}])})],1)],1),t._v(" "),e("div",{staticClass:"page-wrap"},[e("el-pagination",{attrs:{background:"","current-page":t.searchData.current-0,"page-size":t.searchData.size-0,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[20,50,100],total:t.total-0},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),e("el-dialog",{staticClass:"_member-tip-dialog-custom-style",attrs:{title:"",visible:t.stopStartDialog,width:"320px","show-close":!1},on:{"update:visible":function(a){t.stopStartDialog=a}}},[e("i",{staticClass:"iconfont icon-danchuang-tishi _member-tip-dialog-icon"}),t._v(" "),e("span",{staticClass:"_member-tip-dialog-desc"},[t._v("确定要"+t._s(1==t.statusFlag?"开售":"停售")+" "+t._s(t.stopStartInfo.merchantName)+" 吗？")]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"_el-btn-custom _member-add-edit-save-btn",attrs:{type:"primary"},on:{click:t.handleSureChangeStatus}},[t._v("确定\n      ")]),t._v(" "),e("el-button",{staticClass:"_el-btn-custom _member-add-edit-save-btn",on:{click:function(a){t.stopStartDialog=!1}}},[t._v("取消")])],1)])],1)},n=[],r={render:s,staticRenderFns:n};a.a=r}});