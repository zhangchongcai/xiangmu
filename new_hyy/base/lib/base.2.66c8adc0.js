webpackJsonpbase([2],{225:function(e,t,r){"use strict";t.__esModule=!0;var n=r(226),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,o.default)(e)}},226:function(e,t,r){e.exports={default:r(227),__esModule:!0}},227:function(e,t,r){r(19),r(228),e.exports=r(0).Array.from},228:function(e,t,r){"use strict";var n=r(13),o=r(3),s=r(14),a=r(84),i=r(85),l=r(48),u=r(229),c=r(49);o(o.S+o.F*!r(86)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,o,f,d=s(e),p="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,g=void 0!==m,v=0,b=c(d);if(g&&(m=n(m,h>2?arguments[2]:void 0,2)),void 0==b||p==Array&&i(b))for(t=l(d.length),r=new p(t);t>v;v++)u(r,v,g?m(d[v],v):d[v]);else for(f=b.call(d),r=new p;!(o=f.next()).done;v++)u(r,v,g?a(f,m,[o.value,v],!0):o.value);return r.length=v,r}})},229:function(e,t,r){"use strict";var n=r(6),o=r(20);e.exports=function(e,t,r){t in e?n.f(e,t,o(0,r)):e[t]=r}},270:function(e,t,r){"use strict";var n=r(225),o=r.n(n),s=r(27),a=r.n(s),i=r(47),l=r(82);t.a={name:"newRole",mixins:[l.a.cacheMixin],data:function(){var e=this,t=function(t,r,n){0==e.prole.resource.length?n(new Error("请勾选权限控制")):n()};return{cacheField:["prole"],isJustSee:!1,isSee:!0,isEdit:!1,isShowCheckbox:!0,level:"新建角色",id:null,data5:[],prole:{name:null,status:"1",remark:null,resource:[]},rules:{name:[{validator:function(e,t,r){var n=/^[\u4E00-\u9FA5A-Za-z0-9`~!@#$%^&*()_+<>?:"{},.【】\\\/;\-'[\]\s\u3002|\uff1f|\uff01|\uff0c|\u3001|\uff1b|\uff1a|\u201c|\u201d|\u2018|\u2019|\uff08|\uff09|\u300a|\u300b|\u3008|\u3009|\u3010|\u3011|\u300e|\u300f|\u300c|\u300d|\ufe43|\ufe44|\u3014|\u3015|\u2026|\u2014|\uff5e|\ufe4f|\uffe5]{1,20}$/;if(!t)return r(new Error("角色名称不能为空"));n.test(t)?r():r(new Error("请输入字母、数字或者汉字，长度在20个字符以内"))},required:!0,trigger:"blur"}],status:[{required:!0,message:"请选择角色状态",trigger:"blur"}],remark:[{validator:function(e,t,r){var n=/^[\u4E00-\u9FA5A-Za-z0-9\s\·\~\！\@\#\￥\%\……\&\*\（\）\——\-\+\=\【\】\{\}\、\|\；\‘\’\：\“\”\《\》\？\，\。\、\`\~\!\#\$\%\^\&\*\(\)\_\[\]{\}\\\|\;\'\'\:\"\"\,\.\/\<\>\?]{1,100}$/;t?n.test(t)?r():r(new Error("请输入字母、数字或者汉字，长度在100个字符以内")):r()},trigger:"blur"}],resource:[{required:!0,validator:t,trigger:"blur"}]},currentPage:1,total:1,size:10,pages:1,name:"",multipleSelection:[],postObj:{menuName:null,productCode:null,productVersion:null,parentId:null},treeData:[],defaultProps:{children:"submenu",label:"menuName"},ids:[],loading:!0}},created:function(){this.getMenu(),this.isEdit=!!this.$route.query.isEdit,this.isJustSee=!!this.$route.query.isJustSee,this.level=this.$route.name},mounted:function(){this.isEdit?(this.isSee=!0,this.isJustSee=!1,this.prole=JSON.parse(localStorage.getItem("roleEdit")),this.prole.status=this.prole.status.toString(),this.getData(this.$route.query.roleUid)):this.isJustSee?(this.isSee=this.isEdit=!1,this.prole=JSON.parse(localStorage.getItem("roleEdit")),this.prole.status=this.prole.status.toString(),this.getData(this.$route.query.roleUid)):(this.isSee=!0,this.isJustSee=this.isEdit=!1)},methods:{changeCss:function(){var e=document.getElementsByClassName("menuType");console.log(e)},getMenu:function(){var e=this;Object(i._10)().then(function(t){t&&200==t.code?(e.loading=!1,e.data5=t.data,e.isJustSee&&e.formateTree(e.data5,function(e){return 0!=e.id})):e.error(t.msg)}).catch(function(){e.error("网络出错，请稍后再试")})},handleCheckChange:function(e,t,r){},formateTree:function(e,t){if(!e||!e.length)return[];var r=[],n=!0,s=!1,i=void 0;try{for(var l,u=a()(e);!(n=(l=u.next()).done);n=!0){var c=l.value;t(c)?(c.disabled=!0,r.push(c),c.submenu=this.formateTree(c.submenu,t)):(c.disabled=!0,r.push.apply(r,o()(this.formateTree(c.children,t))))}}catch(e){s=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(s)throw i}}return r},confirmRole:function(e){var t=this,r=this,n=this.prole,o=this.$refs.tree.getCheckedNodes(),s=[];o.forEach(function(e){s.push(e.resourceId)}),this.prole.resource=s,this.$refs[e].validate(function(o){if(!o)return!1;t.isEdit?Object(i.E)({role:n,resourceIds:s}).then(function(n){n.result?(t.$refs[e].clearValidate(),r.success("修改成功"),t.$store.commit("tagNav/removeTagNav",t.$route),t.$router.go(-1),t.prole={}):r.error(n.msg)}).catch(function(){}):Object(i.d)({role:n,resourceIds:s}).then(function(n){n.result?(t.$refs[e].clearValidate(),r.success("新建成功"),t.$store.commit("tagNav/removeTagNav",t.$route),t.$router.go(-1),t.prole={}):r.error(n.msg)}).catch(function(){})})},getData:function(e){var t=this;Object(i._11)(e).then(function(e){e&&200==e.code&&(t.ids=e.data.productMenuIds,t.$refs.tree.setCheckedKeys(t.ids))}).catch(function(){})},getCheckedNodes:function(){this.flag=!1,this.form.orgUid=this.$refs.tree.getCheckedNodes()[0].text},out:function(){this.$store.commit("tagNav/removeTagNav",this.$route),this.$router.go(-1),this.prole={}}}}},397:function(e,t,r){var n=r(398);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r(182)("014c1f6c",n,!0,{})},398:function(e,t,r){t=e.exports=r(181)(!0),t.push([e.i,"\n.role-tree .el-tree-node__content:hover {\n  background-color: #3b74ff !important;\n  color: #ffffff;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/base/src/views/sysMange/roleManage/newRole.vue"],names:[],mappings:";AACA;EACE,qCAAqC;EACrC,eAAe;CAChB",file:"newRole.vue",sourcesContent:["\n.role-tree .el-tree-node__content:hover {\n  background-color: #3b74ff !important;\n  color: #ffffff;\n}\n"],sourceRoot:""}])},399:function(e,t,r){var n=r(400);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r(182)("0ec09e34",n,!0,{})},400:function(e,t,r){t=e.exports=r(181)(!0),t.push([e.i,"\n.content-wrapper[data-v-44d98b5f] {\n  height: 100%;\n}\n.content-wrapper .el-tree[data-v-44d98b5f] {\n    max-height: 500px;\n    overflow-y: scroll;\n    /* .custom-tree-node {\r\n                flex: 1;\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: space-between;\r\n                font-size: 12px;\r\n                padding-right: 8px;\r\n                .org-button-wrap {\r\n                    span {\r\n                        font-size: 12px;\r\n                    }\r\n                }\r\n            }*/\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/base/src/views/sysMange/roleManage/newRole.vue"],names:[],mappings:";AACA;EACE,aAAa;CACd;AACD;IACI,kBAAkB;IAClB,mBAAmB;IACnB;;;;;;;;;;;;eAYW;CACd",file:"newRole.vue",sourcesContent:["\n.content-wrapper[data-v-44d98b5f] {\n  height: 100%;\n}\n.content-wrapper .el-tree[data-v-44d98b5f] {\n    max-height: 500px;\n    overflow-y: scroll;\n    /* .custom-tree-node {\r\n                flex: 1;\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: space-between;\r\n                font-size: 12px;\r\n                padding-right: 8px;\r\n                .org-button-wrap {\r\n                    span {\r\n                        font-size: 12px;\r\n                    }\r\n                }\r\n            }*/\n}\n"],sourceRoot:""}])},401:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content-wrapper"},[r("div",{staticClass:"form-wrapper"},[r("el-form",{ref:"prole",attrs:{model:e.prole,rules:e.rules,inline:!0,"label-width":"94px"}},[r("el-form-item",{attrs:{label:"角色名称：",prop:"name"}},[r("el-input",{attrs:{placeholder:"",disabled:e.isJustSee},model:{value:e.prole.name,callback:function(t){e.$set(e.prole,"name","string"==typeof t?t.trim():t)},expression:"prole.name"}})],1),e._v(" "),r("el-form-item",{directives:[{name:"auth",rawName:"v-auth",value:"system_roleManage_enableDisabling",expression:"'system_roleManage_enableDisabling'"}],attrs:{label:"状态：",prop:"status"}},[r("el-radio-group",{attrs:{disabled:e.isJustSee},model:{value:e.prole.status,callback:function(t){e.$set(e.prole,"status",t)},expression:"prole.status"}},[r("el-radio",{attrs:{label:"1"}},[e._v("启用")]),e._v(" "),r("el-radio",{attrs:{label:"0"}},[e._v("禁用")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"描述：",prop:"remark"}},[r("el-input",{attrs:{disabled:e.isJustSee},model:{value:e.prole.remark,callback:function(t){e.$set(e.prole,"remark",t)},expression:"prole.remark"}})],1),e._v(" "),r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"权限设置：",prop:"resource"}},[r("div",{staticClass:"role-tree",staticStyle:{border:"1px solid #ccc",padding:"10px"}},[e.loading?r("div",{staticStyle:{"text-align":"center",color:"#606266"}},[r("i",{staticClass:"el-icon-loading"}),e._v(" "),r("span",[e._v("加载中")])]):r("el-tree",{ref:"tree",attrs:{data:e.data5,"node-key":"id",props:e.defaultProps,"default-expand-all":"","show-checkbox":e.isShowCheckbox,"expand-on-click-node":!1,"default-checked-keys":e.ids},on:{"check-change":e.handleCheckChange},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,o=t.data;return r("span",{staticClass:"custom-tree-node",class:{menuType:5==o.menuType}},[r("span",[e._v("\n                "+e._s(n.label)+"\n              ")])])}}])})],1)]),e._v(" "),r("el-form-item",{staticStyle:{width:"100%","text-align":"center"}},[e.isSee?r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmRole("prole",!1)}}},[e._v("保存")]):e._e(),e._v(" "),e.isSee?r("el-button",{on:{click:e.out}},[e._v("取消")]):r("el-button",{attrs:{type:"primary"},on:{click:e.out}},[e._v("返回")])],1)],1)],1)])},o=[],s={render:n,staticRenderFns:o};t.a=s},59:function(e,t,r){"use strict";function n(e){r(397),r(399)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(270),s=r(401),a=r(46),i=n,l=a(o.a,s.a,!1,i,"data-v-44d98b5f",null);t.default=l.exports}});