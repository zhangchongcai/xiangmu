webpackJsonpbase([21],{202:function(t,e,a){"use strict";function n(t){a(405)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(272),r=a(407),s=a(46),o=n,l=s(i.a,r.a,!1,o,"data-v-9f99252a",null);e.default=l.exports},272:function(t,e,a){"use strict";var n=a(18),i=a.n(n),r=a(47),s=a(82);e.a={name:"userList",mixins:[s.a.cacheMixin],data:function(){return{cacheField:["userList","currentPage","pageSize","formInline"],statusArr:[{value:"",label:"全部"},{value:"0",label:"启用"},{value:"1",label:"禁用"},{value:"2",label:"离职"}],total:1,currentPage:1,pageSize:10,orgTreeList:[],formInline:{loginName:"",fullName:"",status:"",orgUid:"",orgName:"全部",attributeType:""},orgArr:[],userList:[],dialogVisible:!1,resetVisible:!1,status:"",attributeArr:[],defaultProps:{children:"children",label:"text"}}},activated:function(){this.getUserList()},created:function(){this.getAttribute(),this.getUserList(),this.getOrgTreeList()},filters:{attributeFilter:function(t){if(!t)return"";var e=JSON.parse(sessionStorage.getItem("attribute"));return e?e.map(function(e){if(e.propertyCode==t)return e.propertyName}).join().replace(/,/g,""):void 0}},methods:{clear:function(){this.formInline.orgName=this.formInline.orgUid=""},to:function(){this.$router.push("newUser")},editUser:function(t){this.$router.push("editUser"),localStorage.setItem("onlyUser",t.uid)},diaPwd:function(t){this.resetVisible=!0,this.uid=t.uid},resetPwd:function(){var t=this,e=this;Object(r._8)(this.uid).then(function(a){a&&200==a.code&&(t.resetVisible=!1,t.uid="",e.$message({message:"重置密码成功",type:"success"}))}).catch(function(){})},chooseStatus:function(t){var e=this;this.statusArr.map(function(a,n){a.value===t&&(e.status=e.statusArr[n].value)})},getUserList:function(){var t=this,e={pageNum:this.currentPage,pageSize:this.pageSize,loginName:this.formInline.loginName,fullName:this.formInline.fullName,status:this.status,orgUid:this.formInline.orgUid,attributeType:this.formInline.attributeType};Object(r._23)(e).then(function(e){e&&200==e.code?(t.pageNum=e.data.pageNum,t.pageSize=e.data.pageSize,t.total=e.data.total,t.userList=e.data.rows):t.$message({message:e.msg,type:"info"})}).catch(function(){t.$message("网络繁忙，请稍后再试")})},getOrgTreeList:function(){var t=this;Object(r.V)().then(function(e){e&&200==e.code?t.orgArr=e.data:t.error(e.msg)}).catch(function(){})},getAttribute:function(){var t=this;Object(r.g)().then(function(e){e&&200==e.code?(e.data&&sessionStorage.setItem("attribute",i()(e.data)),t.attributeArr=e.data,t.attributeArr.unshift({propertyCode:"",propertyName:"全部"})):t.error(e.msg)}).catch(function(){})},handleNodeClick:function(t){this.formInline.orgUid=t.id,this.formInline.orgName=t.text},handleClick:function(t){localStorage.setItem("usDetail_uid",t.uid),this.$router.push("userDetail")},onSubmit:function(){this.getUserList()},handleCurrentChange:function(t){this.currentPage=t,this.getUserList()},handleSizeChange:function(t){this.pageSize=t,this.getUserList()}}}},405:function(t,e,a){var n=a(406);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(182)("43373e35",n,!0,{})},406:function(t,e,a){e=t.exports=a(181)(!0),e.push([t.i,"\n.content-wrapper[data-v-9f99252a] {\n  height: 100%;\n}\n.content-wrapper .list-wrapper .form .el-form-item--mini.el-form-item[data-v-9f99252a] {\n    margin-bottom: 8px;\n}\n.content-wrapper .list-wrapper .form .el-input[data-v-9f99252a] {\n    width: 192px;\n    height: 32px;\n}\n.content-wrapper .list-wrapper .form .el-select[data-v-9f99252a] {\n    width: 192px;\n    height: 32px;\n}\n.content-wrapper .list-wrapper .form .el-button[data-v-9f99252a] {\n    width: 80px;\n    height: 32px;\n}\n.content-wrapper .list-wrapper .create-wrapper[data-v-9f99252a] {\n    width: 100%;\n    height: 32px;\n    margin: 10px 0;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.content-wrapper .list-wrapper .create-wrapper .el-button[data-v-9f99252a] {\n      width: 80px;\n      height: 32px;\n}\n.content-wrapper .list-wrapper .create-wrapper .tip[data-v-9f99252a] {\n      font-size: 14px;\n      color: #fec107;\n}\n.content-wrapper .list-wrapper .create-wrapper .tip i[data-v-9f99252a] {\n        margin-right: 5px;\n        font-size: 14px;\n}\n.content-wrapper .list-wrapper .newBuild[data-v-9f99252a] {\n    width: 100%;\n    height: 60px;\n    background-color: #ccc;\n    border-top: #8b8b8b;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/base/src/views/sysMange/userManage/userList.vue"],names:[],mappings:";AACA;EACE,aAAa;CACd;AACD;IACI,mBAAmB;CACtB;AACD;IACI,aAAa;IACb,aAAa;CAChB;AACD;IACI,aAAa;IACb,aAAa;CAChB;AACD;IACI,YAAY;IACZ,aAAa;CAChB;AACD;IACI,YAAY;IACZ,aAAa;IACb,eAAe;IACf,qBAAqB;IACrB,qBAAqB;IACrB,cAAc;IACd,0BAA0B;QACtB,uBAAuB;YACnB,+BAA+B;IACvC,0BAA0B;QACtB,uBAAuB;YACnB,oBAAoB;CAC/B;AACD;MACM,YAAY;MACZ,aAAa;CAClB;AACD;MACM,gBAAgB;MAChB,eAAe;CACpB;AACD;QACQ,kBAAkB;QAClB,gBAAgB;CACvB;AACD;IACI,YAAY;IACZ,aAAa;IACb,uBAAuB;IACvB,oBAAoB;CACvB",file:"userList.vue",sourcesContent:["\n.content-wrapper[data-v-9f99252a] {\n  height: 100%;\n}\n.content-wrapper .list-wrapper .form .el-form-item--mini.el-form-item[data-v-9f99252a] {\n    margin-bottom: 8px;\n}\n.content-wrapper .list-wrapper .form .el-input[data-v-9f99252a] {\n    width: 192px;\n    height: 32px;\n}\n.content-wrapper .list-wrapper .form .el-select[data-v-9f99252a] {\n    width: 192px;\n    height: 32px;\n}\n.content-wrapper .list-wrapper .form .el-button[data-v-9f99252a] {\n    width: 80px;\n    height: 32px;\n}\n.content-wrapper .list-wrapper .create-wrapper[data-v-9f99252a] {\n    width: 100%;\n    height: 32px;\n    margin: 10px 0;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.content-wrapper .list-wrapper .create-wrapper .el-button[data-v-9f99252a] {\n      width: 80px;\n      height: 32px;\n}\n.content-wrapper .list-wrapper .create-wrapper .tip[data-v-9f99252a] {\n      font-size: 14px;\n      color: #fec107;\n}\n.content-wrapper .list-wrapper .create-wrapper .tip i[data-v-9f99252a] {\n        margin-right: 5px;\n        font-size: 14px;\n}\n.content-wrapper .list-wrapper .newBuild[data-v-9f99252a] {\n    width: 100%;\n    height: 60px;\n    background-color: #ccc;\n    border-top: #8b8b8b;\n}\n"],sourceRoot:""}])},407:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrapper"},[a("div",{staticClass:"list-wrapper"},[a("div",{staticClass:"form"},[a("el-form",{attrs:{inline:!0,model:t.formInline,size:"mini","label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户账号：",prop:"loginName"}},[a("el-input",{model:{value:t.formInline.loginName,callback:function(e){t.$set(t.formInline,"loginName","string"==typeof e?e.trim():e)},expression:"formInline.loginName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"用户名称：",prop:"fullName"}},[a("el-input",{model:{value:t.formInline.fullName,callback:function(e){t.$set(t.formInline,"fullName","string"==typeof e?e.trim():e)},expression:"formInline.fullName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"用户属性：",prop:"attributeType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formInline.attributeType,callback:function(e){t.$set(t.formInline,"attributeType",e)},expression:"formInline.attributeType"}},t._l(t.attributeArr,function(t){return a("el-option",{key:t.propertyCode,attrs:{label:t.propertyName,value:t.propertyCode}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"状态：",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.chooseStatus},model:{value:t.formInline.status,callback:function(e){t.$set(t.formInline,"status",e)},expression:"formInline.status"}},t._l(t.statusArr,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"所属组织：",prop:"orgName"}},[a("el-input",{staticStyle:{width:"192px"},attrs:{disabled:""},model:{value:t.formInline.orgName,callback:function(e){t.$set(t.formInline,"orgName",e)},expression:"formInline.orgName"}}),t._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.dialogVisible=!0}}},[t._v("选择")]),t._v(" "),t.formInline.orgName?a("i",{staticClass:"el-icon-close",staticStyle:{top:"8px",left:"172px",position:"absolute","font-weight":"bolder",color:"#3b74ff","font-size":"medium"},on:{click:t.clear}}):t._e(),t._v(" "),a("el-button",{staticStyle:{"margin-left":"29px"},attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")])],1)],1)],1),t._v(" "),a("div",{staticClass:"create-wrapper"},[t._m(0),t._v(" "),a("el-button",{directives:[{name:"auth",rawName:"v-auth",value:"system_userManage_add",expression:"'system_userManage_add'"}],attrs:{type:"primary"},on:{click:t.to}},[t._v("新建")])],1),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.userList,stripe:""}},[a("el-table-column",{attrs:{prop:"loginName",label:"用户账号","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"fullName",label:"用户名称","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号码","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"attributeType",label:"用户属性","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("attributeFilter")(e.row.attributeType)))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.status?"启用":1==e.row.status?"禁用":"离职")+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"organization",label:"所属组织","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.organization.name))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"250",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"auth",rawName:"v-auth",value:"system_userManage_see",expression:"'system_userManage_see'"}],staticClass:"table-btn-mini",attrs:{type:"text"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("查看\n            ")]),t._v(" "),a("el-button",{directives:[{name:"auth",rawName:"v-auth",value:"system_userManage_update",expression:"'system_userManage_update'"}],staticClass:"table-btn-mini",attrs:{type:"text"},on:{click:function(a){return t.editUser(e.row)}}},[t._v("编辑\n            ")]),t._v(" "),a("el-button",{directives:[{name:"auth",rawName:"v-auth",value:"system_userManage_reSetPs",expression:"'system_userManage_reSetPs'"}],staticClass:"table-btn-mini",attrs:{type:"text"},on:{click:function(a){return t.diaPwd(e.row)}}},[t._v("重置密码\n            ")])]}}])})],1),t._v(" "),a("div",{staticClass:"page-wrap"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[10,25,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)],1)]),t._v(" "),a("div",{staticClass:"diaWindow treeDialog"},[a("el-dialog",{attrs:{title:"选择组织",visible:t.dialogVisible,width:"448px","lock-scroll":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"divider"}),t._v(" "),a("div",{staticClass:"content"},[a("el-tree",{ref:"tree",attrs:{data:t.orgArr,"node-key":"id","expand-on-click-node":!1,"default-expand-all":"","highlight-current":!0,props:t.defaultProps},on:{"node-click":t.handleNodeClick},scopedSlots:t._u([{key:"default",fn:function(e){var n=(e.node,e.data);return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"org-button"},[a("i",{staticClass:"iconfont",class:{"icon-neiye-zongbu":"总部"==n.text,"icon-neiye-zuzhi":0==n.isCinema,"icon-neiye-quyu":1==n.isCinema}},[t._v("\n                "+t._s(n.text)+"\n              ")])])])}}])})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)])],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.resetVisible,width:"30%"},on:{"update:visible":function(e){t.resetVisible=e}}},[a("i",{staticClass:"el-icon-warning",staticStyle:{"font-size":"30px",color:"#3B74FF"}}),t._v(" "),a("span",[t._v("确定重置此员工密码？")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.resetPwd}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.resetVisible=!1}}},[t._v("取 消")])],1)])],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"tip"},[a("i",{staticClass:"el-icon-warning"}),t._v("用户初始密码：123456")])}],r={render:n,staticRenderFns:i};e.a=r}});