webpackJsonpbase([14],{213:function(e,n,a){"use strict";function t(e){a(464),a(466)}Object.defineProperty(n,"__esModule",{value:!0});var s=a(285),o=a(468),i=a(46),r=t,l=i(s.a,o.a,!1,r,"data-v-eaab998e",null);n.default=l.exports},285:function(e,n,a){"use strict";var t=a(47);n.a={name:"messageTemplateDetail",data:function(){return{templateBread:"",listLoading:!1,tableKey:1,sceneCodes:[],isModify:!1,sendDebouce:!1,isJustSee:!1,checkList:["选中且禁用","复选框 A"],nameslist:[],seceneParam:"",contentMsg:"",tempalteShowText:"",messageTemplate:{sceneName:null,sceneCode:"",templateName:"",templateCode:"",seceneParam:null,content:"",status:1},rules:{sceneCode:[{required:!0,message:"请选择短信场景",trigger:"blur"}],seceneParam:[{required:!0,message:"请先选择短信场景",trigger:"blur"}],content:[{required:!0,message:"请填写模板内容",trigger:"blur"}]}}},methods:{handleClick:function(e,n){console.log(e,n)},seceneParamFunc:function(e){console.log(e),this.messageTemplate.content=this.messageTemplate.content+"{"+e.paramCode+"}"},sendMessage:function(){var e=this;this.sendDebouce=!0,this.$refs.messageTemplate.validate(function(n){if(n){if(null==e.messageTemplate.phone||void 0==e.messageTemplate.phone||""==e.messageTemplate.phone)return void e.error("请输入手机号");if(11==e.messageTemplate.phone.length)return void e.error("手机号格式不正确");var a={mobile:e.messageTemplate.phone,content:e.messageTemplate.content};Object(t._16)(a).then(function(n){n.result?(e.success(n.msg),e.contentMsg=n.msg):e.error(n.msg)}).catch(function(e){console.log(e)})}})},closeDialog:function(){this.dialogFormVisible=!1},submitForm:function(e,n){var a=this;this.$refs[e].validate(function(e){if(!e)return!1;var s=a.messageTemplate;delete s.seceneParam,n?(s.id=a.$route.query.id,Object(t._20)(s).then(function(e){e.result?(a.$store.commit("tagNav/removeTagNav",a.$route),a.success("修改短信模板成功"),a.$router.go(-1)):a.error(e.msg)}).catch(function(e){console.log(e)})):Object(t.t)(s).then(function(e){e.result?(a.$store.commit("tagNav/removeTagNav",a.$route),a.success("创建短信模板成功"),a.$router.go(-1)):a.error(e.msg)}).catch(function(e){console.log(e)})})},getInfo:function(){},querySmsScene:function(){var e=this,n={};this.$route.query.sceneCode&&(n={sceneCode:this.$route.query.sceneCode}),Object(t._3)({postObj:n}).then(function(a){if(a&&200==a.code){var s=a.data,o=e.$route.query.id,i=s.filter(function(e){return e.id==o}),r=i&&i[0];e.messageTemplate.sceneCode=r.sceneCode,Object(t._2)(n).then(function(n){if(e.sceneCodes=n.data.data,e.$route.query.isModify){var a=n.data.data.filter(function(e){return e.sceneCode==r.sceneCode});e.messageTemplate.seceneParam=a&&a[0]&&a[0].paramList;for(var t=a&&a[0]&&a[0].paramList,s="",o="",i=0;i<t.length;i++)s+=t[i].paramName+":{",s+=t[i].paramCode+"},",o+=t[i].paramName+":",o+=t[i].sample;e.tempalteShowText=o,e.messageTemplate.content=r.content}})}else _this.$message({message:ret.msg,type:"info"})}).catch(function(){e.$message("网络繁忙，请稍后再试")})},out:function(){this.$store.commit("tagNav/removeTagNav",this.$route),this.$router.push("/sys/message/messageTemplate")},templateTextareaFunc:function(){var e=/\{(.+?)\}/g,n=this.messageTemplate.content,a=n.match(e);console.log(a,1);for(var t=(this.tempalteShowText,[]),s=0;s<a.length;s++){var o=a[s].slice(1,a[s].length-1);t.push(o)}var i=[];this.messageTemplate.seceneParam;console.log(i)},templateFunc:function(e){console.log(e);var n=this.sceneCodes.filter(function(n){return n.sceneCode==e});this.messageTemplate.seceneParam=n&&n[0]&&n[0].paramList,console.log(n[0]),this.messageTemplate.sceneName=n&&n[0]&&n[0].sceneName,this.messageTemplate.sceneCode=n&&n[0]&&n[0].sceneCode,this.messageTemplate.templateName=n&&n[0]&&n[0].sceneName,this.messageTemplate.templateCode=n&&n[0]&&n[0].sceneCode;for(var a=n&&n[0]&&n[0].paramList,t="",s="",o=0;o<a.length;o++)t+=a[o].paramName+":{",t+=a[o].paramCode+"}",s+=a[o].paramName+":",s+=a[o].sample;this.messageTemplate.content=t,this.tempalteShowText=s},unique:function(e){for(var n=[e[0]],a=1;a<e.length;a++)-1==n.indexOf(e[a])&&n.push(e[a]);return n},addContact:function(){this.$refs;this.$refs.tableDataRef,this.dialogFormVisible=!0}},created:function(){this.isModify=!("true"!=this.$route.query.isModify&&1!=this.$route.query.isModify),this.isJustSee=!("true"!=this.$route.query.isJustSee&&1!=this.$route.query.isJustSee),this.isModify&&(this.getInfo(),this.isJustSee&&(this.templateBread="查看短信模板")),this.querySmsScene()}}},464:function(e,n,a){var t=a(465);"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);a(182)("13026236",t,!0,{})},465:function(e,n,a){n=e.exports=a(181)(!0),n.push([e.i,"\n.page-justsee-messagetml-edit .el-form-item__label {\n  font-size: 12px;\n}\n.page-justsee-messagetml-edit .el-textarea__inner {\n  font-size: 12px;\n}\n.page-justsee-messagetml-edit .el-input--suffix .el-input__inner {\n  font-size: 12px;\n}\n.page-justsee-messagetml-edit .el-input__inner {\n  font-size: 12px;\n}\n.page-justsee-message-channel .temp-content .el-textarea.is-disabled .el-textarea__inner {\n  border: 1px solid #bcbcbc;\n}\n.page-justsee-message-channel .just-see-checkbox span {\n  margin-right: 6px;\n}\n.page-justsee-message-channel .el-date-editor.is-disabled .el-icon-date {\n  display: none;\n}\n.page-justsee-message-channel .el-textarea.is-disabled .el-textarea__inner {\n  border-color: transparent;\n  background-color: transparent;\n  cursor: text;\n  color: #808080;\n  border: 0 none;\n  padding-top: 10px;\n}\n.page-justsee-message-channel .el-checkbox {\n  margin-left: 0;\n  margin-right: 30px;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner {\n  border-color: transparent;\n  background-color: transparent;\n  cursor: text;\n  color: #808080;\n  padding: 0;\n  border: 0 none;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner:link {\n    border: none;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner:visited {\n    border: none;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner:hover {\n    border: none;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner:active {\n    border: none;\n}\n.page-justsee-message-channel .normal-text {\n  color: #808080;\n  padding: 0;\n}\n.page-justsee-message-channel .el-input__suffix {\n  display: none;\n}\n.page-justsee-message-channel .el-form-item__content {\n  color: #808080;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/base/src/views/sysMange/messageTemplate/detail.vue"],names:[],mappings:";AACA;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,0BAA0B;CAC3B;AACD;EACE,kBAAkB;CACnB;AACD;EACE,cAAc;CACf;AACD;EACE,0BAA0B;EAC1B,8BAA8B;EAC9B,aAAa;EACb,eAAe;EACf,eAAe;EACf,kBAAkB;CACnB;AACD;EACE,eAAe;EACf,mBAAmB;CACpB;AACD;EACE,0BAA0B;EAC1B,8BAA8B;EAC9B,aAAa;EACb,eAAe;EACf,WAAW;EACX,eAAe;CAChB;AACD;IACI,aAAa;CAChB;AACD;IACI,aAAa;CAChB;AACD;IACI,aAAa;CAChB;AACD;IACI,aAAa;CAChB;AACD;EACE,eAAe;EACf,WAAW;CACZ;AACD;EACE,cAAc;CACf;AACD;EACE,eAAe;CAChB",file:"detail.vue",sourcesContent:["\n.page-justsee-messagetml-edit .el-form-item__label {\n  font-size: 12px;\n}\n.page-justsee-messagetml-edit .el-textarea__inner {\n  font-size: 12px;\n}\n.page-justsee-messagetml-edit .el-input--suffix .el-input__inner {\n  font-size: 12px;\n}\n.page-justsee-messagetml-edit .el-input__inner {\n  font-size: 12px;\n}\n.page-justsee-message-channel .temp-content .el-textarea.is-disabled .el-textarea__inner {\n  border: 1px solid #bcbcbc;\n}\n.page-justsee-message-channel .just-see-checkbox span {\n  margin-right: 6px;\n}\n.page-justsee-message-channel .el-date-editor.is-disabled .el-icon-date {\n  display: none;\n}\n.page-justsee-message-channel .el-textarea.is-disabled .el-textarea__inner {\n  border-color: transparent;\n  background-color: transparent;\n  cursor: text;\n  color: #808080;\n  border: 0 none;\n  padding-top: 10px;\n}\n.page-justsee-message-channel .el-checkbox {\n  margin-left: 0;\n  margin-right: 30px;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner {\n  border-color: transparent;\n  background-color: transparent;\n  cursor: text;\n  color: #808080;\n  padding: 0;\n  border: 0 none;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner:link {\n    border: none;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner:visited {\n    border: none;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner:hover {\n    border: none;\n}\n.page-justsee-message-channel .el-input.is-disabled .el-input__inner:active {\n    border: none;\n}\n.page-justsee-message-channel .normal-text {\n  color: #808080;\n  padding: 0;\n}\n.page-justsee-message-channel .el-input__suffix {\n  display: none;\n}\n.page-justsee-message-channel .el-form-item__content {\n  color: #808080;\n}\n"],sourceRoot:""}])},466:function(e,n,a){var t=a(467);"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);a(182)("3d5bfd4e",t,!0,{})},467:function(e,n,a){n=e.exports=a(181)(!0),n.push([e.i,"\n.film-base-page .el-row[data-v-eaab998e]:last-child {\n  margin-bottom: 0;\n}\n.film-base-page .el-form-item.margin-bottom0[data-v-eaab998e] {\n  margin-bottom: 0;\n}\n.film-base-page .el-form-item[data-v-eaab998e] {\n  margin-bottom: 12px;\n}\n.film-base-page .el-col[data-v-eaab998e] {\n  border-radius: 4px;\n}\n.film-base-page .bg-purple-dark[data-v-eaab998e] {\n  background: #99a9bf;\n}\n.film-base-page .bg-purple[data-v-eaab998e] {\n  background: #d3dce6;\n}\n.film-base-page .bg-purple-light[data-v-eaab998e] {\n  background: #e5e9f2;\n}\n.film-base-page .grid-content[data-v-eaab998e] {\n  border-radius: 4px;\n  min-height: 36px;\n}\n.film-base-page .row-bg[data-v-eaab998e] {\n  padding: 10px 0;\n  background-color: #f9fafc;\n}\n.film-base-page .el-table .cell span.table-btn-mini[data-v-eaab998e] {\n  color: #3b74ff;\n  cursor: pointer;\n  margin-right: 6px;\n}\n.film-base-page .scene-btn[data-v-eaab998e] {\n  color: #3b74ff;\n}\n.template-box .left[data-v-eaab998e] {\n  float: left;\n}\n.template-box .right[data-v-eaab998e] {\n  float: right;\n}\n.template-demo-text[data-v-eaab998e] {\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  padding-bottom: 8px;\n  min-height: 32px;\n}\n.scene-btn[data-v-eaab998e] {\n  float: left;\n  margin-right: 6px;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/base/src/views/sysMange/messageTemplate/detail.vue"],names:[],mappings:";AACA;EACE,iBAAiB;CAClB;AACD;EACE,iBAAiB;CAClB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,mBAAmB;CACpB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,mBAAmB;EACnB,iBAAiB;CAClB;AACD;EACE,gBAAgB;EAChB,0BAA0B;CAC3B;AACD;EACE,eAAe;EACf,gBAAgB;EAChB,kBAAkB;CACnB;AACD;EACE,eAAe;CAChB;AACD;EACE,YAAY;CACb;AACD;EACE,aAAa;CACd;AACD;EACE,uBAAuB;EACvB,mBAAmB;EACnB,oBAAoB;EACpB,iBAAiB;CAClB;AACD;EACE,YAAY;EACZ,kBAAkB;CACnB",file:"detail.vue",sourcesContent:["\n.film-base-page .el-row[data-v-eaab998e]:last-child {\n  margin-bottom: 0;\n}\n.film-base-page .el-form-item.margin-bottom0[data-v-eaab998e] {\n  margin-bottom: 0;\n}\n.film-base-page .el-form-item[data-v-eaab998e] {\n  margin-bottom: 12px;\n}\n.film-base-page .el-col[data-v-eaab998e] {\n  border-radius: 4px;\n}\n.film-base-page .bg-purple-dark[data-v-eaab998e] {\n  background: #99a9bf;\n}\n.film-base-page .bg-purple[data-v-eaab998e] {\n  background: #d3dce6;\n}\n.film-base-page .bg-purple-light[data-v-eaab998e] {\n  background: #e5e9f2;\n}\n.film-base-page .grid-content[data-v-eaab998e] {\n  border-radius: 4px;\n  min-height: 36px;\n}\n.film-base-page .row-bg[data-v-eaab998e] {\n  padding: 10px 0;\n  background-color: #f9fafc;\n}\n.film-base-page .el-table .cell span.table-btn-mini[data-v-eaab998e] {\n  color: #3b74ff;\n  cursor: pointer;\n  margin-right: 6px;\n}\n.film-base-page .scene-btn[data-v-eaab998e] {\n  color: #3b74ff;\n}\n.template-box .left[data-v-eaab998e] {\n  float: left;\n}\n.template-box .right[data-v-eaab998e] {\n  float: right;\n}\n.template-demo-text[data-v-eaab998e] {\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  padding-bottom: 8px;\n  min-height: 32px;\n}\n.scene-btn[data-v-eaab998e] {\n  float: left;\n  margin-right: 6px;\n}\n"],sourceRoot:""}])},468:function(e,n,a){"use strict";var t=function(){var e=this,n=e.$createElement,a=e._self._c||n;return a("div",{staticClass:"page-wrapper page-justsee-message-channel page-justsee-messagetml-edit"},[a("div",{staticClass:"clearboth",staticStyle:{"margin-top":"30px"}}),e._v(" "),a("section",{staticClass:"film-base-page"},[a("el-form",{ref:"messageTemplate",attrs:{model:e.messageTemplate,"label-width":"110px","label-position":"right","label-height":"60px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"短信场景：",prop:"sceneCode"}},[a("el-select",{staticClass:"mini-select-size",staticStyle:{width:"360px"},attrs:{filterable:"",placeholder:"请选择",disabled:e.isJustSee},on:{change:e.templateFunc},model:{value:e.messageTemplate.sceneCode,callback:function(n){e.$set(e.messageTemplate,"sceneCode",n)},expression:"messageTemplate.sceneCode"}},e._l(e.sceneCodes,function(e){return a("el-option",{key:e.sceneCode,attrs:{label:e.sceneName,value:e.sceneCode}})}),1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"场景变量：",prop:"seceneParam"}},e._l(e.messageTemplate.seceneParam,function(n){return a("div",{key:n.id,staticClass:"scene-btn"},[e._v(e._s(n.paramName))])}),0)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"temp-content",attrs:{span:12}},[a("el-form-item",{attrs:{label:"模板内容：",prop:"content"}},[a("el-input",{attrs:{type:"textarea",resize:"none",disabled:e.isJustSee,placeholder:"请选择短信场景"},on:{change:e.templateTextareaFunc,blur:e.templateTextareaFunc},model:{value:e.messageTemplate.content,callback:function(n){e.$set(e.messageTemplate,"content",n)},expression:"messageTemplate.content"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}})],1),e._v(" "),e._e(),e._v(" "),e.isJustSee?e._e():a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"测试手机号：",prop:"description"}},[a("el-input",{staticStyle:{width:"70%"},model:{value:e.messageTemplate.phone,callback:function(n){e.$set(e.messageTemplate,"phone",n)},expression:"messageTemplate.phone"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"12px"},attrs:{type:"primary"},on:{click:e.sendMessage}},[e._v("发送测试短信")]),e._v(" "),a("div",{staticClass:"contentMsg"},[e._v(e._s(e.contentMsg))])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"btn",staticStyle:{margin:"20px auto","text-align":"center"}},[e.isModify||e.isJustSee?e._e():a("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.submitForm("messageTemplate",!1)}}},[e._v("保存")]),e._v(" "),e.isModify&&!e.isJustSee?a("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.submitForm("messageTemplate",!0)}}},[e._v("保存")]):e._e(),e._v(" "),e.isJustSee?e._e():a("el-button",{on:{click:e.out}},[e._v("取消")]),e._v(" "),e.isJustSee?a("el-button",{attrs:{plain:""},on:{click:e.out}},[e._v("返回")]):e._e()],1)],1)])},s=[],o={render:t,staticRenderFns:s};n.a=o}});