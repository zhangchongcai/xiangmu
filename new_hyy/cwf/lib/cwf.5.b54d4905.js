webpackJsonpcwf([5],{53:function(t,a,e){"use strict";function o(t){e(79)}Object.defineProperty(a,"__esModule",{value:!0});var n=e(67),c=e(81),l=e(12),r=o,i=l(n.a,c.a,!1,r,"data-v-4649c0c4",null);a.default=i.exports},67:function(t,a,e){"use strict";a.a={data:function(){return{activeNames:["1","2","3","4"],orderDetailName:"采购入库单",atId:this.$route.query.atId||"",type:this.$route.query.type||"",formData:{id:this.$route.query.atId||"",abId:"",status:"2",auditAppoint:""},checkInfoList:[{label:"单据名称",name:"bizName",content:""},{label:"创建时间",name:"createTime",content:""},{label:"审批状态",name:"status",content:""},{label:"单据类型",name:"businessName",content:""},{label:"申请人",name:"applyUserName",content:""},{label:"申请人单位",name:"applyGroupName",content:""},{label:"业务单据号",name:"bizNo",content:""}],tableData:[]}},mounted:function(){this.findspAuditBillRecord(),this.getApprovalrecordList()},methods:{formateEmpty:function(t,a,e,o){return e||"-"},getApprovalrecordList:function(){var t=this,a={atId:this.atId};this.$cwfList.getApprovalrecord(a).then(function(a){a&&200===a.code&&1==a.flag?t.tableData=a.data:t.$message({message:a.msg,type:"warning",duration:1e3})}).catch(function(t){console.log(t)})},commitApproval:function(){var t=this;if(!this.formData.status)return console.log("请审批任务"),void this.$message({message:"请审批任务",type:"warning",duration:1e3});if("3"==this.formData.status&&!this.formData.auditAppoint)return void this.$message({message:"审批驳回必须要写审批意见",type:"warning",duration:1e3});var a=this.formData;console.log(a),this.$cwfList.commitApproval(a).then(function(a){a&&200===a.code&&1==a.flag?(t.$message({message:"审批成功",type:"success",duration:1e3}),t.$store.commit("tagNav/removeTagNav",t.$route),t.$router.push({path:"/workflow/normalApproval"})):t.$message({message:a.msg,type:"warning",duration:1e3})}).catch(function(t){console.log(t)})},findspAuditBillRecord:function(){var t=this,a={id:this.atId};this.$cwfList.findspAuditBillRecord(a).then(function(a){if(a&&200===a.code&&1==a.flag){var e=a.data;t.checkInfoList.forEach(function(t){if("status"==t.name)switch(e[t.name]){case 1:t.content="待审批";break;case 2:t.content="审核通过";break;case 3:t.content="驳回审核";break;case 4:t.content="未审批";break;default:t.content="未知状态"}else t.content=e[t.name]}),console.log("checkInfoList",t.checkInfoList),t.formData.abId=e.abId}else t.$message({message:a.msg,type:"warning",duration:1e3})}).catch(function(t){console.log(t)})},closeBack:function(){this.$store.commit("tagNav/removeTagNav",this.$route),this.$router.push({path:"/workflow/normalApproval"})}}}},79:function(t,a,e){var o=e(80);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e(51)("404194ba",o,!0,{})},80:function(t,a,e){a=t.exports=e(50)(!0),a.push([t.i,"\n.cwf_checkNormalApproval .collapse-style[data-v-4649c0c4] {\n  width: 100%;\n  border: 0;\n}\n.cwf_checkNormalApproval[data-v-4649c0c4] .el-collapse-item__wrap {\n  padding-top: 0 !important;\n}\n.cwf_checkNormalApproval[data-v-4649c0c4] .el-collapse-item__wrap .el-collapse-item__content {\n    padding-bottom: 0px;\n}\n.cwf_checkNormalApproval .checkNormalApproval-item[data-v-4649c0c4] {\n  padding: 0 20px;\n  font-family: PingFangSC-Regular;\n  font-size: 12px;\n  color: #666666;\n  letter-spacing: 0;\n}\n.cwf_checkNormalApproval .checkNormalApproval-item .check-item-box[data-v-4649c0c4] {\n    margin-bottom: 16px;\n}\n.cwf_checkNormalApproval .checkNormalApproval-item .check-item-box .check-item-lable[data-v-4649c0c4] {\n      float: left;\n      width: 100px;\n      font-family: MicrosoftYaHei;\n      font-size: 12px;\n      color: #666666;\n      letter-spacing: 0;\n}\n.cwf_checkNormalApproval .checkNormalApproval-item .check-item-box .check-item-content[data-v-4649c0c4] {\n      float: left;\n      font-size: 12px;\n}\n.cwf_checkNormalApproval .footer[data-v-4649c0c4] {\n  text-align: center;\n  margin: 24px 0;\n}\n.cwf_checkNormalApproval .footer .el-button[data-v-4649c0c4] {\n    width: 80px;\n    height: 32px;\n    padding: 0;\n    margin: 0px;\n    text-align: center;\n    line-height: 32px;\n    margin-right: 32px;\n}\n","",{version:3,sources:["G:/Workspaces/work/chenxin/module-hyy/cwf/src/views/workflow/normalApproval/checkNormalApproval.vue"],names:[],mappings:";AACA;EACE,YAAY;EACZ,UAAU;CACX;AACD;EACE,0BAA0B;CAC3B;AACD;IACI,oBAAoB;CACvB;AACD;EACE,gBAAgB;EAChB,gCAAgC;EAChC,gBAAgB;EAChB,eAAe;EACf,kBAAkB;CACnB;AACD;IACI,oBAAoB;CACvB;AACD;MACM,YAAY;MACZ,aAAa;MACb,4BAA4B;MAC5B,gBAAgB;MAChB,eAAe;MACf,kBAAkB;CACvB;AACD;MACM,YAAY;MACZ,gBAAgB;CACrB;AACD;EACE,mBAAmB;EACnB,eAAe;CAChB;AACD;IACI,YAAY;IACZ,aAAa;IACb,WAAW;IACX,YAAY;IACZ,mBAAmB;IACnB,kBAAkB;IAClB,mBAAmB;CACtB",file:"checkNormalApproval.vue",sourcesContent:["\n.cwf_checkNormalApproval .collapse-style[data-v-4649c0c4] {\n  width: 100%;\n  border: 0;\n}\n.cwf_checkNormalApproval[data-v-4649c0c4] .el-collapse-item__wrap {\n  padding-top: 0 !important;\n}\n.cwf_checkNormalApproval[data-v-4649c0c4] .el-collapse-item__wrap .el-collapse-item__content {\n    padding-bottom: 0px;\n}\n.cwf_checkNormalApproval .checkNormalApproval-item[data-v-4649c0c4] {\n  padding: 0 20px;\n  font-family: PingFangSC-Regular;\n  font-size: 12px;\n  color: #666666;\n  letter-spacing: 0;\n}\n.cwf_checkNormalApproval .checkNormalApproval-item .check-item-box[data-v-4649c0c4] {\n    margin-bottom: 16px;\n}\n.cwf_checkNormalApproval .checkNormalApproval-item .check-item-box .check-item-lable[data-v-4649c0c4] {\n      float: left;\n      width: 100px;\n      font-family: MicrosoftYaHei;\n      font-size: 12px;\n      color: #666666;\n      letter-spacing: 0;\n}\n.cwf_checkNormalApproval .checkNormalApproval-item .check-item-box .check-item-content[data-v-4649c0c4] {\n      float: left;\n      font-size: 12px;\n}\n.cwf_checkNormalApproval .footer[data-v-4649c0c4] {\n  text-align: center;\n  margin: 24px 0;\n}\n.cwf_checkNormalApproval .footer .el-button[data-v-4649c0c4] {\n    width: 80px;\n    height: 32px;\n    padding: 0;\n    margin: 0px;\n    text-align: center;\n    line-height: 32px;\n    margin-right: 32px;\n}\n"],sourceRoot:""}])},81:function(t,a,e){"use strict";var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cwf_checkNormalApproval"},[e("el-form"),t._v(" "),e("el-collapse",{staticClass:"collapse-style",model:{value:t.activeNames,callback:function(a){t.activeNames=a},expression:"activeNames"}},[e("el-collapse-item",{staticStyle:{"margin-top":"17px","padding-bottom":"0px"},attrs:{title:"审批基础信息",name:"1"}},[e("el-row",{staticClass:"checkNormalApproval-item"},t._l(t.checkInfoList,function(a){return e("el-col",{key:a.label,staticClass:"check-item-box",attrs:{span:12}},[e("div",{staticClass:"check-item-lable"},[t._v(t._s(a.label)+"：")]),t._v(" "),e("div",{staticClass:"check-item-content"},[t._v(t._s(a.content||"-"))])])}),1)],1),t._v(" "),t._e(),t._v(" "),e("el-collapse-item",{attrs:{title:"审批记录",name:"3"}},[e("div",{staticClass:"checkNormalApproval-item"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[e("el-table-column",{attrs:{prop:"workflowNoteNum",label:"审批节点",formatter:t.formateEmpty}}),t._v(" "),e("el-table-column",{attrs:{prop:"atId",label:"任务编号",formatter:t.formateEmpty}}),t._v(" "),e("el-table-column",{attrs:{prop:"auditTime",label:"审批时间",formatter:t.formateEmpty}}),t._v(" "),e("el-table-column",{attrs:{prop:"auditUserName",label:"审批人",formatter:t.formateEmpty}}),t._v(" "),e("el-table-column",{attrs:{prop:"auditResult",label:"审批结果"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n              "+t._s(1==a.row.auditResult?"待审批":"")+"\n              "+t._s(2==a.row.auditResult?"审批通过":"")+"\n              "+t._s(3==a.row.auditResult?"驳回审批":"")+"\n              "+t._s(4==a.row.auditResult?"未审批":"")+"\n            ")]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"auditOpinion",label:"审批意见",formatter:t.formateEmpty}})],1)],1)]),t._v(" "),"approval"==t.type?e("el-collapse-item",{attrs:{title:"审批任务",name:"4"}},[e("div",{staticClass:"checkNormalApproval-item"},[e("div",{},[e("el-row",{staticStyle:{"margin-bottom":"16px"}},[e("label",{staticStyle:{"padding-right":"20px"}},[t._v("审批结果：")]),t._v(" "),e("el-radio",{attrs:{label:"2"},model:{value:t.formData.status,callback:function(a){t.$set(t.formData,"status",a)},expression:"formData.status"}},[t._v("通过")]),t._v(" "),e("el-radio",{attrs:{label:"3"},model:{value:t.formData.status,callback:function(a){t.$set(t.formData,"status",a)},expression:"formData.status"}},[t._v("驳回")])],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:24}},[e("label",{staticStyle:{display:"inline-block",float:"left","padding-right":"20px"}},[t._v("审批意见：")]),t._v(" "),e("div",{staticStyle:{display:"inline-block",float:"left",width:"360px",height:"177px"}},[e("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",maxlength:"500","show-word-limit":!0},model:{value:t.formData.auditAppoint,callback:function(a){t.$set(t.formData,"auditAppoint",a)},expression:"formData.auditAppoint"}})],1)])],1)],1)])]):t._e()],1),t._v(" "),e("div",{staticClass:"footer"},["approval"==t.type?[e("el-button",{attrs:{type:"primary"},on:{click:t.commitApproval}},[t._v("确 定")]),t._v(" "),e("el-button",{on:{click:t.closeBack}},[t._v("取 消")])]:t._e(),t._v(" "),"check"==t.type?[e("el-button",{on:{click:t.closeBack}},[t._v("返 回")])]:t._e()],2)],1)},n=[],c={render:o,staticRenderFns:n};a.a=c}});